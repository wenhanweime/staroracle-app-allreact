(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wp={exports:{}},ao={},_p={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=Symbol.for("react.element"),by=Symbol.for("react.portal"),Py=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),Ey=Symbol.for("react.profiler"),My=Symbol.for("react.provider"),Ny=Symbol.for("react.context"),Iy=Symbol.for("react.forward_ref"),Ly=Symbol.for("react.suspense"),Ry=Symbol.for("react.memo"),Dy=Symbol.for("react.lazy"),ku=Symbol.iterator;function Oy(e){return e===null||typeof e!="object"?null:(e=ku&&e[ku]||e["@@iterator"],typeof e=="function"?e:null)}var Sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kp=Object.assign,Tp={};function jr(e,t,n){this.props=e,this.context=t,this.refs=Tp,this.updater=n||Sp}jr.prototype.isReactComponent={};jr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cp(){}Cp.prototype=jr.prototype;function Fl(e,t,n){this.props=e,this.context=t,this.refs=Tp,this.updater=n||Sp}var $l=Fl.prototype=new Cp;$l.constructor=Fl;kp($l,jr.prototype);$l.isPureReactComponent=!0;var Tu=Array.isArray,Ap=Object.prototype.hasOwnProperty,zl={current:null},bp={key:!0,ref:!0,__self:!0,__source:!0};function Pp(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Ap.call(t,r)&&!bp.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ri,type:e,key:s,ref:o,props:i,_owner:zl.current}}function Vy(e,t){return{$$typeof:Ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ri}function Fy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cu=/\/+/g;function Oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fy(""+e.key):t.toString(36)}function hs(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ri:case by:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Oo(o,0):r,Tu(i)?(n="",e!=null&&(n=e.replace(Cu,"$&/")+"/"),hs(i,t,n,"",function(d){return d})):i!=null&&(Bl(i)&&(i=Vy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Tu(e))for(var l=0;l<e.length;l++){s=e[l];var u=r+Oo(s,l);o+=hs(s,t,n,u,i)}else if(u=Oy(e),typeof u=="function")for(e=u.call(e),l=0;!(s=e.next()).done;)s=s.value,u=r+Oo(s,l++),o+=hs(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Wi(e,t,n){if(e==null)return e;var r=[],i=0;return hs(e,r,"","",function(s){return t.call(n,s,i++)}),r}function $y(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},ms={transition:null},zy={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ms,ReactCurrentOwner:zl};function jp(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:Wi,forEach:function(e,t,n){Wi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wi(e,function(){t++}),t},toArray:function(e){return Wi(e,function(t){return t})||[]},only:function(e){if(!Bl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=jr;Y.Fragment=Py;Y.Profiler=Ey;Y.PureComponent=Fl;Y.StrictMode=jy;Y.Suspense=Ly;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zy;Y.act=jp;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kp({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=zl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Ap.call(t,u)&&!bp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ri,type:e.type,key:i,ref:s,props:r,_owner:o}};Y.createContext=function(e){return e={$$typeof:Ny,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:My,_context:e},e.Consumer=e};Y.createElement=Pp;Y.createFactory=function(e){var t=Pp.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Iy,render:e}};Y.isValidElement=Bl;Y.lazy=function(e){return{$$typeof:Dy,_payload:{_status:-1,_result:e},_init:$y}};Y.memo=function(e,t){return{$$typeof:Ry,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=ms.transition;ms.transition={};try{e()}finally{ms.transition=t}};Y.unstable_act=jp;Y.useCallback=function(e,t){return Fe.current.useCallback(e,t)};Y.useContext=function(e){return Fe.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};Y.useEffect=function(e,t){return Fe.current.useEffect(e,t)};Y.useId=function(){return Fe.current.useId()};Y.useImperativeHandle=function(e,t,n){return Fe.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Fe.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return Fe.current.useReducer(e,t,n)};Y.useRef=function(e){return Fe.current.useRef(e)};Y.useState=function(e){return Fe.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return Fe.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return Fe.current.useTransition()};Y.version="18.3.1";_p.exports=Y;var T=_p.exports;const By=Vl(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy=T,Hy=Symbol.for("react.element"),Wy=Symbol.for("react.fragment"),Ky=Object.prototype.hasOwnProperty,Gy=Uy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yy={key:!0,ref:!0,__self:!0,__source:!0};function Ep(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ky.call(t,r)&&!Yy.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Hy,type:e,key:s,ref:o,props:i,_owner:Gy.current}}ao.Fragment=Wy;ao.jsx=Ep;ao.jsxs=Ep;wp.exports=ao;var p=wp.exports,Mp={exports:{}},nt={},Np={exports:{}},Ip={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,$){var j=M.length;M.push($);e:for(;0<j;){var L=j-1>>>1,D=M[L];if(0<i(D,$))M[L]=$,M[j]=D,j=L;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var $=M[0],j=M.pop();if(j!==$){M[0]=j;e:for(var L=0,D=M.length,X=D>>>1;L<X;){var te=2*(L+1)-1,le=M[te],H=te+1,G=M[H];if(0>i(le,j))H<D&&0>i(G,le)?(M[L]=G,M[H]=j,L=H):(M[L]=le,M[te]=j,L=te);else if(H<D&&0>i(G,j))M[L]=G,M[H]=j,L=H;else break e}}return $}function i(M,$){var j=M.sortIndex-$.sortIndex;return j!==0?j:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,a=null,c=3,f=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=M)r(d),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(d)}}function w(M){if(v=!1,x(M),!g)if(n(u)!==null)g=!0,K(k);else{var $=n(d);$!==null&&z(w,$.startTime-M)}}function k(M,$){g=!1,v&&(v=!1,m(S),S=-1),f=!0;var j=c;try{for(x($),a=n(u);a!==null&&(!(a.expirationTime>$)||M&&!E());){var L=a.callback;if(typeof L=="function"){a.callback=null,c=a.priorityLevel;var D=L(a.expirationTime<=$);$=e.unstable_now(),typeof D=="function"?a.callback=D:a===n(u)&&r(u),x($)}else r(u);a=n(u)}if(a!==null)var X=!0;else{var te=n(d);te!==null&&z(w,te.startTime-$),X=!1}return X}finally{a=null,c=j,f=!1}}var C=!1,A=null,S=-1,b=5,P=-1;function E(){return!(e.unstable_now()-P<b)}function O(){if(A!==null){var M=e.unstable_now();P=M;var $=!0;try{$=A(!0,M)}finally{$?B():(C=!1,A=null)}}else C=!1}var B;if(typeof y=="function")B=function(){y(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=O,B=function(){F.postMessage(null)}}else B=function(){_(O,0)};function K(M){A=M,C||(C=!0,B())}function z(M,$){S=_(function(){M(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,K(k))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(c){case 1:case 2:case 3:var $=3;break;default:$=c}var j=c;c=$;try{return M()}finally{c=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var j=c;c=M;try{return $()}finally{c=j}},e.unstable_scheduleCallback=function(M,$,j){var L=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?L+j:L):j=L,M){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=j+D,M={id:h++,callback:$,priorityLevel:M,startTime:j,expirationTime:D,sortIndex:-1},j>L?(M.sortIndex=j,t(d,M),n(u)===null&&M===n(d)&&(v?(m(S),S=-1):v=!0,z(w,j-L))):(M.sortIndex=D,t(u,M),g||f||(g=!0,K(k))),M},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(M){var $=c;return function(){var j=c;c=$;try{return M.apply(this,arguments)}finally{c=j}}}})(Ip);Np.exports=Ip;var Xy=Np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=T,et=Xy;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lp=new Set,pi={};function $n(e,t){yr(e,t),yr(e+"Capture",t)}function yr(e,t){for(pi[e]=t,e=0;e<t.length;e++)Lp.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ca=Object.prototype.hasOwnProperty,Qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Au={},bu={};function Jy(e){return Ca.call(bu,e)?!0:Ca.call(Au,e)?!1:Qy.test(e)?bu[e]=!0:(Au[e]=!0,!1)}function Zy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function e0(e,t,n,r){if(t===null||typeof t>"u"||Zy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){be[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];be[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){be[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){be[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){be[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){be[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){be[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){be[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){be[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ul=/[\-:]([a-z])/g;function Hl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ul,Hl);be[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ul,Hl);be[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ul,Hl);be[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){be[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});be.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){be[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wl(e,t,n,r){var i=be.hasOwnProperty(t)?be[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(e0(t,n,i,r)&&(n=null),r||i===null?Jy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ht=qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ki=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),Gn=Symbol.for("react.fragment"),Kl=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Gl=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Yl=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),Op=Symbol.for("react.offscreen"),Pu=Symbol.iterator;function Or(e){return e===null||typeof e!="object"?null:(e=Pu&&e[Pu]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,Vo;function Kr(e){if(Vo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vo=t&&t[1]||""}return`
`+Vo+e}var Fo=!1;function $o(e,t){if(!e||Fo)return"";Fo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Fo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Kr(e):""}function t0(e){switch(e.tag){case 5:return Kr(e.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return e=$o(e.type,!1),e;case 11:return e=$o(e.type.render,!1),e;case 1:return e=$o(e.type,!0),e;default:return""}}function ja(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gn:return"Fragment";case Kn:return"Portal";case Aa:return"Profiler";case Kl:return"StrictMode";case ba:return"Suspense";case Pa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dp:return(e.displayName||"Context")+".Consumer";case Rp:return(e._context.displayName||"Context")+".Provider";case Gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yl:return t=e.displayName||null,t!==null?t:ja(e.type)||"Memo";case Yt:t=e._payload,e=e._init;try{return ja(e(t))}catch{}}return null}function n0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ja(t);case 8:return t===Kl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r0(e){var t=Vp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gi(e){e._valueTracker||(e._valueTracker=r0(e))}function Fp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ju(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $p(e,t){t=t.checked,t!=null&&Wl(e,"checked",t,!1)}function Ma(e,t){$p(e,t);var n=dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Na(e,t.type,n):t.hasOwnProperty("defaultValue")&&Na(e,t.type,dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Eu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Na(e,t,n){(t!=="number"||Es(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gr=Array.isArray;function dr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ia(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(Gr(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:dn(n)}}function zp(e,t){var n=dn(t.value),r=dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Nu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function La(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yi,Up=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i0=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(e){i0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ei[t]=ei[e]})});function Hp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ei.hasOwnProperty(e)&&ei[e]?(""+t).trim():t+"px"}function Wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var s0=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ra(e,t){if(t){if(s0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oa=null;function Xl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,fr=null,pr=null;function Iu(e){if(e=Vi(e)){if(typeof Va!="function")throw Error(N(280));var t=e.stateNode;t&&(t=po(t),Va(e.stateNode,e.type,t))}}function Kp(e){fr?pr?pr.push(e):pr=[e]:fr=e}function Gp(){if(fr){var e=fr,t=pr;if(pr=fr=null,Iu(e),t)for(e=0;e<t.length;e++)Iu(t[e])}}function Yp(e,t){return e(t)}function Xp(){}var zo=!1;function qp(e,t,n){if(zo)return e(t,n);zo=!0;try{return Yp(e,t,n)}finally{zo=!1,(fr!==null||pr!==null)&&(Xp(),Gp())}}function mi(e,t){var n=e.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var Fa=!1;if(Ft)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Fa=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Fa=!1}function o0(e,t,n,r,i,s,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var ti=!1,Ms=null,Ns=!1,$a=null,a0={onError:function(e){ti=!0,Ms=e}};function l0(e,t,n,r,i,s,o,l,u){ti=!1,Ms=null,o0.apply(a0,arguments)}function c0(e,t,n,r,i,s,o,l,u){if(l0.apply(this,arguments),ti){if(ti){var d=Ms;ti=!1,Ms=null}else throw Error(N(198));Ns||(Ns=!0,$a=d)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lu(e){if(zn(e)!==e)throw Error(N(188))}function u0(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lu(i),e;if(s===r)return Lu(i),t;s=s.sibling}throw Error(N(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function Jp(e){return e=u0(e),e!==null?Zp(e):null}function Zp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zp(e);if(t!==null)return t;e=e.sibling}return null}var eh=et.unstable_scheduleCallback,Ru=et.unstable_cancelCallback,d0=et.unstable_shouldYield,f0=et.unstable_requestPaint,ye=et.unstable_now,p0=et.unstable_getCurrentPriorityLevel,ql=et.unstable_ImmediatePriority,th=et.unstable_UserBlockingPriority,Is=et.unstable_NormalPriority,h0=et.unstable_LowPriority,nh=et.unstable_IdlePriority,lo=null,Pt=null;function m0(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:v0,g0=Math.log,y0=Math.LN2;function v0(e){return e>>>=0,e===0?32:31-(g0(e)/y0|0)|0}var Xi=64,qi=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ls(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Yr(l):(s&=o,s!==0&&(r=Yr(s)))}else o=n&~i,o!==0?r=Yr(o):s!==0&&(r=Yr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xt(t),i=1<<n,r|=e[n],t&=~i;return r}function x0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-xt(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=x0(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}}function za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rh(){var e=Xi;return Xi<<=1,!(Xi&4194240)&&(Xi=64),e}function Bo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Di(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=n}function _0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ql(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ee=0;function ih(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sh,Jl,oh,ah,lh,Ba=!1,Qi=[],nn=null,rn=null,sn=null,gi=new Map,yi=new Map,Qt=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Du(e,t){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yi.delete(t.pointerId)}}function Fr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Vi(t),t!==null&&Jl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function k0(e,t,n,r,i){switch(t){case"focusin":return nn=Fr(nn,e,t,n,r,i),!0;case"dragenter":return rn=Fr(rn,e,t,n,r,i),!0;case"mouseover":return sn=Fr(sn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gi.set(s,Fr(gi.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yi.set(s,Fr(yi.get(s)||null,e,t,n,r,i)),!0}return!1}function ch(e){var t=bn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=Qp(n),t!==null){e.blockedOn=t,lh(e.priority,function(){oh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ua(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Oa=r,n.target.dispatchEvent(r),Oa=null}else return t=Vi(n),t!==null&&Jl(t),e.blockedOn=n,!1;t.shift()}return!0}function Ou(e,t,n){gs(e)&&n.delete(t)}function T0(){Ba=!1,nn!==null&&gs(nn)&&(nn=null),rn!==null&&gs(rn)&&(rn=null),sn!==null&&gs(sn)&&(sn=null),gi.forEach(Ou),yi.forEach(Ou)}function $r(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,T0)))}function vi(e){function t(i){return $r(i,e)}if(0<Qi.length){$r(Qi[0],e);for(var n=1;n<Qi.length;n++){var r=Qi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nn!==null&&$r(nn,e),rn!==null&&$r(rn,e),sn!==null&&$r(sn,e),gi.forEach(t),yi.forEach(t),n=0;n<Qt.length;n++)r=Qt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qt.length&&(n=Qt[0],n.blockedOn===null);)ch(n),n.blockedOn===null&&Qt.shift()}var hr=Ht.ReactCurrentBatchConfig,Rs=!0;function C0(e,t,n,r){var i=ee,s=hr.transition;hr.transition=null;try{ee=1,Zl(e,t,n,r)}finally{ee=i,hr.transition=s}}function A0(e,t,n,r){var i=ee,s=hr.transition;hr.transition=null;try{ee=4,Zl(e,t,n,r)}finally{ee=i,hr.transition=s}}function Zl(e,t,n,r){if(Rs){var i=Ua(e,t,n,r);if(i===null)Jo(e,t,r,Ds,n),Du(e,r);else if(k0(i,e,t,n,r))r.stopPropagation();else if(Du(e,r),t&4&&-1<S0.indexOf(e)){for(;i!==null;){var s=Vi(i);if(s!==null&&sh(s),s=Ua(e,t,n,r),s===null&&Jo(e,t,r,Ds,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Jo(e,t,r,null,n)}}var Ds=null;function Ua(e,t,n,r){if(Ds=null,e=Xl(r),e=bn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ds=e,null}function uh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p0()){case ql:return 1;case th:return 4;case Is:case h0:return 16;case nh:return 536870912;default:return 16}default:return 16}}var Zt=null,ec=null,ys=null;function dh(){if(ys)return ys;var e,t=ec,n=t.length,r,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ys=i.slice(e,1<r?1-r:void 0)}function vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ji(){return!0}function Vu(){return!1}function rt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ji:Vu,this.isPropagationStopped=Vu,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=rt(Er),Oi=fe({},Er,{view:0,detail:0}),b0=rt(Oi),Uo,Ho,zr,co=fe({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zr&&(zr&&e.type==="mousemove"?(Uo=e.screenX-zr.screenX,Ho=e.screenY-zr.screenY):Ho=Uo=0,zr=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:Ho}}),Fu=rt(co),P0=fe({},co,{dataTransfer:0}),j0=rt(P0),E0=fe({},Oi,{relatedTarget:0}),Wo=rt(E0),M0=fe({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),N0=rt(M0),I0=fe({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L0=rt(I0),R0=fe({},Er,{data:0}),$u=rt(R0),D0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=V0[e])?!!t[e]:!1}function nc(){return F0}var $0=fe({},Oi,{key:function(e){if(e.key){var t=D0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(e){return e.type==="keypress"?vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),z0=rt($0),B0=fe({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=rt(B0),U0=fe({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),H0=rt(U0),W0=fe({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),K0=rt(W0),G0=fe({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y0=rt(G0),X0=[9,13,27,32],rc=Ft&&"CompositionEvent"in window,ni=null;Ft&&"documentMode"in document&&(ni=document.documentMode);var q0=Ft&&"TextEvent"in window&&!ni,fh=Ft&&(!rc||ni&&8<ni&&11>=ni),Bu=" ",Uu=!1;function ph(e,t){switch(e){case"keyup":return X0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Q0(e,t){switch(e){case"compositionend":return hh(t);case"keypress":return t.which!==32?null:(Uu=!0,Bu);case"textInput":return e=t.data,e===Bu&&Uu?null:e;default:return null}}function J0(e,t){if(Yn)return e==="compositionend"||!rc&&ph(e,t)?(e=dh(),ys=ec=Zt=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fh&&t.locale!=="ko"?null:t.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z0[e.type]:t==="textarea"}function mh(e,t,n,r){Kp(r),t=Os(t,"onChange"),0<t.length&&(n=new tc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ri=null,xi=null;function ev(e){Ah(e,0)}function uo(e){var t=Qn(e);if(Fp(t))return e}function tv(e,t){if(e==="change")return t}var gh=!1;if(Ft){var Ko;if(Ft){var Go="oninput"in document;if(!Go){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),Go=typeof Wu.oninput=="function"}Ko=Go}else Ko=!1;gh=Ko&&(!document.documentMode||9<document.documentMode)}function Ku(){ri&&(ri.detachEvent("onpropertychange",yh),xi=ri=null)}function yh(e){if(e.propertyName==="value"&&uo(xi)){var t=[];mh(t,xi,e,Xl(e)),qp(ev,t)}}function nv(e,t,n){e==="focusin"?(Ku(),ri=t,xi=n,ri.attachEvent("onpropertychange",yh)):e==="focusout"&&Ku()}function rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(xi)}function iv(e,t){if(e==="click")return uo(t)}function sv(e,t){if(e==="input"||e==="change")return uo(t)}function ov(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:ov;function wi(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ca.call(t,i)||!_t(e[i],t[i]))return!1}return!0}function Gu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yu(e,t){var n=Gu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gu(n)}}function vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xh(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Es(e.document)}return t}function ic(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function av(e){var t=xh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vh(n.ownerDocument.documentElement,n)){if(r!==null&&ic(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Yu(n,s);var o=Yu(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lv=Ft&&"documentMode"in document&&11>=document.documentMode,Xn=null,Ha=null,ii=null,Wa=!1;function Xu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wa||Xn==null||Xn!==Es(r)||(r=Xn,"selectionStart"in r&&ic(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ii&&wi(ii,r)||(ii=r,r=Os(Ha,"onSelect"),0<r.length&&(t=new tc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xn)))}function Zi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qn={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionend:Zi("Transition","TransitionEnd")},Yo={},wh={};Ft&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function fo(e){if(Yo[e])return Yo[e];if(!qn[e])return e;var t=qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wh)return Yo[e]=t[n];return e}var _h=fo("animationend"),Sh=fo("animationiteration"),kh=fo("animationstart"),Th=fo("transitionend"),Ch=new Map,qu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(e,t){Ch.set(e,t),$n(t,[e])}for(var Xo=0;Xo<qu.length;Xo++){var qo=qu[Xo],cv=qo.toLowerCase(),uv=qo[0].toUpperCase()+qo.slice(1);gn(cv,"on"+uv)}gn(_h,"onAnimationEnd");gn(Sh,"onAnimationIteration");gn(kh,"onAnimationStart");gn("dblclick","onDoubleClick");gn("focusin","onFocus");gn("focusout","onBlur");gn(Th,"onTransitionEnd");yr("onMouseEnter",["mouseout","mouseover"]);yr("onMouseLeave",["mouseout","mouseover"]);yr("onPointerEnter",["pointerout","pointerover"]);yr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Qu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,c0(r,t,void 0,e),e.currentTarget=null}function Ah(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Qu(i,l,d),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Qu(i,l,d),s=u}}}if(Ns)throw e=$a,Ns=!1,$a=null,e}function re(e,t){var n=t[qa];n===void 0&&(n=t[qa]=new Set);var r=e+"__bubble";n.has(r)||(bh(t,e,2,!1),n.add(r))}function Qo(e,t,n){var r=0;t&&(r|=4),bh(n,e,r,t)}var es="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[es]){e[es]=!0,Lp.forEach(function(n){n!=="selectionchange"&&(dv.has(n)||Qo(n,!1,e),Qo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[es]||(t[es]=!0,Qo("selectionchange",!1,t))}}function bh(e,t,n,r){switch(uh(t)){case 1:var i=C0;break;case 4:i=A0;break;default:i=Zl}n=i.bind(null,t,n,e),i=void 0,!Fa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=bn(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}qp(function(){var d=s,h=Xl(n),a=[];e:{var c=Ch.get(e);if(c!==void 0){var f=tc,g=e;switch(e){case"keypress":if(vs(n)===0)break e;case"keydown":case"keyup":f=z0;break;case"focusin":g="focus",f=Wo;break;case"focusout":g="blur",f=Wo;break;case"beforeblur":case"afterblur":f=Wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=H0;break;case _h:case Sh:case kh:f=N0;break;case Th:f=K0;break;case"scroll":f=b0;break;case"wheel":f=Y0;break;case"copy":case"cut":case"paste":f=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=zu}var v=(t&4)!==0,_=!v&&e==="scroll",m=v?c!==null?c+"Capture":null:c;v=[];for(var y=d,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=mi(y,m),w!=null&&v.push(Si(y,w,x)))),_)break;y=y.return}0<v.length&&(c=new f(c,g,null,n,h),a.push({event:c,listeners:v}))}}if(!(t&7)){e:{if(c=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",c&&n!==Oa&&(g=n.relatedTarget||n.fromElement)&&(bn(g)||g[$t]))break e;if((f||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=d,g=g?bn(g):null,g!==null&&(_=zn(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=d),f!==g)){if(v=Fu,w="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=zu,w="onPointerLeave",m="onPointerEnter",y="pointer"),_=f==null?c:Qn(f),x=g==null?c:Qn(g),c=new v(w,y+"leave",f,n,h),c.target=_,c.relatedTarget=x,w=null,bn(h)===d&&(v=new v(m,y+"enter",g,n,h),v.target=x,v.relatedTarget=_,w=v),_=w,f&&g)t:{for(v=f,m=g,y=0,x=v;x;x=Wn(x))y++;for(x=0,w=m;w;w=Wn(w))x++;for(;0<y-x;)v=Wn(v),y--;for(;0<x-y;)m=Wn(m),x--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=Wn(v),m=Wn(m)}v=null}else v=null;f!==null&&Ju(a,c,f,v,!1),g!==null&&_!==null&&Ju(a,_,g,v,!0)}}e:{if(c=d?Qn(d):window,f=c.nodeName&&c.nodeName.toLowerCase(),f==="select"||f==="input"&&c.type==="file")var k=tv;else if(Hu(c))if(gh)k=sv;else{k=rv;var C=nv}else(f=c.nodeName)&&f.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(k=iv);if(k&&(k=k(e,d))){mh(a,k,n,h);break e}C&&C(e,c,d),e==="focusout"&&(C=c._wrapperState)&&C.controlled&&c.type==="number"&&Na(c,"number",c.value)}switch(C=d?Qn(d):window,e){case"focusin":(Hu(C)||C.contentEditable==="true")&&(Xn=C,Ha=d,ii=null);break;case"focusout":ii=Ha=Xn=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,Xu(a,n,h);break;case"selectionchange":if(lv)break;case"keydown":case"keyup":Xu(a,n,h)}var A;if(rc)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Yn?ph(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(fh&&n.locale!=="ko"&&(Yn||S!=="onCompositionStart"?S==="onCompositionEnd"&&Yn&&(A=dh()):(Zt=h,ec="value"in Zt?Zt.value:Zt.textContent,Yn=!0)),C=Os(d,S),0<C.length&&(S=new $u(S,e,null,n,h),a.push({event:S,listeners:C}),A?S.data=A:(A=hh(n),A!==null&&(S.data=A)))),(A=q0?Q0(e,n):J0(e,n))&&(d=Os(d,"onBeforeInput"),0<d.length&&(h=new $u("onBeforeInput","beforeinput",null,n,h),a.push({event:h,listeners:d}),h.data=A))}Ah(a,t)})}function Si(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Os(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mi(e,n),s!=null&&r.unshift(Si(e,s,i)),s=mi(e,t),s!=null&&r.push(Si(e,s,i))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ju(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=mi(n,s),u!=null&&o.unshift(Si(n,u,l))):i||(u=mi(n,s),u!=null&&o.push(Si(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var fv=/\r\n?/g,pv=/\u0000|\uFFFD/g;function Zu(e){return(typeof e=="string"?e:""+e).replace(fv,`
`).replace(pv,"")}function ts(e,t,n){if(t=Zu(t),Zu(e)!==t&&n)throw Error(N(425))}function Vs(){}var Ka=null,Ga=null;function Ya(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xa=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,mv=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(e){return ed.resolve(null).then(e).catch(gv)}:Xa;function gv(e){setTimeout(function(){throw e})}function Zo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),vi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vi(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function td(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),bt="__reactFiber$"+Mr,ki="__reactProps$"+Mr,$t="__reactContainer$"+Mr,qa="__reactEvents$"+Mr,yv="__reactListeners$"+Mr,vv="__reactHandles$"+Mr;function bn(e){var t=e[bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$t]||n[bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=td(e);e!==null;){if(n=e[bt])return n;e=td(e)}return t}e=n,n=e.parentNode}return null}function Vi(e){return e=e[bt]||e[$t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function po(e){return e[ki]||null}var Qa=[],Jn=-1;function yn(e){return{current:e}}function ie(e){0>Jn||(e.current=Qa[Jn],Qa[Jn]=null,Jn--)}function ne(e,t){Jn++,Qa[Jn]=e.current,e.current=t}var fn={},Le=yn(fn),We=yn(!1),Ln=fn;function vr(e,t){var n=e.type.contextTypes;if(!n)return fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(e){return e=e.childContextTypes,e!=null}function Fs(){ie(We),ie(Le)}function nd(e,t,n){if(Le.current!==fn)throw Error(N(168));ne(Le,t),ne(We,n)}function Ph(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(N(108,n0(e)||"Unknown",i));return fe({},n,r)}function $s(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,Ln=Le.current,ne(Le,e),ne(We,We.current),!0}function rd(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=Ph(e,t,Ln),r.__reactInternalMemoizedMergedChildContext=e,ie(We),ie(Le),ne(Le,e)):ie(We),ne(We,n)}var It=null,ho=!1,ea=!1;function jh(e){It===null?It=[e]:It.push(e)}function xv(e){ho=!0,jh(e)}function vn(){if(!ea&&It!==null){ea=!0;var e=0,t=ee;try{var n=It;for(ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}It=null,ho=!1}catch(i){throw It!==null&&(It=It.slice(e+1)),eh(ql,vn),i}finally{ee=t,ea=!1}}return null}var Zn=[],er=0,zs=null,Bs=0,at=[],lt=0,Rn=null,Lt=1,Rt="";function kn(e,t){Zn[er++]=Bs,Zn[er++]=zs,zs=e,Bs=t}function Eh(e,t,n){at[lt++]=Lt,at[lt++]=Rt,at[lt++]=Rn,Rn=e;var r=Lt;e=Rt;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var s=32-xt(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lt=1<<32-xt(t)+i|n<<i|r,Rt=s+e}else Lt=1<<s|n<<i|r,Rt=e}function sc(e){e.return!==null&&(kn(e,1),Eh(e,1,0))}function oc(e){for(;e===zs;)zs=Zn[--er],Zn[er]=null,Bs=Zn[--er],Zn[er]=null;for(;e===Rn;)Rn=at[--lt],at[lt]=null,Rt=at[--lt],at[lt]=null,Lt=at[--lt],at[lt]=null}var Je=null,Qe=null,ae=!1,vt=null;function Mh(e,t){var n=ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function id(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Qe=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rn!==null?{id:Lt,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Je=e,Qe=null,!0):!1;default:return!1}}function Ja(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(ae){var t=Qe;if(t){var n=t;if(!id(e,t)){if(Ja(e))throw Error(N(418));t=on(n.nextSibling);var r=Je;t&&id(e,t)?Mh(r,n):(e.flags=e.flags&-4097|2,ae=!1,Je=e)}}else{if(Ja(e))throw Error(N(418));e.flags=e.flags&-4097|2,ae=!1,Je=e}}}function sd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function ns(e){if(e!==Je)return!1;if(!ae)return sd(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ya(e.type,e.memoizedProps)),t&&(t=Qe)){if(Ja(e))throw Nh(),Error(N(418));for(;t;)Mh(e,t),t=on(t.nextSibling)}if(sd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=on(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Je?on(e.stateNode.nextSibling):null;return!0}function Nh(){for(var e=Qe;e;)e=on(e.nextSibling)}function xr(){Qe=Je=null,ae=!1}function ac(e){vt===null?vt=[e]:vt.push(e)}var wv=Ht.ReactCurrentBatchConfig;function Br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function rs(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function od(e){var t=e._init;return t(e._payload)}function Ih(e){function t(m,y){if(e){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=un(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,y,x,w){return y===null||y.tag!==6?(y=aa(x,m.mode,w),y.return=m,y):(y=i(y,x),y.return=m,y)}function u(m,y,x,w){var k=x.type;return k===Gn?h(m,y,x.props.children,w,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yt&&od(k)===y.type)?(w=i(y,x.props),w.ref=Br(m,y,x),w.return=m,w):(w=Cs(x.type,x.key,x.props,null,m.mode,w),w.ref=Br(m,y,x),w.return=m,w)}function d(m,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=la(x,m.mode,w),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function h(m,y,x,w,k){return y===null||y.tag!==7?(y=Nn(x,m.mode,w,k),y.return=m,y):(y=i(y,x),y.return=m,y)}function a(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=aa(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ki:return x=Cs(y.type,y.key,y.props,null,m.mode,x),x.ref=Br(m,null,y),x.return=m,x;case Kn:return y=la(y,m.mode,x),y.return=m,y;case Yt:var w=y._init;return a(m,w(y._payload),x)}if(Gr(y)||Or(y))return y=Nn(y,m.mode,x,null),y.return=m,y;rs(m,y)}return null}function c(m,y,x,w){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:l(m,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ki:return x.key===k?u(m,y,x,w):null;case Kn:return x.key===k?d(m,y,x,w):null;case Yt:return k=x._init,c(m,y,k(x._payload),w)}if(Gr(x)||Or(x))return k!==null?null:h(m,y,x,w,null);rs(m,x)}return null}function f(m,y,x,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,l(y,m,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ki:return m=m.get(w.key===null?x:w.key)||null,u(y,m,w,k);case Kn:return m=m.get(w.key===null?x:w.key)||null,d(y,m,w,k);case Yt:var C=w._init;return f(m,y,x,C(w._payload),k)}if(Gr(w)||Or(w))return m=m.get(x)||null,h(y,m,w,k,null);rs(y,w)}return null}function g(m,y,x,w){for(var k=null,C=null,A=y,S=y=0,b=null;A!==null&&S<x.length;S++){A.index>S?(b=A,A=null):b=A.sibling;var P=c(m,A,x[S],w);if(P===null){A===null&&(A=b);break}e&&A&&P.alternate===null&&t(m,A),y=s(P,y,S),C===null?k=P:C.sibling=P,C=P,A=b}if(S===x.length)return n(m,A),ae&&kn(m,S),k;if(A===null){for(;S<x.length;S++)A=a(m,x[S],w),A!==null&&(y=s(A,y,S),C===null?k=A:C.sibling=A,C=A);return ae&&kn(m,S),k}for(A=r(m,A);S<x.length;S++)b=f(A,m,S,x[S],w),b!==null&&(e&&b.alternate!==null&&A.delete(b.key===null?S:b.key),y=s(b,y,S),C===null?k=b:C.sibling=b,C=b);return e&&A.forEach(function(E){return t(m,E)}),ae&&kn(m,S),k}function v(m,y,x,w){var k=Or(x);if(typeof k!="function")throw Error(N(150));if(x=k.call(x),x==null)throw Error(N(151));for(var C=k=null,A=y,S=y=0,b=null,P=x.next();A!==null&&!P.done;S++,P=x.next()){A.index>S?(b=A,A=null):b=A.sibling;var E=c(m,A,P.value,w);if(E===null){A===null&&(A=b);break}e&&A&&E.alternate===null&&t(m,A),y=s(E,y,S),C===null?k=E:C.sibling=E,C=E,A=b}if(P.done)return n(m,A),ae&&kn(m,S),k;if(A===null){for(;!P.done;S++,P=x.next())P=a(m,P.value,w),P!==null&&(y=s(P,y,S),C===null?k=P:C.sibling=P,C=P);return ae&&kn(m,S),k}for(A=r(m,A);!P.done;S++,P=x.next())P=f(A,m,S,P.value,w),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?S:P.key),y=s(P,y,S),C===null?k=P:C.sibling=P,C=P);return e&&A.forEach(function(O){return t(m,O)}),ae&&kn(m,S),k}function _(m,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Gn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ki:e:{for(var k=x.key,C=y;C!==null;){if(C.key===k){if(k=x.type,k===Gn){if(C.tag===7){n(m,C.sibling),y=i(C,x.props.children),y.return=m,m=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yt&&od(k)===C.type){n(m,C.sibling),y=i(C,x.props),y.ref=Br(m,C,x),y.return=m,m=y;break e}n(m,C);break}else t(m,C);C=C.sibling}x.type===Gn?(y=Nn(x.props.children,m.mode,w,x.key),y.return=m,m=y):(w=Cs(x.type,x.key,x.props,null,m.mode,w),w.ref=Br(m,y,x),w.return=m,m=w)}return o(m);case Kn:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else t(m,y);y=y.sibling}y=la(x,m.mode,w),y.return=m,m=y}return o(m);case Yt:return C=x._init,_(m,y,C(x._payload),w)}if(Gr(x))return g(m,y,x,w);if(Or(x))return v(m,y,x,w);rs(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,x),y.return=m,m=y):(n(m,y),y=aa(x,m.mode,w),y.return=m,m=y),o(m)):n(m,y)}return _}var wr=Ih(!0),Lh=Ih(!1),Us=yn(null),Hs=null,tr=null,lc=null;function cc(){lc=tr=Hs=null}function uc(e){var t=Us.current;ie(Us),e._currentValue=t}function el(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mr(e,t){Hs=e,lc=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(lc!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(Hs===null)throw Error(N(308));tr=e,Hs.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var Pn=null;function dc(e){Pn===null?Pn=[e]:Pn.push(e)}function Rh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,dc(t)):(n.next=i.next,i.next=n),t.interleaved=n,zt(e,r)}function zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xt=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function an(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,zt(e,n)}return i=r.interleaved,i===null?(t.next=t,dc(r)):(t.next=i.next,i.next=t),r.interleaved=t,zt(e,n)}function xs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ql(e,n)}}function ad(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Xt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(s!==null){var a=i.baseState;o=0,h=d=u=null,l=s;do{var c=l.lane,f=l.eventTime;if((r&c)===c){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(c=t,f=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){a=g.call(f,a,c);break e}a=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,c=typeof g=="function"?g.call(f,a,c):g,c==null)break e;a=fe({},a,c);break e;case 2:Xt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else f={eventTime:f,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=f,u=a):h=h.next=f,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);if(h===null&&(u=a),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);On|=o,e.lanes=o,e.memoizedState=a}}function ld(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(N(191,i));i.call(r)}}}var Fi={},jt=yn(Fi),Ti=yn(Fi),Ci=yn(Fi);function jn(e){if(e===Fi)throw Error(N(174));return e}function pc(e,t){switch(ne(Ci,t),ne(Ti,e),ne(jt,Fi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:La(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=La(t,e)}ie(jt),ne(jt,t)}function _r(){ie(jt),ie(Ti),ie(Ci)}function Oh(e){jn(Ci.current);var t=jn(jt.current),n=La(t,e.type);t!==n&&(ne(Ti,e),ne(jt,n))}function hc(e){Ti.current===e&&(ie(jt),ie(Ti))}var ce=yn(0);function Ks(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function mc(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ws=Ht.ReactCurrentDispatcher,na=Ht.ReactCurrentBatchConfig,Dn=0,de=null,we=null,Se=null,Gs=!1,si=!1,Ai=0,_v=0;function je(){throw Error(N(321))}function gc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function yc(e,t,n,r,i,s){if(Dn=s,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ws.current=e===null||e.memoizedState===null?Cv:Av,e=n(r,i),si){s=0;do{if(si=!1,Ai=0,25<=s)throw Error(N(301));s+=1,Se=we=null,t.updateQueue=null,ws.current=bv,e=n(r,i)}while(si)}if(ws.current=Ys,t=we!==null&&we.next!==null,Dn=0,Se=we=de=null,Gs=!1,t)throw Error(N(300));return e}function vc(){var e=Ai!==0;return Ai=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?de.memoizedState=Se=e:Se=Se.next=e,Se}function pt(){if(we===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Se===null?de.memoizedState:Se.next;if(t!==null)Se=t,we=e;else{if(e===null)throw Error(N(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?de.memoizedState=Se=e:Se=Se.next=e}return Se}function bi(e,t){return typeof t=="function"?t(e):t}function ra(e){var t=pt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=we,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,d=s;do{var h=d.lane;if((Dn&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var a={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=a,o=r):u=u.next=a,de.lanes|=h,On|=h}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=l,_t(r,t.memoizedState)||(He=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,de.lanes|=s,On|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ia(e){var t=pt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);_t(s,t.memoizedState)||(He=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Vh(){}function Fh(e,t){var n=de,r=pt(),i=t(),s=!_t(r.memoizedState,i);if(s&&(r.memoizedState=i,He=!0),r=r.queue,xc(Bh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Pi(9,zh.bind(null,n,r,i,t),void 0,null),ke===null)throw Error(N(349));Dn&30||$h(n,t,i)}return i}function $h(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zh(e,t,n,r){t.value=n,t.getSnapshot=r,Uh(t)&&Hh(e)}function Bh(e,t,n){return n(function(){Uh(t)&&Hh(e)})}function Uh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function Hh(e){var t=zt(e,1);t!==null&&wt(t,e,1,-1)}function cd(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Tv.bind(null,de,e),[t.memoizedState,e]}function Pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wh(){return pt().memoizedState}function _s(e,t,n,r){var i=At();de.flags|=e,i.memoizedState=Pi(1|t,n,void 0,r===void 0?null:r)}function mo(e,t,n,r){var i=pt();r=r===void 0?null:r;var s=void 0;if(we!==null){var o=we.memoizedState;if(s=o.destroy,r!==null&&gc(r,o.deps)){i.memoizedState=Pi(t,n,s,r);return}}de.flags|=e,i.memoizedState=Pi(1|t,n,s,r)}function ud(e,t){return _s(8390656,8,e,t)}function xc(e,t){return mo(2048,8,e,t)}function Kh(e,t){return mo(4,2,e,t)}function Gh(e,t){return mo(4,4,e,t)}function Yh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xh(e,t,n){return n=n!=null?n.concat([e]):null,mo(4,4,Yh.bind(null,t,e),n)}function wc(){}function qh(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qh(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jh(e,t,n){return Dn&21?(_t(n,t)||(n=rh(),de.lanes|=n,On|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=n)}function Sv(e,t){var n=ee;ee=n!==0&&4>n?n:4,e(!0);var r=na.transition;na.transition={};try{e(!1),t()}finally{ee=n,na.transition=r}}function Zh(){return pt().memoizedState}function kv(e,t,n){var r=cn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},em(e))tm(t,n);else if(n=Rh(e,t,n,r),n!==null){var i=Ve();wt(n,e,r,i),nm(n,t,r)}}function Tv(e,t,n){var r=cn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(em(e))tm(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,_t(l,o)){var u=t.interleaved;u===null?(i.next=i,dc(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Rh(e,t,i,r),n!==null&&(i=Ve(),wt(n,e,r,i),nm(n,t,r))}}function em(e){var t=e.alternate;return e===de||t!==null&&t===de}function tm(e,t){si=Gs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ql(e,n)}}var Ys={readContext:ft,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Cv={readContext:ft,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:ud,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_s(4194308,4,Yh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _s(4194308,4,e,t)},useInsertionEffect:function(e,t){return _s(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kv.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:cd,useDebugValue:wc,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=cd(!1),t=e[0];return e=Sv.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=de,i=At();if(ae){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),ke===null)throw Error(N(349));Dn&30||$h(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ud(Bh.bind(null,r,s,e),[e]),r.flags|=2048,Pi(9,zh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=At(),t=ke.identifierPrefix;if(ae){var n=Rt,r=Lt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_v++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Av={readContext:ft,useCallback:qh,useContext:ft,useEffect:xc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Gh,useMemo:Qh,useReducer:ra,useRef:Wh,useState:function(){return ra(bi)},useDebugValue:wc,useDeferredValue:function(e){var t=pt();return Jh(t,we.memoizedState,e)},useTransition:function(){var e=ra(bi)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1},bv={readContext:ft,useCallback:qh,useContext:ft,useEffect:xc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Gh,useMemo:Qh,useReducer:ia,useRef:Wh,useState:function(){return ia(bi)},useDebugValue:wc,useDeferredValue:function(e){var t=pt();return we===null?t.memoizedState=e:Jh(t,we.memoizedState,e)},useTransition:function(){var e=ia(bi)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function tl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=cn(e),s=Dt(r,i);s.payload=t,n!=null&&(s.callback=n),t=an(e,s,i),t!==null&&(wt(t,e,i,r),xs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=cn(e),s=Dt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=an(e,s,i),t!==null&&(wt(t,e,i,r),xs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=cn(e),i=Dt(n,r);i.tag=2,t!=null&&(i.callback=t),t=an(e,i,r),t!==null&&(wt(t,e,r,n),xs(t,e,r))}};function dd(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!wi(n,r)||!wi(i,s):!0}function rm(e,t,n){var r=!1,i=fn,s=t.contextType;return typeof s=="object"&&s!==null?s=ft(s):(i=Ke(t)?Ln:Le.current,r=t.contextTypes,s=(r=r!=null)?vr(e,i):fn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function fd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function nl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},fc(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ft(s):(s=Ke(t)?Ln:Le.current,i.context=vr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(tl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Sr(e,t){try{var n="",r=t;do n+=t0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function sa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Pv=typeof WeakMap=="function"?WeakMap:Map;function im(e,t,n){n=Dt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,pl=r),rl(e,t)},n}function sm(e,t,n){n=Dt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){rl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rl(e,t),typeof r!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function pd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Pv;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Bv.bind(null,e,t,n),t.then(e,e))}function hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function md(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Dt(-1,1),t.tag=2,an(n,t,1))),n.lanes|=1),e)}var jv=Ht.ReactCurrentOwner,He=!1;function Oe(e,t,n,r){t.child=e===null?Lh(t,null,n,r):wr(t,e.child,n,r)}function gd(e,t,n,r,i){n=n.render;var s=t.ref;return mr(t,i),r=yc(e,t,n,r,s,i),n=vc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bt(e,t,i)):(ae&&n&&sc(t),t.flags|=1,Oe(e,t,r,i),t.child)}function yd(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Pc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,om(e,t,s,r,i)):(e=Cs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wi,n(o,r)&&e.ref===t.ref)return Bt(e,t,i)}return t.flags|=1,e=un(s,r),e.ref=t.ref,e.return=t,t.child=e}function om(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(wi(s,r)&&e.ref===t.ref)if(He=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,Bt(e,t,i)}return il(e,t,n,r,i)}function am(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(rr,qe),qe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(rr,qe),qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ne(rr,qe),qe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ne(rr,qe),qe|=r;return Oe(e,t,i,n),t.child}function lm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function il(e,t,n,r,i){var s=Ke(n)?Ln:Le.current;return s=vr(t,s),mr(t,i),n=yc(e,t,n,r,s,i),r=vc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bt(e,t,i)):(ae&&r&&sc(t),t.flags|=1,Oe(e,t,n,i),t.child)}function vd(e,t,n,r,i){if(Ke(n)){var s=!0;$s(t)}else s=!1;if(mr(t,i),t.stateNode===null)Ss(e,t),rm(t,n,r),nl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ft(d):(d=Ke(n)?Ln:Le.current,d=vr(t,d));var h=n.getDerivedStateFromProps,a=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";a||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&fd(t,o,r,d),Xt=!1;var c=t.memoizedState;o.state=c,Ws(t,r,o,i),u=t.memoizedState,l!==r||c!==u||We.current||Xt?(typeof h=="function"&&(tl(t,n,h,r),u=t.memoizedState),(l=Xt||dd(t,n,l,r,c,u,d))?(a||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Dh(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:gt(t.type,l),o.props=d,a=t.pendingProps,c=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ft(u):(u=Ke(n)?Ln:Le.current,u=vr(t,u));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==u)&&fd(t,o,r,u),Xt=!1,c=t.memoizedState,o.state=c,Ws(t,r,o,i);var g=t.memoizedState;l!==a||c!==g||We.current||Xt?(typeof f=="function"&&(tl(t,n,f,r),g=t.memoizedState),(d=Xt||dd(t,n,d,r,c,g,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),r=!1)}return sl(e,t,n,r,s,i)}function sl(e,t,n,r,i,s){lm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&rd(t,n,!1),Bt(e,t,s);r=t.stateNode,jv.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wr(t,e.child,null,s),t.child=wr(t,null,l,s)):Oe(e,t,l,s),t.memoizedState=r.state,i&&rd(t,n,!0),t.child}function cm(e){var t=e.stateNode;t.pendingContext?nd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nd(e,t.context,!1),pc(e,t.containerInfo)}function xd(e,t,n,r,i){return xr(),ac(i),t.flags|=256,Oe(e,t,n,r),t.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function al(e){return{baseLanes:e,cachePool:null,transitions:null}}function um(e,t,n){var r=t.pendingProps,i=ce.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ne(ce,i&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xo(o,r,0,null),e=Nn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=al(n),t.memoizedState=ol,e):_c(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Ev(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=un(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=un(l,s):(s=Nn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?al(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=ol,r}return s=e.child,e=s.sibling,r=un(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _c(e,t){return t=xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function is(e,t,n,r){return r!==null&&ac(r),wr(t,e.child,null,n),e=_c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ev(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=sa(Error(N(422))),is(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=xo({mode:"visible",children:r.children},i,0,null),s=Nn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&wr(t,e.child,null,o),t.child.memoizedState=al(o),t.memoizedState=ol,s);if(!(t.mode&1))return is(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(N(419)),r=sa(s,r,void 0),is(e,t,o,r)}if(l=(o&e.childLanes)!==0,He||l){if(r=ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zt(e,i),wt(r,e,i,-1))}return bc(),r=sa(Error(N(421))),is(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Uv.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Qe=on(i.nextSibling),Je=t,ae=!0,vt=null,e!==null&&(at[lt++]=Lt,at[lt++]=Rt,at[lt++]=Rn,Lt=e.id,Rt=e.overflow,Rn=t),t=_c(t,r.children),t.flags|=4096,t)}function wd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),el(e.return,t,n)}function oa(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dm(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oe(e,t,r.children,n),r=ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wd(e,n,t);else if(e.tag===19)wd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ne(ce,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ks(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),oa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ks(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}oa(t,!0,n,null,s);break;case"together":oa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ss(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mv(e,t,n){switch(t.tag){case 3:cm(t),xr();break;case 5:Oh(t);break;case 1:Ke(t.type)&&$s(t);break;case 4:pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ne(Us,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ne(ce,ce.current&1),t.flags|=128,null):n&t.child.childLanes?um(e,t,n):(ne(ce,ce.current&1),e=Bt(e,t,n),e!==null?e.sibling:null);ne(ce,ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(ce,ce.current),r)break;return null;case 22:case 23:return t.lanes=0,am(e,t,n)}return Bt(e,t,n)}var fm,ll,pm,hm;fm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ll=function(){};pm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jn(jt.current);var s=null;switch(n){case"input":i=Ea(e,i),r=Ea(e,r),s=[];break;case"select":i=fe({},i,{value:void 0}),r=fe({},r,{value:void 0}),s=[];break;case"textarea":i=Ia(e,i),r=Ia(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vs)}Ra(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pi.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(pi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&re("scroll",e),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};hm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ur(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Nv(e,t,n){var r=t.pendingProps;switch(oc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Ke(t.type)&&Fs(),Ee(t),null;case 3:return r=t.stateNode,_r(),ie(We),ie(Le),mc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(gl(vt),vt=null))),ll(e,t),Ee(t),null;case 5:hc(t);var i=jn(Ci.current);if(n=t.type,e!==null&&t.stateNode!=null)pm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return Ee(t),null}if(e=jn(jt.current),ns(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[bt]=t,r[ki]=s,e=(t.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<Xr.length;i++)re(Xr[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":ju(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":Mu(r,s),re("invalid",r)}Ra(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ts(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ts(r.textContent,l,e),i=["children",""+l]):pi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":Gi(r),Eu(r,s,!0);break;case"textarea":Gi(r),Nu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vs)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[bt]=t,e[ki]=r,fm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Da(n,r),n){case"dialog":re("cancel",e),re("close",e),i=r;break;case"iframe":case"object":case"embed":re("load",e),i=r;break;case"video":case"audio":for(i=0;i<Xr.length;i++)re(Xr[i],e);i=r;break;case"source":re("error",e),i=r;break;case"img":case"image":case"link":re("error",e),re("load",e),i=r;break;case"details":re("toggle",e),i=r;break;case"input":ju(e,r),i=Ea(e,r),re("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=fe({},r,{value:void 0}),re("invalid",e);break;case"textarea":Mu(e,r),i=Ia(e,r),re("invalid",e);break;default:i=r}Ra(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Wp(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Up(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&hi(e,u):typeof u=="number"&&hi(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pi.hasOwnProperty(s)?u!=null&&s==="onScroll"&&re("scroll",e):u!=null&&Wl(e,s,u,o))}switch(n){case"input":Gi(e),Eu(e,r,!1);break;case"textarea":Gi(e),Nu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+dn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?dr(e,!!r.multiple,s,!1):r.defaultValue!=null&&dr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Vs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ee(t),null;case 6:if(e&&t.stateNode!=null)hm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=jn(Ci.current),jn(jt.current),ns(t)){if(r=t.stateNode,n=t.memoizedProps,r[bt]=t,(s=r.nodeValue!==n)&&(e=Je,e!==null))switch(e.tag){case 3:ts(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ts(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=t,t.stateNode=r}return Ee(t),null;case 13:if(ie(ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Qe!==null&&t.mode&1&&!(t.flags&128))Nh(),xr(),t.flags|=98560,s=!1;else if(s=ns(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(N(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[bt]=t}else xr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),s=!1}else vt!==null&&(gl(vt),vt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?_e===0&&(_e=3):bc())),t.updateQueue!==null&&(t.flags|=4),Ee(t),null);case 4:return _r(),ll(e,t),e===null&&_i(t.stateNode.containerInfo),Ee(t),null;case 10:return uc(t.type._context),Ee(t),null;case 17:return Ke(t.type)&&Fs(),Ee(t),null;case 19:if(ie(ce),s=t.memoizedState,s===null)return Ee(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ur(s,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ks(e),o!==null){for(t.flags|=128,Ur(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ne(ce,ce.current&1|2),t.child}e=e.sibling}s.tail!==null&&ye()>kr&&(t.flags|=128,r=!0,Ur(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ks(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ae)return Ee(t),null}else 2*ye()-s.renderingStartTime>kr&&n!==1073741824&&(t.flags|=128,r=!0,Ur(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ye(),t.sibling=null,n=ce.current,ne(ce,r?n&1|2:n&1),t):(Ee(t),null);case 22:case 23:return Ac(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?qe&1073741824&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function Iv(e,t){switch(oc(t),t.tag){case 1:return Ke(t.type)&&Fs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _r(),ie(We),ie(Le),mc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hc(t),null;case 13:if(ie(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(ce),null;case 4:return _r(),null;case 10:return uc(t.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var ss=!1,Ne=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,V=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){he(e,t,r)}else n.current=null}function cl(e,t,n){try{n()}catch(r){he(e,t,r)}}var _d=!1;function Rv(e,t){if(Ka=Rs,e=xh(),ic(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,a=e,c=null;t:for(;;){for(var f;a!==n||i!==0&&a.nodeType!==3||(l=o+i),a!==s||r!==0&&a.nodeType!==3||(u=o+r),a.nodeType===3&&(o+=a.nodeValue.length),(f=a.firstChild)!==null;)c=a,a=f;for(;;){if(a===e)break t;if(c===n&&++d===i&&(l=o),c===s&&++h===r&&(u=o),(f=a.nextSibling)!==null)break;a=c,c=a.parentNode}a=f}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ga={focusedElem:e,selectionRange:n},Rs=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:gt(t.type,v),_);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){he(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return g=_d,_d=!1,g}function oi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&cl(t,n,s)}i=i.next}while(i!==r)}}function yo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ul(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mm(e){var t=e.alternate;t!==null&&(e.alternate=null,mm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[ki],delete t[qa],delete t[yv],delete t[vv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gm(e){return e.tag===5||e.tag===3||e.tag===4}function Sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vs));else if(r!==4&&(e=e.child,e!==null))for(dl(e,t,n),e=e.sibling;e!==null;)dl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fl(e,t,n),e=e.sibling;e!==null;)fl(e,t,n),e=e.sibling}var Te=null,yt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)ym(e,t,n),n=n.sibling}function ym(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(lo,n)}catch{}switch(n.tag){case 5:Ne||nr(n,t);case 6:var r=Te,i=yt;Te=null,Wt(e,t,n),Te=r,yt=i,Te!==null&&(yt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(yt?(e=Te,n=n.stateNode,e.nodeType===8?Zo(e.parentNode,n):e.nodeType===1&&Zo(e,n),vi(e)):Zo(Te,n.stateNode));break;case 4:r=Te,i=yt,Te=n.stateNode.containerInfo,yt=!0,Wt(e,t,n),Te=r,yt=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cl(n,t,o),i=i.next}while(i!==r)}Wt(e,t,n);break;case 1:if(!Ne&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){he(n,t,l)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,Wt(e,t,n),Ne=r):Wt(e,t,n);break;default:Wt(e,t,n)}}function kd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lv),t.forEach(function(r){var i=Hv.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ht(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,yt=!1;break e;case 3:Te=l.stateNode.containerInfo,yt=!0;break e;case 4:Te=l.stateNode.containerInfo,yt=!0;break e}l=l.return}if(Te===null)throw Error(N(160));ym(s,o,i),Te=null,yt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){he(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}function vm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),Tt(e),r&4){try{oi(3,e,e.return),yo(3,e)}catch(v){he(e,e.return,v)}try{oi(5,e,e.return)}catch(v){he(e,e.return,v)}}break;case 1:ht(t,e),Tt(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(ht(t,e),Tt(e),r&512&&n!==null&&nr(n,n.return),e.flags&32){var i=e.stateNode;try{hi(i,"")}catch(v){he(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&$p(i,s),Da(l,o);var d=Da(l,s);for(o=0;o<u.length;o+=2){var h=u[o],a=u[o+1];h==="style"?Wp(i,a):h==="dangerouslySetInnerHTML"?Up(i,a):h==="children"?hi(i,a):Wl(i,h,a,d)}switch(l){case"input":Ma(i,s);break;case"textarea":zp(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?dr(i,!!s.multiple,f,!1):c!==!!s.multiple&&(s.defaultValue!=null?dr(i,!!s.multiple,s.defaultValue,!0):dr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ki]=s}catch(v){he(e,e.return,v)}}break;case 6:if(ht(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(N(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){he(e,e.return,v)}}break;case 3:if(ht(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vi(t.containerInfo)}catch(v){he(e,e.return,v)}break;case 4:ht(t,e),Tt(e);break;case 13:ht(t,e),Tt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Tc=ye())),r&4&&kd(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ne=(d=Ne)||h,ht(t,e),Ne=d):ht(t,e),Tt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(V=e,h=e.child;h!==null;){for(a=V=h;V!==null;){switch(c=V,f=c.child,c.tag){case 0:case 11:case 14:case 15:oi(4,c,c.return);break;case 1:nr(c,c.return);var g=c.stateNode;if(typeof g.componentWillUnmount=="function"){r=c,n=c.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){he(r,n,v)}}break;case 5:nr(c,c.return);break;case 22:if(c.memoizedState!==null){Cd(a);continue}}f!==null?(f.return=c,V=f):Cd(a)}h=h.sibling}e:for(h=null,a=e;;){if(a.tag===5){if(h===null){h=a;try{i=a.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=a.stateNode,u=a.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Hp("display",o))}catch(v){he(e,e.return,v)}}}else if(a.tag===6){if(h===null)try{a.stateNode.nodeValue=d?"":a.memoizedProps}catch(v){he(e,e.return,v)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;h===a&&(h=null),a=a.return}h===a&&(h=null),a.sibling.return=a.return,a=a.sibling}}break;case 19:ht(t,e),Tt(e),r&4&&kd(e);break;case 21:break;default:ht(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gm(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hi(i,""),r.flags&=-33);var s=Sd(e);fl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Sd(e);dl(e,l,o);break;default:throw Error(N(161))}}catch(u){he(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dv(e,t,n){V=e,xm(e)}function xm(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var i=V,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ss;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ne;l=ss;var d=Ne;if(ss=o,(Ne=u)&&!d)for(V=i;V!==null;)o=V,u=o.child,o.tag===22&&o.memoizedState!==null?Ad(i):u!==null?(u.return=o,V=u):Ad(i);for(;s!==null;)V=s,xm(s),s=s.sibling;V=i,ss=l,Ne=d}Td(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,V=s):Td(e)}}function Td(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||yo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ld(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ld(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var a=h.dehydrated;a!==null&&vi(a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ne||t.flags&512&&ul(t)}catch(c){he(t,t.return,c)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Cd(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Ad(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yo(4,t)}catch(u){he(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){he(t,i,u)}}var s=t.return;try{ul(t)}catch(u){he(t,s,u)}break;case 5:var o=t.return;try{ul(t)}catch(u){he(t,o,u)}}}catch(u){he(t,t.return,u)}if(t===e){V=null;break}var l=t.sibling;if(l!==null){l.return=t.return,V=l;break}V=t.return}}var Ov=Math.ceil,Xs=Ht.ReactCurrentDispatcher,Sc=Ht.ReactCurrentOwner,ut=Ht.ReactCurrentBatchConfig,Q=0,ke=null,ve=null,Ae=0,qe=0,rr=yn(0),_e=0,ji=null,On=0,vo=0,kc=0,ai=null,Ue=null,Tc=0,kr=1/0,Nt=null,qs=!1,pl=null,ln=null,os=!1,en=null,Qs=0,li=0,hl=null,ks=-1,Ts=0;function Ve(){return Q&6?ye():ks!==-1?ks:ks=ye()}function cn(e){return e.mode&1?Q&2&&Ae!==0?Ae&-Ae:wv.transition!==null?(Ts===0&&(Ts=rh()),Ts):(e=ee,e!==0||(e=window.event,e=e===void 0?16:uh(e.type)),e):1}function wt(e,t,n,r){if(50<li)throw li=0,hl=null,Error(N(185));Di(e,n,r),(!(Q&2)||e!==ke)&&(e===ke&&(!(Q&2)&&(vo|=n),_e===4&&Jt(e,Ae)),Ge(e,r),n===1&&Q===0&&!(t.mode&1)&&(kr=ye()+500,ho&&vn()))}function Ge(e,t){var n=e.callbackNode;w0(e,t);var r=Ls(e,e===ke?Ae:0);if(r===0)n!==null&&Ru(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ru(n),t===1)e.tag===0?xv(bd.bind(null,e)):jh(bd.bind(null,e)),mv(function(){!(Q&6)&&vn()}),n=null;else{switch(ih(r)){case 1:n=ql;break;case 4:n=th;break;case 16:n=Is;break;case 536870912:n=nh;break;default:n=Is}n=bm(n,wm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wm(e,t){if(ks=-1,Ts=0,Q&6)throw Error(N(327));var n=e.callbackNode;if(gr()&&e.callbackNode!==n)return null;var r=Ls(e,e===ke?Ae:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Js(e,r);else{t=r;var i=Q;Q|=2;var s=Sm();(ke!==e||Ae!==t)&&(Nt=null,kr=ye()+500,Mn(e,t));do try{$v();break}catch(l){_m(e,l)}while(!0);cc(),Xs.current=s,Q=i,ve!==null?t=0:(ke=null,Ae=0,t=_e)}if(t!==0){if(t===2&&(i=za(e),i!==0&&(r=i,t=ml(e,i))),t===1)throw n=ji,Mn(e,0),Jt(e,r),Ge(e,ye()),n;if(t===6)Jt(e,r);else{if(i=e.current.alternate,!(r&30)&&!Vv(i)&&(t=Js(e,r),t===2&&(s=za(e),s!==0&&(r=s,t=ml(e,s))),t===1))throw n=ji,Mn(e,0),Jt(e,r),Ge(e,ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:Tn(e,Ue,Nt);break;case 3:if(Jt(e,r),(r&130023424)===r&&(t=Tc+500-ye(),10<t)){if(Ls(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xa(Tn.bind(null,e,Ue,Nt),t);break}Tn(e,Ue,Nt);break;case 4:if(Jt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-xt(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ov(r/1960))-r,10<r){e.timeoutHandle=Xa(Tn.bind(null,e,Ue,Nt),r);break}Tn(e,Ue,Nt);break;case 5:Tn(e,Ue,Nt);break;default:throw Error(N(329))}}}return Ge(e,ye()),e.callbackNode===n?wm.bind(null,e):null}function ml(e,t){var n=ai;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=Js(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&gl(t)),e}function gl(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function Vv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_t(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jt(e,t){for(t&=~kc,t&=~vo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function bd(e){if(Q&6)throw Error(N(327));gr();var t=Ls(e,0);if(!(t&1))return Ge(e,ye()),null;var n=Js(e,t);if(e.tag!==0&&n===2){var r=za(e);r!==0&&(t=r,n=ml(e,r))}if(n===1)throw n=ji,Mn(e,0),Jt(e,t),Ge(e,ye()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,Ue,Nt),Ge(e,ye()),null}function Cc(e,t){var n=Q;Q|=1;try{return e(t)}finally{Q=n,Q===0&&(kr=ye()+500,ho&&vn())}}function Vn(e){en!==null&&en.tag===0&&!(Q&6)&&gr();var t=Q;Q|=1;var n=ut.transition,r=ee;try{if(ut.transition=null,ee=1,e)return e()}finally{ee=r,ut.transition=n,Q=t,!(Q&6)&&vn()}}function Ac(){qe=rr.current,ie(rr)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hv(n)),ve!==null)for(n=ve.return;n!==null;){var r=n;switch(oc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fs();break;case 3:_r(),ie(We),ie(Le),mc();break;case 5:hc(r);break;case 4:_r();break;case 13:ie(ce);break;case 19:ie(ce);break;case 10:uc(r.type._context);break;case 22:case 23:Ac()}n=n.return}if(ke=e,ve=e=un(e.current,null),Ae=qe=t,_e=0,ji=null,kc=vo=On=0,Ue=ai=null,Pn!==null){for(t=0;t<Pn.length;t++)if(n=Pn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Pn=null}return e}function _m(e,t){do{var n=ve;try{if(cc(),ws.current=Ys,Gs){for(var r=de.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gs=!1}if(Dn=0,Se=we=de=null,si=!1,Ai=0,Sc.current=null,n===null||n.return===null){_e=1,ji=t,ve=null;break}e:{var s=e,o=n.return,l=n,u=t;if(t=Ae,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,a=h.tag;if(!(h.mode&1)&&(a===0||a===11||a===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=hd(o);if(f!==null){f.flags&=-257,md(f,o,l,s,t),f.mode&1&&pd(s,d,t),t=f,u=d;var g=t.updateQueue;if(g===null){var v=new Set;v.add(u),t.updateQueue=v}else g.add(u);break e}else{if(!(t&1)){pd(s,d,t),bc();break e}u=Error(N(426))}}else if(ae&&l.mode&1){var _=hd(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),md(_,o,l,s,t),ac(Sr(u,l));break e}}s=u=Sr(u,l),_e!==4&&(_e=2),ai===null?ai=[s]:ai.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=im(s,u,t);ad(s,m);break e;case 1:l=u;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ln===null||!ln.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=sm(s,l,t);ad(s,w);break e}}s=s.return}while(s!==null)}Tm(n)}catch(k){t=k,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(!0)}function Sm(){var e=Xs.current;return Xs.current=Ys,e===null?Ys:e}function bc(){(_e===0||_e===3||_e===2)&&(_e=4),ke===null||!(On&268435455)&&!(vo&268435455)||Jt(ke,Ae)}function Js(e,t){var n=Q;Q|=2;var r=Sm();(ke!==e||Ae!==t)&&(Nt=null,Mn(e,t));do try{Fv();break}catch(i){_m(e,i)}while(!0);if(cc(),Q=n,Xs.current=r,ve!==null)throw Error(N(261));return ke=null,Ae=0,_e}function Fv(){for(;ve!==null;)km(ve)}function $v(){for(;ve!==null&&!d0();)km(ve)}function km(e){var t=Am(e.alternate,e,qe);e.memoizedProps=e.pendingProps,t===null?Tm(e):ve=t,Sc.current=null}function Tm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Iv(n,t),n!==null){n.flags&=32767,ve=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,ve=null;return}}else if(n=Nv(n,t,qe),n!==null){ve=n;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);_e===0&&(_e=5)}function Tn(e,t,n){var r=ee,i=ut.transition;try{ut.transition=null,ee=1,zv(e,t,n,r)}finally{ut.transition=i,ee=r}return null}function zv(e,t,n,r){do gr();while(en!==null);if(Q&6)throw Error(N(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(_0(e,s),e===ke&&(ve=ke=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||os||(os=!0,bm(Is,function(){return gr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ut.transition,ut.transition=null;var o=ee;ee=1;var l=Q;Q|=4,Sc.current=null,Rv(e,n),vm(n,e),av(Ga),Rs=!!Ka,Ga=Ka=null,e.current=n,Dv(n),f0(),Q=l,ee=o,ut.transition=s}else e.current=n;if(os&&(os=!1,en=e,Qs=i),s=e.pendingLanes,s===0&&(ln=null),m0(n.stateNode),Ge(e,ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qs)throw qs=!1,e=pl,pl=null,e;return Qs&1&&e.tag!==0&&gr(),s=e.pendingLanes,s&1?e===hl?li++:(li=0,hl=e):li=0,vn(),null}function gr(){if(en!==null){var e=ih(Qs),t=ut.transition,n=ee;try{if(ut.transition=null,ee=16>e?16:e,en===null)var r=!1;else{if(e=en,en=null,Qs=0,Q&6)throw Error(N(331));var i=Q;for(Q|=4,V=e.current;V!==null;){var s=V,o=s.child;if(V.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(V=d;V!==null;){var h=V;switch(h.tag){case 0:case 11:case 15:oi(8,h,s)}var a=h.child;if(a!==null)a.return=h,V=a;else for(;V!==null;){h=V;var c=h.sibling,f=h.return;if(mm(h),h===d){V=null;break}if(c!==null){c.return=f,V=c;break}V=f}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}V=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,V=o;else e:for(;V!==null;){if(s=V,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,V=m;break e}V=s.return}}var y=e.current;for(V=y;V!==null;){o=V;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,V=x;else e:for(o=y;V!==null;){if(l=V,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yo(9,l)}}catch(k){he(l,l.return,k)}if(l===o){V=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,V=w;break e}V=l.return}}if(Q=i,vn(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(lo,e)}catch{}r=!0}return r}finally{ee=n,ut.transition=t}}return!1}function Pd(e,t,n){t=Sr(n,t),t=im(e,t,1),e=an(e,t,1),t=Ve(),e!==null&&(Di(e,1,t),Ge(e,t))}function he(e,t,n){if(e.tag===3)Pd(e,e,n);else for(;t!==null;){if(t.tag===3){Pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ln===null||!ln.has(r))){e=Sr(n,e),e=sm(t,e,1),t=an(t,e,1),e=Ve(),t!==null&&(Di(t,1,e),Ge(t,e));break}}t=t.return}}function Bv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,ke===e&&(Ae&n)===n&&(_e===4||_e===3&&(Ae&130023424)===Ae&&500>ye()-Tc?Mn(e,0):kc|=n),Ge(e,t)}function Cm(e,t){t===0&&(e.mode&1?(t=qi,qi<<=1,!(qi&130023424)&&(qi=4194304)):t=1);var n=Ve();e=zt(e,t),e!==null&&(Di(e,t,n),Ge(e,n))}function Uv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cm(e,n)}function Hv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),Cm(e,n)}var Am;Am=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)He=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return He=!1,Mv(e,t,n);He=!!(e.flags&131072)}else He=!1,ae&&t.flags&1048576&&Eh(t,Bs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ss(e,t),e=t.pendingProps;var i=vr(t,Le.current);mr(t,n),i=yc(null,t,r,e,i,n);var s=vc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ke(r)?(s=!0,$s(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fc(t),i.updater=go,t.stateNode=i,i._reactInternals=t,nl(t,r,e,n),t=sl(null,t,r,!0,s,n)):(t.tag=0,ae&&s&&sc(t),Oe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ss(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Kv(r),e=gt(r,e),i){case 0:t=il(null,t,r,e,n);break e;case 1:t=vd(null,t,r,e,n);break e;case 11:t=gd(null,t,r,e,n);break e;case 14:t=yd(null,t,r,gt(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),il(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),vd(e,t,r,i,n);case 3:e:{if(cm(t),e===null)throw Error(N(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Dh(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Sr(Error(N(423)),t),t=xd(e,t,r,n,i);break e}else if(r!==i){i=Sr(Error(N(424)),t),t=xd(e,t,r,n,i);break e}else for(Qe=on(t.stateNode.containerInfo.firstChild),Je=t,ae=!0,vt=null,n=Lh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xr(),r===i){t=Bt(e,t,n);break e}Oe(e,t,r,n)}t=t.child}return t;case 5:return Oh(t),e===null&&Za(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ya(r,i)?o=null:s!==null&&Ya(r,s)&&(t.flags|=32),lm(e,t),Oe(e,t,o,n),t.child;case 6:return e===null&&Za(t),null;case 13:return um(e,t,n);case 4:return pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wr(t,null,r,n):Oe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),gd(e,t,r,i,n);case 7:return Oe(e,t,t.pendingProps,n),t.child;case 8:return Oe(e,t,t.pendingProps.children,n),t.child;case 12:return Oe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ne(Us,r._currentValue),r._currentValue=o,s!==null)if(_t(s.value,o)){if(s.children===i.children&&!We.current){t=Bt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Dt(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),el(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(N(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),el(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,mr(t,n),i=ft(i),r=r(i),t.flags|=1,Oe(e,t,r,n),t.child;case 14:return r=t.type,i=gt(r,t.pendingProps),i=gt(r.type,i),yd(e,t,r,i,n);case 15:return om(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),Ss(e,t),t.tag=1,Ke(r)?(e=!0,$s(t)):e=!1,mr(t,n),rm(t,r,i),nl(t,r,i,n),sl(null,t,r,!0,e,n);case 19:return dm(e,t,n);case 22:return am(e,t,n)}throw Error(N(156,t.tag))};function bm(e,t){return eh(e,t)}function Wv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,n,r){return new Wv(e,t,n,r)}function Pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kv(e){if(typeof e=="function")return Pc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gl)return 11;if(e===Yl)return 14}return 2}function un(e,t){var n=e.alternate;return n===null?(n=ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cs(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Pc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gn:return Nn(n.children,i,s,t);case Kl:o=8,i|=8;break;case Aa:return e=ct(12,n,t,i|2),e.elementType=Aa,e.lanes=s,e;case ba:return e=ct(13,n,t,i),e.elementType=ba,e.lanes=s,e;case Pa:return e=ct(19,n,t,i),e.elementType=Pa,e.lanes=s,e;case Op:return xo(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rp:o=10;break e;case Dp:o=9;break e;case Gl:o=11;break e;case Yl:o=14;break e;case Yt:o=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=ct(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Nn(e,t,n,r){return e=ct(7,e,r,t),e.lanes=n,e}function xo(e,t,n,r){return e=ct(22,e,r,t),e.elementType=Op,e.lanes=n,e.stateNode={isHidden:!1},e}function aa(e,t,n){return e=ct(6,e,null,t),e.lanes=n,e}function la(e,t,n){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gv(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,s,o,l,u){return e=new Gv(e,t,n,l,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ct(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(s),e}function Yv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pm(e){if(!e)return fn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(Ke(n))return Ph(e,n,t)}return t}function jm(e,t,n,r,i,s,o,l,u){return e=jc(n,r,!0,e,i,s,o,l,u),e.context=Pm(null),n=e.current,r=Ve(),i=cn(n),s=Dt(r,i),s.callback=t??null,an(n,s,i),e.current.lanes=i,Di(e,i,r),Ge(e,r),e}function wo(e,t,n,r){var i=t.current,s=Ve(),o=cn(i);return n=Pm(n),t.context===null?t.context=n:t.pendingContext=n,t=Dt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=an(i,t,o),e!==null&&(wt(e,i,o,s),xs(e,i,o)),o}function Zs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ec(e,t){jd(e,t),(e=e.alternate)&&jd(e,t)}function Xv(){return null}var Em=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mc(e){this._internalRoot=e}_o.prototype.render=Mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));wo(e,t,null,null)};_o.prototype.unmount=Mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){wo(null,e,null,null)}),t[$t]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=ah();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qt.length&&t!==0&&t<Qt[n].priority;n++);Qt.splice(n,0,e),n===0&&ch(e)}};function Nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function qv(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Zs(o);s.call(d)}}var o=jm(t,r,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=o,e[$t]=o.current,_i(e.nodeType===8?e.parentNode:e),Vn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Zs(u);l.call(d)}}var u=jc(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=u,e[$t]=u.current,_i(e.nodeType===8?e.parentNode:e),Vn(function(){wo(t,u,n,r)}),u}function ko(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Zs(o);l.call(u)}}wo(t,o,e,i)}else o=qv(n,t,e,i,r);return Zs(o)}sh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);n!==0&&(Ql(t,n|1),Ge(t,ye()),!(Q&6)&&(kr=ye()+500,vn()))}break;case 13:Vn(function(){var r=zt(e,1);if(r!==null){var i=Ve();wt(r,e,1,i)}}),Ec(e,1)}};Jl=function(e){if(e.tag===13){var t=zt(e,134217728);if(t!==null){var n=Ve();wt(t,e,134217728,n)}Ec(e,134217728)}};oh=function(e){if(e.tag===13){var t=cn(e),n=zt(e,t);if(n!==null){var r=Ve();wt(n,e,t,r)}Ec(e,t)}};ah=function(){return ee};lh=function(e,t){var n=ee;try{return ee=e,t()}finally{ee=n}};Va=function(e,t,n){switch(t){case"input":if(Ma(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=po(r);if(!i)throw Error(N(90));Fp(r),Ma(r,i)}}}break;case"textarea":zp(e,n);break;case"select":t=n.value,t!=null&&dr(e,!!n.multiple,t,!1)}};Yp=Cc;Xp=Vn;var Qv={usingClientEntryPoint:!1,Events:[Vi,Qn,po,Kp,Gp,Cc]},Hr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jv={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jp(e),e===null?null:e.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||Xv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var as=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!as.isDisabled&&as.supportsFiber)try{lo=as.inject(Jv),Pt=as}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qv;nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(t))throw Error(N(200));return Yv(e,t,null,n)};nt.createRoot=function(e,t){if(!Nc(e))throw Error(N(299));var n=!1,r="",i=Em;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,null,n,!1,r,i),e[$t]=t.current,_i(e.nodeType===8?e.parentNode:e),new Mc(t)};nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=Jp(t),e=e===null?null:e.stateNode,e};nt.flushSync=function(e){return Vn(e)};nt.hydrate=function(e,t,n){if(!So(t))throw Error(N(200));return ko(null,e,t,!0,n)};nt.hydrateRoot=function(e,t,n){if(!Nc(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Em;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=jm(t,null,e,1,n??null,i,!1,s,o),e[$t]=t.current,_i(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new _o(t)};nt.render=function(e,t,n){if(!So(t))throw Error(N(200));return ko(null,e,t,!1,n)};nt.unmountComponentAtNode=function(e){if(!So(e))throw Error(N(40));return e._reactRootContainer?(Vn(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[$t]=null})}),!0):!1};nt.unstable_batchedUpdates=Cc;nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!So(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return ko(e,t,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function Mm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mm)}catch(e){console.error(e)}}Mm(),Mp.exports=nt;var xn=Mp.exports;const Zv=Vl(xn);var Nm,Md=xn;Nm=Md.createRoot,Md.hydrateRoot;const ex="modulepreload",tx=function(e){return"/"+e},Nd={},Tr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=tx(u),u in Nd)return;Nd[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const a=document.createElement("link");if(a.rel=d?"stylesheet":ex,d||(a.as="script"),a.crossOrigin="",a.href=u,l&&a.setAttribute("nonce",l),document.head.appendChild(a),d)return new Promise((c,f)=>{a.addEventListener("load",c),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Fn;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Fn||(Fn={}));class As extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const nx=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},rx=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:nx(e),s=()=>i()!=="web",o=a=>{const c=d.get(a);return!!(c!=null&&c.platforms.has(i())||l(a))},l=a=>{var c;return(c=n.PluginHeaders)===null||c===void 0?void 0:c.find(f=>f.name===a)},u=a=>e.console.error(a),d=new Map,h=(a,c={})=>{const f=d.get(a);if(f)return console.warn(`Capacitor plugin "${a}" already registered. Cannot register plugins twice.`),f.proxy;const g=i(),v=l(a);let _;const m=async()=>(!_&&g in c?_=typeof c[g]=="function"?_=await c[g]():_=c[g]:t!==null&&!_&&"web"in c&&(_=typeof c.web=="function"?_=await c.web():_=c.web),_),y=(S,b)=>{var P,E;if(v){const O=v==null?void 0:v.methods.find(B=>b===B.name);if(O)return O.rtype==="promise"?B=>n.nativePromise(a,b.toString(),B):(B,R)=>n.nativeCallback(a,b.toString(),B,R);if(S)return(P=S[b])===null||P===void 0?void 0:P.bind(S)}else{if(S)return(E=S[b])===null||E===void 0?void 0:E.bind(S);throw new As(`"${a}" plugin is not implemented on ${g}`,Fn.Unimplemented)}},x=S=>{let b;const P=(...E)=>{const O=m().then(B=>{const R=y(B,S);if(R){const F=R(...E);return b=F==null?void 0:F.remove,F}else throw new As(`"${a}.${S}()" is not implemented on ${g}`,Fn.Unimplemented)});return S==="addListener"&&(O.remove=async()=>b()),O};return P.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:S,writable:!1,configurable:!1}),P},w=x("addListener"),k=x("removeListener"),C=(S,b)=>{const P=w({eventName:S},b),E=async()=>{const B=await P;k({eventName:S,callbackId:B},b)},O=new Promise(B=>P.then(()=>B({remove:E})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},O},A=new Proxy({},{get(S,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?C:w;case"removeListener":return k;default:return x(b)}}});return r[a]=A,d.set(a,{name:a,proxy:A,platforms:new Set([...Object.keys(c),...v?[g]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=a=>a),n.getPlatform=i,n.handleError=u,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=h,n.Exception=As,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},ix=e=>e.Capacitor=rx(e),q=ix(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),wn=q.registerPlugin;class Ic{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const s=this.windowListeners[t];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let s=this.retainedEventArguments[t];s||(s=[]),s.push(n),this.retainedEventArguments[t]=s}return}i.forEach(s=>s(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new q.Exception(t,Fn.Unimplemented)}unavailable(t="not available"){return new q.Exception(t,Fn.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const Id=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ld=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sx extends Ic{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Ld(i).trim(),s=Ld(s).trim(),n[i]=s}),n}async setCookie(t){try{const n=Id(t.key),r=Id(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,s=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}wn("CapacitorCookies",{web:()=>new sx});const ox=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),ax=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=e[t[o]],i),{})},lx=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[s,o]=i;let l,u;return Array.isArray(o)?(u="",o.forEach(d=>{l=t?encodeURIComponent(d):d,u+=`${s}=${l}&`}),u.slice(0,-1)):(l=t?encodeURIComponent(o):o,u=`${s}=${l}`),`${r}&${u}`},"").substr(1):null,Im=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=ax(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,l]of Object.entries(e.data||{}))s.set(o,l);n.body=s.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach((l,u)=>{s.append(u,l)});else for(const l of Object.keys(e.data))s.append(l,e.data[l]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class cx extends Ic{async request(t){const n=Im(t,t.webFetchExtra),r=lx(t.params,t.shouldEncodeUrlParams),i=r?`${t.url}?${r}`:t.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:l="text"}=s.ok?t:{};o.includes("application/json")&&(l="json");let u,d;switch(l){case"arraybuffer":case"blob":d=await s.blob(),u=await ox(d);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const h={};return s.headers.forEach((a,c)=>{h[c]=a}),{data:u,headers:h,status:s.status,url:s.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}wn("CapacitorHttp",{web:()=>new cx});const Rd=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:q,CapacitorException:As,get ExceptionCode(){return Fn},WebPlugin:Ic,buildRequestInit:Im,registerPlugin:wn},Symbol.toStringTag,{value:"Module"}));var yl;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(yl||(yl={}));var Dd;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(Dd||(Dd={}));const ux=wn("StatusBar"),dx=wn("SplashScreen",{web:()=>Tr(()=>import("./web-VtQT_U5_.js"),[]).then(e=>new e.SplashScreenWeb)}),Lc=T.createContext({});function Rc(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const To=T.createContext(null),Dc=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class fx extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function px({children:e,isPresent:t}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=T.useContext(Dc);return T.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d}=i.current;if(t||!r.current||!o||!l)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),p.jsx(fx,{isPresent:t,childRef:r,sizeRef:i,children:T.cloneElement(e,{ref:r})})}const hx=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=Rc(mx),u=T.useId(),d=T.useCallback(a=>{l.set(a,!0);for(const c of l.values())if(!c)return;r&&r()},[l,r]),h=T.useMemo(()=>({id:u,initial:t,isPresent:n,custom:i,onExitComplete:d,register:a=>(l.set(a,!1),()=>l.delete(a))}),s?[Math.random(),d]:[n,d]);return T.useMemo(()=>{l.forEach((a,c)=>l.set(c,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=p.jsx(px,{isPresent:n,children:e})),p.jsx(To.Provider,{value:h,children:e})};function mx(){return new Map}function Lm(e=!0){const t=T.useContext(To);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=T.useId();T.useEffect(()=>{e&&i(s)},[e]);const o=T.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const ls=e=>e.key||"";function Od(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const Oc=typeof window<"u",Rm=Oc?T.useLayoutEffect:T.useEffect,St=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[l,u]=Lm(o),d=T.useMemo(()=>Od(e),[e]),h=o&&!l?[]:d.map(ls),a=T.useRef(!0),c=T.useRef(d),f=Rc(()=>new Map),[g,v]=T.useState(d),[_,m]=T.useState(d);Rm(()=>{a.current=!1,c.current=d;for(let w=0;w<_.length;w++){const k=ls(_[w]);h.includes(k)?f.delete(k):f.get(k)!==!0&&f.set(k,!1)}},[_,h.length,h.join("-")]);const y=[];if(d!==g){let w=[...d];for(let k=0;k<_.length;k++){const C=_[k],A=ls(C);h.includes(A)||(w.splice(k,0,C),y.push(C))}s==="wait"&&y.length&&(w=y),m(Od(w)),v(d);return}const{forceRender:x}=T.useContext(Lc);return p.jsx(p.Fragment,{children:_.map(w=>{const k=ls(w),C=o&&!l?!1:d===_||h.includes(k),A=()=>{if(f.has(k))f.set(k,!0);else return;let S=!0;f.forEach(b=>{b||(S=!1)}),S&&(x==null||x(),m(c.current),o&&(u==null||u()),r&&r())};return p.jsx(hx,{isPresent:C,initial:!a.current||n?void 0:!1,custom:C?void 0:t,presenceAffectsLayout:i,mode:s,onExitComplete:C?void 0:A,children:w},k)})})},Ze=e=>e;let Dm=Ze;function Vc(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cr=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Ot=e=>e*1e3,Vt=e=>e/1e3,gx={useManualTiming:!1};function yx(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,h=!1,a=!1)=>{const f=a&&r?t:n;return h&&s.add(d),f.has(d)||f.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(o=d,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(l),t.clear(),r=!1,i&&(i=!1,u.process(d))}};return u}const cs=["read","resolveKeyframes","update","preRender","render","postRender"],vx=40;function Om(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=cs.reduce((m,y)=>(m[y]=yx(s),m),{}),{read:l,resolveKeyframes:u,update:d,preRender:h,render:a,postRender:c}=o,f=()=>{const m=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,vx),1),i.timestamp=m,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),a.process(i),c.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))},g=()=>{n=!0,r=!0,i.isProcessing||e(f)};return{schedule:cs.reduce((m,y)=>{const x=o[y];return m[y]=(w,k=!1,C=!1)=>(n||g(),x.schedule(w,k,C)),m},{}),cancel:m=>{for(let y=0;y<cs.length;y++)o[cs[y]].cancel(m)},state:i,steps:o}}const{schedule:se,cancel:pn,state:Ce,steps:ca}=Om(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),Vm=T.createContext({strict:!1}),Vd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ar={};for(const e in Vd)Ar[e]={isEnabled:t=>Vd[e].some(n=>!!t[n])};function xx(e){for(const t in e)Ar[t]={...Ar[t],...e[t]}}const wx=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wx.has(e)}let Fm=e=>!eo(e);function _x(e){e&&(Fm=t=>t.startsWith("on")?!eo(t):e(t))}try{_x(require("@emotion/is-prop-valid").default)}catch{}function Sx(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(Fm(i)||n===!0&&eo(i)||!t&&!eo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function kx(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const Co=T.createContext({});function Ei(e){return typeof e=="string"||Array.isArray(e)}function Ao(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Fc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$c=["initial",...Fc];function bo(e){return Ao(e.animate)||$c.some(t=>Ei(e[t]))}function $m(e){return!!(bo(e)||e.variants)}function Tx(e,t){if(bo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ei(n)?n:void 0,animate:Ei(r)?r:void 0}}return e.inherit!==!1?t:{}}function Cx(e){const{initial:t,animate:n}=Tx(e,T.useContext(Co));return T.useMemo(()=>({initial:t,animate:n}),[Fd(t),Fd(n)])}function Fd(e){return Array.isArray(e)?e.join(" "):e}const Ax=Symbol.for("motionComponentSymbol");function ir(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function bx(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ir(n)&&(n.current=r))},[t])}const zc=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Px="framerAppearId",zm="data-"+zc(Px),{schedule:Bc}=Om(queueMicrotask,!1),Bm=T.createContext({});function jx(e,t,n,r,i){var s,o;const{visualElement:l}=T.useContext(Co),u=T.useContext(Vm),d=T.useContext(To),h=T.useContext(Dc).reducedMotion,a=T.useRef(null);r=r||u.renderer,!a.current&&r&&(a.current=r(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const c=a.current,f=T.useContext(Bm);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Ex(a.current,n,i,f);const g=T.useRef(!1);T.useInsertionEffect(()=>{c&&g.current&&c.update(n,d)});const v=n[zm],_=T.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return Rm(()=>{c&&(g.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),Bc.render(c.render),_.current&&c.animationState&&c.animationState.animateChanges())}),T.useEffect(()=>{c&&(!_.current&&c.animationState&&c.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,v)}),_.current=!1))}),c}function Ex(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Um(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&ir(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:d})}function Um(e){if(e)return e.options.allowProjection!==!1?e.projection:Um(e.parent)}function Mx({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,o;e&&xx(e);function l(d,h){let a;const c={...T.useContext(Dc),...d,layoutId:Nx(d)},{isStatic:f}=c,g=Cx(d),v=r(d,f);if(!f&&Oc){Ix();const _=Lx(c);a=_.MeasureLayout,g.visualElement=jx(i,v,c,t,_.ProjectionNode)}return p.jsxs(Co.Provider,{value:g,children:[a&&g.visualElement?p.jsx(a,{visualElement:g.visualElement,...c}):null,n(i,d,bx(v,g.visualElement,h),v,f,g.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=T.forwardRef(l);return u[Ax]=i,u}function Nx({layoutId:e}){const t=T.useContext(Lc).id;return t&&e!==void 0?t+"-"+e:e}function Ix(e,t){T.useContext(Vm).strict}function Lx(e){const{drag:t,layout:n}=Ar;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Rx=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uc(e){return typeof e!="string"||e.includes("-")?!1:!!(Rx.indexOf(e)>-1||/[A-Z]/u.test(e))}function $d(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Hc(e,t,n,r){if(typeof t=="function"){const[i,s]=$d(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=$d(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const vl=e=>Array.isArray(e),Dx=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Ox=e=>vl(e)?e[e.length-1]||0:e,Ie=e=>!!(e&&e.getVelocity);function bs(e){const t=Ie(e)?e.get():e;return Dx(t)?t.toValue():t}function Vx({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const o={latestValues:Fx(r,i,s,e),renderState:t()};return n&&(o.onMount=l=>n({props:r,current:l,...o}),o.onUpdate=l=>n(l)),o}const Hm=e=>(t,n)=>{const r=T.useContext(Co),i=T.useContext(To),s=()=>Vx(e,t,r,i);return n?s():Rc(s)};function Fx(e,t,n,r){const i={},s=r(e,{});for(const c in s)i[c]=bs(s[c]);let{initial:o,animate:l}=e;const u=bo(e),d=$m(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const a=h?l:o;if(a&&typeof a!="boolean"&&!Ao(a)){const c=Array.isArray(a)?a:[a];for(let f=0;f<c.length;f++){const g=Hc(e,c[f]);if(g){const{transitionEnd:v,transition:_,...m}=g;for(const y in m){let x=m[y];if(Array.isArray(x)){const w=h?x.length-1:0;x=x[w]}x!==null&&(i[y]=x)}for(const y in v)i[y]=v[y]}}}return i}const Nr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bn=new Set(Nr),Wm=e=>t=>typeof t=="string"&&t.startsWith(e),Km=Wm("--"),$x=Wm("var(--"),Wc=e=>$x(e)?zx.test(e.split("/*")[0].trim()):!1,zx=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gm=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ut=(e,t,n)=>n>t?t:n<e?e:n,Ir={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Mi={...Ir,transform:e=>Ut(0,1,e)},us={...Ir,default:1},$i=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gt=$i("deg"),Et=$i("%"),U=$i("px"),Bx=$i("vh"),Ux=$i("vw"),zd={...Et,parse:e=>Et.parse(e)/100,transform:e=>Et.transform(e*100)},Hx={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,backgroundPositionX:U,backgroundPositionY:U},Wx={rotate:Gt,rotateX:Gt,rotateY:Gt,rotateZ:Gt,scale:us,scaleX:us,scaleY:us,scaleZ:us,skew:Gt,skewX:Gt,skewY:Gt,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:Mi,originX:zd,originY:zd,originZ:U},Bd={...Ir,transform:Math.round},Kc={...Hx,...Wx,zIndex:Bd,size:U,fillOpacity:Mi,strokeOpacity:Mi,numOctaves:Bd},Kx={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gx=Nr.length;function Yx(e,t,n){let r="",i=!0;for(let s=0;s<Gx;s++){const o=Nr[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=Gm(l,Kc[o]);if(!u){i=!1;const h=Kx[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Gc(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Bn.has(u)){o=!0;continue}else if(Km(u)){i[u]=d;continue}else{const h=Gm(d,Kc[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=Yx(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const Xx={offset:"stroke-dashoffset",array:"stroke-dasharray"},qx={offset:"strokeDashoffset",array:"strokeDasharray"};function Qx(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Xx:qx;e[s.offset]=U.transform(-r);const o=U.transform(t),l=U.transform(n);e[s.array]=`${o} ${l}`}function Ud(e,t,n){return typeof e=="string"?e:U.transform(t+n*e)}function Jx(e,t,n){const r=Ud(t,e.x,e.width),i=Ud(n,e.y,e.height);return`${r} ${i}`}function Yc(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},h,a){if(Gc(e,d,a),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:c,style:f,dimensions:g}=e;c.transform&&(g&&(f.transform=c.transform),delete c.transform),g&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=Jx(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(c.x=t),n!==void 0&&(c.y=n),r!==void 0&&(c.scale=r),o!==void 0&&Qx(c,o,l,u,!1)}const Xc=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ym=()=>({...Xc(),attrs:{}}),qc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Xm(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const qm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Qm(e,t,n,r){Xm(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(qm.has(i)?i:zc(i),t.attrs[i])}const to={};function Zx(e){Object.assign(to,e)}function Jm(e,{layout:t,layoutId:n}){return Bn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!to[e]||e==="opacity")}function Qc(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(Ie(i[o])||t.style&&Ie(t.style[o])||Jm(o,e)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Zm(e,t,n){const r=Qc(e,t,n);for(const i in e)if(Ie(e[i])||Ie(t[i])){const s=Nr.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function e1(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Hd=["x","y","width","height","cx","cy","r"],t1={useVisualState:Hm({scrapeMotionValuesFromProps:Zm,createRenderState:Ym,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const l in i)if(Bn.has(l)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let l=0;l<Hd.length;l++){const u=Hd[l];e[u]!==t[u]&&(o=!0)}o&&se.read(()=>{e1(n,r),se.render(()=>{Yc(r,i,qc(n.tagName),e.transformTemplate),Qm(n,r)})})}})},n1={useVisualState:Hm({scrapeMotionValuesFromProps:Qc,createRenderState:Xc})};function eg(e,t,n){for(const r in t)!Ie(t[r])&&!Jm(r,n)&&(e[r]=t[r])}function r1({transformTemplate:e},t){return T.useMemo(()=>{const n=Xc();return Gc(n,t,e),Object.assign({},n.vars,n.style)},[t])}function i1(e,t){const n=e.style||{},r={};return eg(r,n,e),Object.assign(r,r1(e,t)),r}function s1(e,t){const n={},r=i1(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function o1(e,t,n,r){const i=T.useMemo(()=>{const s=Ym();return Yc(s,t,qc(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};eg(s,e.style,e),i.style={...s,...i.style}}return i}function a1(e=!1){return(n,r,i,{latestValues:s},o)=>{const u=(Uc(n)?o1:s1)(r,s,o,n),d=Sx(r,typeof n=="string",e),h=n!==T.Fragment?{...d,...u,ref:i}:{},{children:a}=r,c=T.useMemo(()=>Ie(a)?a.get():a,[a]);return T.createElement(n,{...h,children:c})}}function l1(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Uc(r)?t1:n1,preloadedFeatures:e,useRender:a1(i),createVisualElement:t,Component:r};return Mx(o)}}function tg(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Po(e,t,n){const r=e.getProps();return Hc(r,t,n!==void 0?n:r.custom,e)}const c1=Vc(()=>window.ScrollTimeline!==void 0);class u1{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(c1()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class d1 extends u1{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Jc(e,t){return e?e[t]||e.default||e:void 0}const xl=2e4;function ng(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<xl;)t+=n,r=e.next(t);return t>=xl?1/0:t}function Zc(e){return typeof e=="function"}function Wd(e,t){e.timeline=t,e.onfinish=null}const eu=e=>Array.isArray(e)&&typeof e[0]=="number",f1={linearEasing:void 0};function p1(e,t){const n=Vc(e);return()=>{var r;return(r=f1[t])!==null&&r!==void 0?r:n()}}const no=p1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rg=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(Cr(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function ig(e){return!!(typeof e=="function"&&no()||!e||typeof e=="string"&&(e in wl||no())||eu(e)||Array.isArray(e)&&e.every(ig))}const qr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,wl={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qr([0,.65,.55,1]),circOut:qr([.55,0,1,.45]),backIn:qr([.31,.01,.66,-.59]),backOut:qr([.33,1.53,.69,.99])};function sg(e,t){if(e)return typeof e=="function"&&no()?rg(e,t):eu(e)?qr(e):Array.isArray(e)?e.map(n=>sg(n,t)||wl.easeOut):wl[e]}const mt={x:!1,y:!1};function og(){return mt.x||mt.y}function h1(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function ag(e,t){const n=h1(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function Kd(e){return t=>{t.pointerType==="touch"||og()||e(t)}}function m1(e,t,n={}){const[r,i,s]=ag(e,n),o=Kd(l=>{const{target:u}=l,d=t(l);if(typeof d!="function"||!u)return;const h=Kd(a=>{d(a),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const lg=(e,t)=>t?e===t?!0:lg(e,t.parentElement):!1,tu=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,g1=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function y1(e){return g1.has(e.tagName)||e.tabIndex!==-1}const Qr=new WeakSet;function Gd(e){return t=>{t.key==="Enter"&&e(t)}}function ua(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const v1=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Gd(()=>{if(Qr.has(n))return;ua(n,"down");const i=Gd(()=>{ua(n,"up")}),s=()=>ua(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Yd(e){return tu(e)&&!og()}function x1(e,t,n={}){const[r,i,s]=ag(e,n),o=l=>{const u=l.currentTarget;if(!Yd(l)||Qr.has(u))return;Qr.add(u);const d=t(l),h=(f,g)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",c),!(!Yd(f)||!Qr.has(u))&&(Qr.delete(u),typeof d=="function"&&d(f,{success:g}))},a=f=>{h(f,n.useGlobalTarget||lg(u,f.target))},c=f=>{h(f,!1)};window.addEventListener("pointerup",a,i),window.addEventListener("pointercancel",c,i)};return r.forEach(l=>{!y1(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>v1(d,i),i)}),s}function w1(e){return e==="x"||e==="y"?mt[e]?null:(mt[e]=!0,()=>{mt[e]=!1}):mt.x||mt.y?null:(mt.x=mt.y=!0,()=>{mt.x=mt.y=!1})}const cg=new Set(["width","height","top","left","right","bottom",...Nr]);let Ps;function _1(){Ps=void 0}const Mt={now:()=>(Ps===void 0&&Mt.set(Ce.isProcessing||gx.useManualTiming?Ce.timestamp:performance.now()),Ps),set:e=>{Ps=e,queueMicrotask(_1)}};function nu(e,t){e.indexOf(t)===-1&&e.push(t)}function ru(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class iu{constructor(){this.subscriptions=[]}add(t){return nu(this.subscriptions,t),()=>ru(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ug(e,t){return t?e*(1e3/t):0}const Xd=30,S1=e=>!isNaN(parseFloat(e));class k1{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Mt.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Mt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=S1(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new iu);const r=this.events[t].add(n);return t==="change"?()=>{r(),se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Mt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Xd)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xd);return ug(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ni(e,t){return new k1(e,t)}function T1(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ni(n))}function C1(e,t){const n=Po(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=Ox(s[o]);T1(e,o,l)}}function A1(e){return!!(Ie(e)&&e.add)}function _l(e,t){const n=e.getValue("willChange");if(A1(n))return n.add(t)}function dg(e){return e.props[zm]}const fg=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,b1=1e-7,P1=12;function j1(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=fg(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>b1&&++l<P1);return o}function zi(e,t,n,r){if(e===t&&n===r)return Ze;const i=s=>j1(s,0,1,e,n);return s=>s===0||s===1?s:fg(i(s),t,r)}const pg=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,hg=e=>t=>1-e(1-t),mg=zi(.33,1.53,.69,.99),su=hg(mg),gg=pg(su),yg=e=>(e*=2)<1?.5*su(e):.5*(2-Math.pow(2,-10*(e-1))),ou=e=>1-Math.sin(Math.acos(e)),vg=hg(ou),xg=pg(ou),wg=e=>/^0[^.\s]+$/u.test(e);function E1(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||wg(e):!0}const ci=e=>Math.round(e*1e5)/1e5,au=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function M1(e){return e==null}const N1=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lu=(e,t)=>n=>!!(typeof n=="string"&&N1.test(n)&&n.startsWith(e)||t&&!M1(n)&&Object.prototype.hasOwnProperty.call(n,t)),_g=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(au);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},I1=e=>Ut(0,255,e),da={...Ir,transform:e=>Math.round(I1(e))},En={test:lu("rgb","red"),parse:_g("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+da.transform(e)+", "+da.transform(t)+", "+da.transform(n)+", "+ci(Mi.transform(r))+")"};function L1(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Sl={test:lu("#"),parse:L1,transform:En.transform},sr={test:lu("hsl","hue"),parse:_g("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Et.transform(ci(t))+", "+Et.transform(ci(n))+", "+ci(Mi.transform(r))+")"},Me={test:e=>En.test(e)||Sl.test(e)||sr.test(e),parse:e=>En.test(e)?En.parse(e):sr.test(e)?sr.parse(e):Sl.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?En.transform(e):sr.transform(e)},R1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function D1(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(au))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(R1))===null||n===void 0?void 0:n.length)||0)>0}const Sg="number",kg="color",O1="var",V1="var(",qd="${}",F1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ii(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(F1,u=>(Me.test(u)?(r.color.push(s),i.push(kg),n.push(Me.parse(u))):u.startsWith(V1)?(r.var.push(s),i.push(O1),n.push(u)):(r.number.push(s),i.push(Sg),n.push(parseFloat(u))),++s,qd)).split(qd);return{values:n,split:l,indexes:r,types:i}}function Tg(e){return Ii(e).values}function Cg(e){const{split:t,types:n}=Ii(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===Sg?s+=ci(i[o]):l===kg?s+=Me.transform(i[o]):s+=i[o]}return s}}const $1=e=>typeof e=="number"?0:e;function z1(e){const t=Tg(e);return Cg(e)(t.map($1))}const hn={test:D1,parse:Tg,createTransformer:Cg,getAnimatableNone:z1},B1=new Set(["brightness","contrast","saturate","opacity"]);function U1(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(au)||[];if(!r)return e;const i=n.replace(r,"");let s=B1.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const H1=/\b([a-z-]*)\(.*?\)/gu,kl={...hn,getAnimatableNone:e=>{const t=e.match(H1);return t?t.map(U1).join(" "):e}},W1={...Kc,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:kl,WebkitFilter:kl},cu=e=>W1[e];function Ag(e,t){let n=cu(e);return n!==kl&&(n=hn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const K1=new Set(["auto","none","0"]);function G1(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!K1.has(s)&&Ii(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Ag(n,i)}const Qd=e=>e===Ir||e===U,Jd=(e,t)=>parseFloat(e.split(", ")[t]),Zd=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Jd(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?Jd(s[1],e):0}},Y1=new Set(["x","y","z"]),X1=Nr.filter(e=>!Y1.has(e));function q1(e){const t=[];return X1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const br={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Zd(4,13),y:Zd(5,14)};br.translateX=br.x;br.translateY=br.y;const In=new Set;let Tl=!1,Cl=!1;function bg(){if(Cl){const e=Array.from(In).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=q1(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))===null||l===void 0||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cl=!1,Tl=!1,In.forEach(e=>e.complete()),In.clear()}function Pg(){In.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Cl=!0)})}function Q1(){Pg(),bg()}class uu{constructor(t,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(In.add(this),Tl||(Tl=!0,se.read(Pg),se.resolveKeyframes(bg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=i==null?void 0:i.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),i&&o===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),In.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,In.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jg=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),J1=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Z1(e){const t=J1.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Eg(e,t,n=1){const[r,i]=Z1(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return jg(o)?parseFloat(o):o}return Wc(i)?Eg(i,t,n+1):i}const Mg=e=>t=>t.test(e),ew={test:e=>e==="auto",parse:e=>e},Ng=[Ir,U,Et,Gt,Ux,Bx,ew],ef=e=>Ng.find(Mg(e));class Ig extends uu{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),Wc(d))){const h=Eg(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!cg.has(r)||t.length!==2)return;const[i,s]=t,o=ef(i),l=ef(s);if(o!==l)if(Qd(o)&&Qd(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)E1(t[i])&&r.push(i);r.length&&G1(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=br[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=br[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([u,d])=>{n.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const tf=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(hn.test(e)||e==="0")&&!e.startsWith("url("));function tw(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function nw(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=tf(i,t),l=tf(s,t);return!o||!l?!1:tw(e)||(n==="spring"||Zc(n))&&r}const rw=e=>e!==null;function jo(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(rw),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const iw=40;class Lg{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mt.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iw?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Q1(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Mt.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!nw(t,r,i,s))if(o)this.options.duration=0;else{u&&u(jo(t,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,n);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ue=(e,t,n)=>e+(t-e)*n;function fa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sw({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=fa(u,l,e+1/3),s=fa(u,l,e),o=fa(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function ro(e,t){return n=>n>0?t:e}const pa=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},ow=[Sl,En,sr],aw=e=>ow.find(t=>t.test(e));function nf(e){const t=aw(e);if(!t)return!1;let n=t.parse(e);return t===sr&&(n=sw(n)),n}const rf=(e,t)=>{const n=nf(e),r=nf(t);if(!n||!r)return ro(e,t);const i={...n};return s=>(i.red=pa(n.red,r.red,s),i.green=pa(n.green,r.green,s),i.blue=pa(n.blue,r.blue,s),i.alpha=ue(n.alpha,r.alpha,s),En.transform(i))},lw=(e,t)=>n=>t(e(n)),Bi=(...e)=>e.reduce(lw),Al=new Set(["none","hidden"]);function cw(e,t){return Al.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function uw(e,t){return n=>ue(e,t,n)}function du(e){return typeof e=="number"?uw:typeof e=="string"?Wc(e)?ro:Me.test(e)?rf:pw:Array.isArray(e)?Rg:typeof e=="object"?Me.test(e)?rf:dw:ro}function Rg(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>du(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function dw(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=du(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function fw(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],l=e.indexes[o][i[o]],u=(n=e.values[l])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const pw=(e,t)=>{const n=hn.createTransformer(t),r=Ii(e),i=Ii(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Al.has(e)&&!i.values.length||Al.has(t)&&!r.values.length?cw(e,t):Bi(Rg(fw(r,i),i.values),n):ro(e,t)};function Dg(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ue(e,t,n):du(e)(e,t)}const hw=5;function Og(e,t,n){const r=Math.max(t-hw,0);return ug(n-e(r),t-r)}const pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ha=.001;function mw({duration:e=pe.duration,bounce:t=pe.bounce,velocity:n=pe.velocity,mass:r=pe.mass}){let i,s,o=1-t;o=Ut(pe.minDamping,pe.maxDamping,o),e=Ut(pe.minDuration,pe.maxDuration,Vt(e)),o<1?(i=d=>{const h=d*o,a=h*e,c=h-n,f=bl(d,o),g=Math.exp(-a);return ha-c/f*g},s=d=>{const a=d*o*e,c=a*n+n,f=Math.pow(o,2)*Math.pow(d,2)*e,g=Math.exp(-a),v=bl(Math.pow(d,2),o);return(-i(d)+ha>0?-1:1)*((c-f)*g)/v}):(i=d=>{const h=Math.exp(-d*e),a=(d-n)*e+1;return-ha+h*a},s=d=>{const h=Math.exp(-d*e),a=(n-d)*(e*e);return h*a});const l=5/e,u=yw(i,s,l);if(e=Ot(e),isNaN(u))return{stiffness:pe.stiffness,damping:pe.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const gw=12;function yw(e,t,n){let r=n;for(let i=1;i<gw;i++)r=r-e(r)/t(r);return r}function bl(e,t){return e*Math.sqrt(1-t*t)}const vw=["duration","bounce"],xw=["stiffness","damping","mass"];function sf(e,t){return t.some(n=>e[n]!==void 0)}function ww(e){let t={velocity:pe.velocity,stiffness:pe.stiffness,damping:pe.damping,mass:pe.mass,isResolvedFromDuration:!1,...e};if(!sf(e,xw)&&sf(e,vw))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ut(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:pe.mass,stiffness:i,damping:s}}else{const n=mw(e);t={...t,...n,mass:pe.mass},t.isResolvedFromDuration=!0}return t}function Vg(e=pe.visualDuration,t=pe.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:a,velocity:c,isResolvedFromDuration:f}=ww({...n,velocity:-Vt(n.velocity||0)}),g=c||0,v=d/(2*Math.sqrt(u*h)),_=o-s,m=Vt(Math.sqrt(u/h)),y=Math.abs(_)<5;r||(r=y?pe.restSpeed.granular:pe.restSpeed.default),i||(i=y?pe.restDelta.granular:pe.restDelta.default);let x;if(v<1){const k=bl(m,v);x=C=>{const A=Math.exp(-v*m*C);return o-A*((g+v*m*_)/k*Math.sin(k*C)+_*Math.cos(k*C))}}else if(v===1)x=k=>o-Math.exp(-m*k)*(_+(g+m*_)*k);else{const k=m*Math.sqrt(v*v-1);x=C=>{const A=Math.exp(-v*m*C),S=Math.min(k*C,300);return o-A*((g+v*m*_)*Math.sinh(S)+k*_*Math.cosh(S))/k}}const w={calculatedDuration:f&&a||null,next:k=>{const C=x(k);if(f)l.done=k>=a;else{let A=0;v<1&&(A=k===0?Ot(g):Og(x,k,C));const S=Math.abs(A)<=r,b=Math.abs(o-C)<=i;l.done=S&&b}return l.value=l.done?o:C,l},toString:()=>{const k=Math.min(ng(w),xl),C=rg(A=>w.next(k*A).value,k,30);return k+"ms "+C}};return w}function of({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const a=e[0],c={done:!1,value:a},f=S=>l!==void 0&&S<l||u!==void 0&&S>u,g=S=>l===void 0?u:u===void 0||Math.abs(l-S)<Math.abs(u-S)?l:u;let v=n*t;const _=a+v,m=o===void 0?_:o(_);m!==_&&(v=m-a);const y=S=>-v*Math.exp(-S/r),x=S=>m+y(S),w=S=>{const b=y(S),P=x(S);c.done=Math.abs(b)<=d,c.value=c.done?m:P};let k,C;const A=S=>{f(c.value)&&(k=S,C=Vg({keyframes:[c.value,g(c.value)],velocity:Og(x,S,c.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:S=>{let b=!1;return!C&&k===void 0&&(b=!0,w(S),A(S)),k!==void 0&&S>=k?C.next(S-k):(!b&&w(S),c)}}}const _w=zi(.42,0,1,1),Sw=zi(0,0,.58,1),Fg=zi(.42,0,.58,1),kw=e=>Array.isArray(e)&&typeof e[0]!="number",Tw={linear:Ze,easeIn:_w,easeInOut:Fg,easeOut:Sw,circIn:ou,circInOut:xg,circOut:vg,backIn:su,backInOut:gg,backOut:mg,anticipate:yg},af=e=>{if(eu(e)){Dm(e.length===4);const[t,n,r,i]=e;return zi(t,n,r,i)}else if(typeof e=="string")return Tw[e];return e};function Cw(e,t,n){const r=[],i=n||Dg,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Ze:t;l=Bi(u,l)}r.push(l)}return r}function Aw(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Dm(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Cw(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let a=0;if(u>1)for(;a<e.length-2&&!(h<e[a+1]);a++);const c=Cr(e[a],e[a+1],h);return l[a](c)};return n?h=>d(Ut(e[0],e[s-1],h)):d}function bw(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Cr(0,t,r);e.push(ue(n,1,i))}}function Pw(e){const t=[0];return bw(t,e.length-1),t}function jw(e,t){return e.map(n=>n*t)}function Ew(e,t){return e.map(()=>t||Fg).splice(0,e.length-1)}function io({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=kw(r)?r.map(af):af(r),s={done:!1,value:t[0]},o=jw(n&&n.length===t.length?n:Pw(t),e),l=Aw(o,t,{ease:Array.isArray(i)?i:Ew(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const Mw=e=>{const t=({timestamp:n})=>e(n);return{start:()=>se.update(t,!0),stop:()=>pn(t),now:()=>Ce.isProcessing?Ce.timestamp:Mt.now()}},Nw={decay:of,inertia:of,tween:io,keyframes:io,spring:Vg},Iw=e=>e/100;class fu extends Lg{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||uu,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(s,l,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,l=Zc(n)?n:Nw[n]||io;let u,d;l!==io&&typeof t[0]!="number"&&(u=Bi(Iw,Dg(t[0],t[1])),t=[0,100]);const h=l({...this.options,keyframes:t});s==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=ng(h));const{calculatedDuration:a}=h,c=a+i,f=c*(r+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:a,resolvedDuration:c,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:h,resolvedDuration:a}=r;if(this.startTime===null)return s.next(0);const{delay:c,repeat:f,repeatType:g,repeatDelay:v,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const m=this.currentTime-c*(this.speed>=0?1:-1),y=this.speed>=0?m<0:m>h;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let x=this.currentTime,w=s;if(f){const S=Math.min(this.currentTime,h)/a;let b=Math.floor(S),P=S%1;!P&&S>=1&&(P=1),P===1&&b--,b=Math.min(b,f+1),!!(b%2)&&(g==="reverse"?(P=1-P,v&&(P-=v/a)):g==="mirror"&&(w=o)),x=Ut(0,1,P)*a}const k=y?{done:!1,value:u[0]}:w.next(x);l&&(k.value=l(k.value));let{done:C}=k;!y&&d!==null&&(C=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return A&&i!==void 0&&(k.value=jo(u,this.options,i)),_&&_(k.value),A&&this.finish(),k}get duration(){const{resolved:t}=this;return t?Vt(t.calculatedDuration):0}get time(){return Vt(this.currentTime)}set time(t){t=Ot(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Vt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Mw,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Lw=new Set(["opacity","clipPath","filter","transform"]);function Rw(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const d={[t]:n};u&&(d.offset=u);const h=sg(l,i);return Array.isArray(h)&&(d.easing=h),e.animate(d,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Dw=Vc(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),so=10,Ow=2e4;function Vw(e){return Zc(e.type)||e.type==="spring"||!ig(e.ease)}function Fw(e,t){const n=new fu({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<Ow;)r=n.sample(s),i.push(r.value),s+=so;return{times:void 0,keyframes:i,duration:s-so,ease:"linear"}}const $g={anticipate:yg,backInOut:gg,circInOut:xg};function $w(e){return e in $g}class lf extends Lg{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Ig(s,(o,l)=>this.onKeyframesResolved(o,l),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:l,name:u,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&no()&&$w(s)&&(s=$g[s]),Vw(this.options)){const{onComplete:a,onUpdate:c,motionValue:f,element:g,...v}=this.options,_=Fw(t,v);t=_.keyframes,t.length===1&&(t[1]=t[0]),r=_.duration,i=_.times,s=_.ease,o="keyframes"}const h=Rw(l.owner.current,u,t,{...this.options,duration:r,times:i,ease:s});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(Wd(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:a}=this.options;l.set(jo(t,this.options,n)),a&&a(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Vt(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Vt(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ot(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ze;const{animation:r}=n;Wd(r,t)}return Ze}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:a,element:c,...f}=this.options,g=new fu({...f,keyframes:r,duration:i,type:s,ease:o,times:l,isGenerator:!0}),v=Ot(this.time);d.setWithVelocity(g.sample(v-so).value,g.sample(v).value,so)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:l}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=n.owner.getProps();return Dw()&&r&&Lw.has(r)&&!u&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}}const zw={type:"spring",stiffness:500,damping:25,restSpeed:10},Bw=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Uw={type:"keyframes",duration:.8},Hw={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ww=(e,{keyframes:t})=>t.length>2?Uw:Bn.has(e)?e.startsWith("scale")?Bw(t[1]):zw:Hw;function Kw({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const pu=(e,t,n,r={},i,s)=>o=>{const l=Jc(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ot(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:c=>{t.set(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};Kw(l)||(h={...h,...Ww(e,h)}),h.duration&&(h.duration=Ot(h.duration)),h.repeatDelay&&(h.repeatDelay=Ot(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let a=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(a=!0)),a&&!s&&t.get()!==void 0){const c=jo(h.keyframes,l);if(c!==void 0)return se.update(()=>{h.onUpdate(c),h.onComplete()}),new d1([])}return!s&&lf.supports(h)?new lf(h):new fu(h)};function Gw({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function zg(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...u}=t;r&&(o=r);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const a in u){const c=e.getValue(a,(s=e.latestValues[a])!==null&&s!==void 0?s:null),f=u[a];if(f===void 0||h&&Gw(h,a))continue;const g={delay:n,...Jc(o||{},a)};let v=!1;if(window.MotionHandoffAnimation){const m=dg(e);if(m){const y=window.MotionHandoffAnimation(m,a,se);y!==null&&(g.startTime=y,v=!0)}}_l(e,a),c.start(pu(a,c,f,e.shouldReduceMotion&&cg.has(a)?{type:!1}:g,e,v));const _=c.animation;_&&d.push(_)}return l&&Promise.all(d).then(()=>{se.update(()=>{l&&C1(e,l)})}),d}function Pl(e,t,n={}){var r;const i=Po(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(zg(e,i,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:a,staggerDirection:c}=s;return Yw(e,t,h+d,a,c,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,h]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function Yw(e,t,n=0,r=0,i=1,s){const o=[],l=(e.variantChildren.size-1)*r,u=i===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(e.variantChildren).sort(Xw).forEach((d,h)=>{d.notify("AnimationStart",t),o.push(Pl(d,t,{...s,delay:n+u(h)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Xw(e,t){return e.sortNodePosition(t)}function qw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Pl(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Pl(e,t,n);else{const i=typeof t=="function"?Po(e,t,n.custom):t;r=Promise.all(zg(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const Qw=$c.length;function Bg(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Bg(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Qw;n++){const r=$c[n],i=e.props[r];(Ei(i)||i===!1)&&(t[r]=i)}return t}const Jw=[...Fc].reverse(),Zw=Fc.length;function e_(e){return t=>Promise.all(t.map(({animation:n,options:r})=>qw(e,n,r)))}function t_(e){let t=e_(e),n=cf(),r=!0;const i=u=>(d,h)=>{var a;const c=Po(e,h,u==="exit"?(a=e.presenceContext)===null||a===void 0?void 0:a.custom:void 0);if(c){const{transition:f,transitionEnd:g,...v}=c;d={...d,...v,...g}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=Bg(e.parent)||{},a=[],c=new Set;let f={},g=1/0;for(let _=0;_<Zw;_++){const m=Jw[_],y=n[m],x=d[m]!==void 0?d[m]:h[m],w=Ei(x),k=m===u?y.isActive:null;k===!1&&(g=_);let C=x===h[m]&&x!==d[m]&&w;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...f},!y.isActive&&k===null||!x&&!y.prevProp||Ao(x)||typeof x=="boolean")continue;const A=n_(y.prevProp,x);let S=A||m===u&&y.isActive&&!C&&w||_>g&&w,b=!1;const P=Array.isArray(x)?x:[x];let E=P.reduce(i(m),{});k===!1&&(E={});const{prevResolvedValues:O={}}=y,B={...O,...E},R=z=>{S=!0,c.has(z)&&(b=!0,c.delete(z)),y.needsAnimating[z]=!0;const M=e.getValue(z);M&&(M.liveStyle=!1)};for(const z in B){const M=E[z],$=O[z];if(f.hasOwnProperty(z))continue;let j=!1;vl(M)&&vl($)?j=!tg(M,$):j=M!==$,j?M!=null?R(z):c.add(z):M!==void 0&&c.has(z)?R(z):y.protectedKeys[z]=!0}y.prevProp=x,y.prevResolvedValues=E,y.isActive&&(f={...f,...E}),r&&e.blockInitialAnimation&&(S=!1),S&&(!(C&&A)||b)&&a.push(...P.map(z=>({animation:z,options:{type:m}})))}if(c.size){const _={};c.forEach(m=>{const y=e.getBaseTarget(m),x=e.getValue(m);x&&(x.liveStyle=!0),_[m]=y??null}),a.push({animation:_})}let v=!!a.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(a):Promise.resolve()}function l(u,d){var h;if(n[u].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(c=>{var f;return(f=c.animationState)===null||f===void 0?void 0:f.setActive(u,d)}),n[u].isActive=d;const a=o(u);for(const c in n)n[c].protectedKeys={};return a}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=cf(),r=!0}}}function n_(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!tg(t,e):!1}function Sn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cf(){return{animate:Sn(!0),whileInView:Sn(),whileHover:Sn(),whileTap:Sn(),whileDrag:Sn(),whileFocus:Sn(),exit:Sn()}}class _n{constructor(t){this.isMounted=!1,this.node=t}update(){}}class r_ extends _n{constructor(t){super(t),t.animationState||(t.animationState=t_(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ao(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let i_=0;class s_ extends _n{constructor(){super(...arguments),this.id=i_++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const o_={animation:{Feature:r_},exit:{Feature:s_}};function Li(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ui(e){return{point:{x:e.pageX,y:e.pageY}}}const a_=e=>t=>tu(t)&&e(t,Ui(t));function ui(e,t,n,r){return Li(e,t,a_(n),r)}const uf=(e,t)=>Math.abs(e-t);function l_(e,t){const n=uf(e.x,t.x),r=uf(e.y,t.y);return Math.sqrt(n**2+r**2)}class Ug{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const a=ga(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,f=l_(a.offset,{x:0,y:0})>=3;if(!c&&!f)return;const{point:g}=a,{timestamp:v}=Ce;this.history.push({...g,timestamp:v});const{onStart:_,onMove:m}=this.handlers;c||(_&&_(this.lastMoveEvent,a),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,a)},this.handlePointerMove=(a,c)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=ma(c,this.transformPagePoint),se.update(this.updatePoint,!0)},this.handlePointerUp=(a,c)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=ga(a.type==="pointercancel"?this.lastMoveEventInfo:ma(c,this.transformPagePoint),this.history);this.startEvent&&f&&f(a,_),g&&g(a,_)},!tu(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Ui(t),l=ma(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Ce;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,ga(l,this.history)),this.removeListeners=Bi(ui(this.contextWindow,"pointermove",this.handlePointerMove),ui(this.contextWindow,"pointerup",this.handlePointerUp),ui(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pn(this.updatePoint)}}function ma(e,t){return t?{point:t(e.point)}:e}function df(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ga({point:e},t){return{point:e,delta:df(e,Hg(t)),offset:df(e,c_(t)),velocity:u_(t,.1)}}function c_(e){return e[0]}function Hg(e){return e[e.length-1]}function u_(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Hg(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ot(t)));)n--;if(!r)return{x:0,y:0};const s=Vt(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Wg=1e-4,d_=1-Wg,f_=1+Wg,Kg=.01,p_=0-Kg,h_=0+Kg;function tt(e){return e.max-e.min}function m_(e,t,n){return Math.abs(e-t)<=n}function ff(e,t,n,r=.5){e.origin=r,e.originPoint=ue(t.min,t.max,e.origin),e.scale=tt(n)/tt(t),e.translate=ue(n.min,n.max,e.origin)-e.originPoint,(e.scale>=d_&&e.scale<=f_||isNaN(e.scale))&&(e.scale=1),(e.translate>=p_&&e.translate<=h_||isNaN(e.translate))&&(e.translate=0)}function di(e,t,n,r){ff(e.x,t.x,n.x,r?r.originX:void 0),ff(e.y,t.y,n.y,r?r.originY:void 0)}function pf(e,t,n){e.min=n.min+t.min,e.max=e.min+tt(t)}function g_(e,t,n){pf(e.x,t.x,n.x),pf(e.y,t.y,n.y)}function hf(e,t,n){e.min=t.min-n.min,e.max=e.min+tt(t)}function fi(e,t,n){hf(e.x,t.x,n.x),hf(e.y,t.y,n.y)}function y_(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ue(n,e,r.max):Math.min(e,n)),e}function mf(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function v_(e,{top:t,left:n,bottom:r,right:i}){return{x:mf(e.x,n,i),y:mf(e.y,t,r)}}function gf(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function x_(e,t){return{x:gf(e.x,t.x),y:gf(e.y,t.y)}}function w_(e,t){let n=.5;const r=tt(e),i=tt(t);return i>r?n=Cr(t.min,t.max-r,e.min):r>i&&(n=Cr(e.min,e.max-i,t.min)),Ut(0,1,n)}function __(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const jl=.35;function S_(e=jl){return e===!1?e=0:e===!0&&(e=jl),{x:yf(e,"left","right"),y:yf(e,"top","bottom")}}function yf(e,t,n){return{min:vf(e,t),max:vf(e,n)}}function vf(e,t){return typeof e=="number"?e:e[t]||0}const xf=()=>({translate:0,scale:1,origin:0,originPoint:0}),or=()=>({x:xf(),y:xf()}),wf=()=>({min:0,max:0}),ge=()=>({x:wf(),y:wf()});function ot(e){return[e("x"),e("y")]}function Gg({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function k_({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function T_(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ya(e){return e===void 0||e===1}function El({scale:e,scaleX:t,scaleY:n}){return!ya(e)||!ya(t)||!ya(n)}function Cn(e){return El(e)||Yg(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Yg(e){return _f(e.x)||_f(e.y)}function _f(e){return e&&e!=="0%"}function oo(e,t,n){const r=e-n,i=t*r;return n+i}function Sf(e,t,n,r,i){return i!==void 0&&(e=oo(e,i,r)),oo(e,n,r)+t}function Ml(e,t=0,n=1,r,i){e.min=Sf(e.min,t,n,r,i),e.max=Sf(e.max,t,n,r,i)}function Xg(e,{x:t,y:n}){Ml(e.x,t.translate,t.scale,t.originPoint),Ml(e.y,n.translate,n.scale,n.originPoint)}const kf=.999999999999,Tf=1.0000000000001;function C_(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&lr(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Xg(e,o)),r&&Cn(s.latestValues)&&lr(e,s.latestValues))}t.x<Tf&&t.x>kf&&(t.x=1),t.y<Tf&&t.y>kf&&(t.y=1)}function ar(e,t){e.min=e.min+t,e.max=e.max+t}function Cf(e,t,n,r,i=.5){const s=ue(e.min,e.max,i);Ml(e,t,n,s,r)}function lr(e,t){Cf(e.x,t.x,t.scaleX,t.scale,t.originX),Cf(e.y,t.y,t.scaleY,t.scale,t.originY)}function qg(e,t){return Gg(T_(e.getBoundingClientRect(),t))}function A_(e,t,n){const r=qg(e,n),{scroll:i}=t;return i&&(ar(r.x,i.offset.x),ar(r.y,i.offset.y)),r}const Qg=({current:e})=>e?e.ownerDocument.defaultView:null,b_=new WeakMap;class P_{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:a}=this.getProps();a?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ui(h).point)},s=(h,a)=>{const{drag:c,dragPropagation:f,onDragStart:g}=this.getProps();if(c&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=w1(c),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ot(_=>{let m=this.getAxisMotionValue(_).get()||0;if(Et.test(m)){const{projection:y}=this.visualElement;if(y&&y.layout){const x=y.layout.layoutBox[_];x&&(m=tt(x)*(parseFloat(m)/100))}}this.originPoint[_]=m}),g&&se.postRender(()=>g(h,a)),_l(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(h,a)=>{const{dragPropagation:c,dragDirectionLock:f,onDirectionLock:g,onDrag:v}=this.getProps();if(!c&&!this.openDragLock)return;const{offset:_}=a;if(f&&this.currentDirection===null){this.currentDirection=j_(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",a.point,_),this.updateAxis("y",a.point,_),this.visualElement.render(),v&&v(h,a)},l=(h,a)=>this.stop(h,a),u=()=>ot(h=>{var a;return this.getAnimationState(h)==="paused"&&((a=this.getAxisMotionValue(h).animation)===null||a===void 0?void 0:a.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Ug(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Qg(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&se.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ds(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=y_(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&ir(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=v_(i.layoutBox,n):this.constraints=!1,this.elastic=S_(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ot(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=__(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ir(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=A_(r,i.root,this.visualElement.getTransformPagePoint());let o=x_(i.layout.layoutBox,s);if(n){const l=n(k_(o));this.hasMutatedConstraints=!!l,l&&(o=Gg(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=ot(h=>{if(!ds(h,n,this.currentDirection))return;let a=u&&u[h]||{};o&&(a={min:0,max:0});const c=i?200:1e6,f=i?40:1e7,g={type:"inertia",velocity:r?t[h]:0,bounceStiffness:c,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...a};return this.startAxisValueAnimation(h,g)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return _l(this.visualElement,t),r.start(pu(t,r,0,n,this.visualElement,!1))}stopAnimation(){ot(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ot(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ot(n=>{const{drag:r}=this.getProps();if(!ds(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-ue(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ir(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ot(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=w_({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ot(o=>{if(!ds(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(ue(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;b_.set(this.visualElement,this);const t=this.visualElement.current,n=ui(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();ir(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),se.read(r);const o=Li(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ot(h=>{const a=this.getAxisMotionValue(h);a&&(this.originPoint[h]+=u[h].translate,a.set(a.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=jl,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function ds(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function j_(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class E_ extends _n{constructor(t){super(t),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new P_(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const Af=e=>(t,n)=>{e&&se.postRender(()=>e(t,n))};class M_ extends _n{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(t){this.session=new Ug(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qg(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Af(t),onStart:Af(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&se.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ui(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const js={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Wr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(U.test(e))e=parseFloat(e);else return e;const n=bf(e,t.target.x),r=bf(e,t.target.y);return`${n}% ${r}%`}},N_={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=hn.parse(e);if(i.length>5)return r;const s=hn.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=ue(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class I_ extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;Zx(L_),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),js.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||se.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Bc.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Jg(e){const[t,n]=Lm(),r=T.useContext(Lc);return p.jsx(I_,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(Bm),isPresent:t,safeToRemove:n})}const L_={borderRadius:{...Wr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wr,borderTopRightRadius:Wr,borderBottomLeftRadius:Wr,borderBottomRightRadius:Wr,boxShadow:N_};function R_(e,t,n){const r=Ie(e)?e:Ni(e);return r.start(pu("",r,t,n)),r.animation}function D_(e){return e instanceof SVGElement&&e.tagName!=="svg"}const O_=(e,t)=>e.depth-t.depth;class V_{constructor(){this.children=[],this.isDirty=!1}add(t){nu(this.children,t),this.isDirty=!0}remove(t){ru(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(O_),this.isDirty=!1,this.children.forEach(t)}}function F_(e,t){const n=Mt.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(pn(r),e(s-t))};return se.read(r,!0),()=>pn(r)}const Zg=["TopLeft","TopRight","BottomLeft","BottomRight"],$_=Zg.length,Pf=e=>typeof e=="string"?parseFloat(e):e,jf=e=>typeof e=="number"||U.test(e);function z_(e,t,n,r,i,s){i?(e.opacity=ue(0,n.opacity!==void 0?n.opacity:1,B_(r)),e.opacityExit=ue(t.opacity!==void 0?t.opacity:1,0,U_(r))):s&&(e.opacity=ue(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<$_;o++){const l=`border${Zg[o]}Radius`;let u=Ef(t,l),d=Ef(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||jf(u)===jf(d)?(e[l]=Math.max(ue(Pf(u),Pf(d),r),0),(Et.test(d)||Et.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=ue(t.rotate||0,n.rotate||0,r))}function Ef(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const B_=ey(0,.5,vg),U_=ey(.5,.95,Ze);function ey(e,t,n){return r=>r<e?0:r>t?1:n(Cr(e,t,r))}function Mf(e,t){e.min=t.min,e.max=t.max}function st(e,t){Mf(e.x,t.x),Mf(e.y,t.y)}function Nf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function If(e,t,n,r,i){return e-=t,e=oo(e,1/n,r),i!==void 0&&(e=oo(e,1/i,r)),e}function H_(e,t=0,n=1,r=.5,i,s=e,o=e){if(Et.test(t)&&(t=parseFloat(t),t=ue(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ue(s.min,s.max,r);e===s&&(l-=t),e.min=If(e.min,t,n,l,i),e.max=If(e.max,t,n,l,i)}function Lf(e,t,[n,r,i],s,o){H_(e,t[n],t[r],t[i],t.scale,s,o)}const W_=["x","scaleX","originX"],K_=["y","scaleY","originY"];function Rf(e,t,n,r){Lf(e.x,t,W_,n?n.x:void 0,r?r.x:void 0),Lf(e.y,t,K_,n?n.y:void 0,r?r.y:void 0)}function Df(e){return e.translate===0&&e.scale===1}function ty(e){return Df(e.x)&&Df(e.y)}function Of(e,t){return e.min===t.min&&e.max===t.max}function G_(e,t){return Of(e.x,t.x)&&Of(e.y,t.y)}function Vf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ny(e,t){return Vf(e.x,t.x)&&Vf(e.y,t.y)}function Ff(e){return tt(e.x)/tt(e.y)}function $f(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Y_{constructor(){this.members=[]}add(t){nu(this.members,t),t.scheduleRender()}remove(t){if(ru(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function X_(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:a,rotateY:c,skewX:f,skewY:g}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),a&&(r+=`rotateX(${a}deg) `),c&&(r+=`rotateY(${c}deg) `),f&&(r+=`skewX(${f}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const An={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jr=typeof window<"u"&&window.MotionDebug!==void 0,va=["","X","Y","Z"],q_={visibility:"hidden"},zf=1e3;let Q_=0;function xa(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ry(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=dg(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",se,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ry(r)}function iy({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Q_++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jr&&(An.totalNodes=An.resolvedTargetDeltas=An.recalculatedProjection=0),this.nodes.forEach(e2),this.nodes.forEach(s2),this.nodes.forEach(o2),this.nodes.forEach(t2),Jr&&window.MotionDebug.record(An)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new V_)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iu),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=D_(o),this.instance=o;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),e){let a;const c=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,a&&a(),a=F_(c,250),js.hasAnimatedSinceResize&&(js.hasAnimatedSinceResize=!1,this.nodes.forEach(Uf))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||d2,{onLayoutAnimationStart:_,onLayoutAnimationComplete:m}=h.getProps(),y=!this.targetLayout||!ny(this.targetLayout,g)||f,x=!c&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||c&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(a,x);const w={...Jc(v,"layout"),onPlay:_,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else c||Uf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(a2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ry(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const a=this.path[h];a.shouldResetTransform=!0,a.updateScroll("snapshot"),a.options.layoutRoot&&a.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bf);return}this.isUpdating||this.nodes.forEach(r2),this.isUpdating=!1,this.nodes.forEach(i2),this.nodes.forEach(J_),this.nodes.forEach(Z_),this.clearAllSnapshots();const l=Mt.now();Ce.delta=Ut(0,1e3/60,l-Ce.timestamp),Ce.timestamp=l,Ce.isProcessing=!0,ca.update.process(Ce),ca.preRender.process(Ce),ca.render.process(Ce),Ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n2),this.sharedNodes.forEach(l2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ty(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||Cn(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),f2(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ge();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(p2))){const{scroll:h}=this.root;h&&(ar(u.x,h.offset.x),ar(u.y,h.offset.y))}return u}removeElementScroll(o){var l;const u=ge();if(st(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:a,options:c}=h;h!==this.root&&a&&c.layoutScroll&&(a.wasRoot&&st(u,o),ar(u.x,a.offset.x),ar(u.y,a.offset.y))}return u}applyTransform(o,l=!1){const u=ge();st(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&lr(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Cn(h.latestValues)&&lr(u,h.latestValues)}return Cn(this.latestValues)&&lr(u,this.latestValues),u}removeTransform(o){const l=ge();st(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Cn(d.latestValues))continue;El(d.latestValues)&&d.updateSnapshot();const h=ge(),a=d.measurePageBox();st(h,a),Rf(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Cn(this.latestValues)&&Rf(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:c}=this.options;if(!(!this.layout||!(a||c))){if(this.resolvedRelativeTargetAt=Ce.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),fi(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),st(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ge(),this.targetWithTransforms=ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),g_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):st(this.target,this.layout.layoutBox),Xg(this.target,this.targetDelta)):st(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),fi(this.relativeTargetOrigin,this.target,f.target),st(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jr&&An.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||El(this.parent.latestValues)||Yg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ce.timestamp&&(d=!1),d)return;const{layout:h,layoutId:a}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||a))return;st(this.layoutCorrected,this.layout.layoutBox);const c=this.treeScale.x,f=this.treeScale.y;C_(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ge());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Nf(this.prevProjectionDelta.x,this.projectionDelta.x),Nf(this.prevProjectionDelta.y,this.projectionDelta.y)),di(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==c||this.treeScale.y!==f||!$f(this.projectionDelta.x,this.prevProjectionDelta.x)||!$f(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Jr&&An.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=or(),this.projectionDelta=or(),this.projectionDeltaWithTransform=or()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},a=or();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const c=ge(),f=u?u.source:void 0,g=this.layout?this.layout.source:void 0,v=f!==g,_=this.getStack(),m=!_||_.members.length<=1,y=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(u2));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const k=w/1e3;Hf(a.x,o.x,k),Hf(a.y,o.y,k),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fi(c,this.layout.layoutBox,this.relativeParent.layout.layoutBox),c2(this.relativeTarget,this.relativeTargetOrigin,c,k),x&&G_(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ge()),st(x,this.relativeTarget)),v&&(this.animationValues=h,z_(h,d,this.latestValues,k,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=se.update(()=>{js.hasAnimatedSinceResize=!0,this.currentAnimation=R_(0,zf,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&sy(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ge();const a=tt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+a;const c=tt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+c}st(l,u),lr(l,h),di(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Y_),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&xa("z",o,d,this.animationValues);for(let h=0;h<va.length;h++)xa(`rotate${va[h]}`,o,d,this.animationValues),xa(`skew${va[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return q_;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=bs(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=bs(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Cn(this.latestValues)&&(v.transform=h?h({},""):"none",this.hasProjected=!1),v}const c=a.animationValues||a.latestValues;this.applyTransformsToTarget(),d.transform=X_(this.projectionDeltaWithTransform,this.treeScale,c),h&&(d.transform=h(c,d.transform));const{x:f,y:g}=this.projectionDelta;d.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,a.animationValues?d.opacity=a===this?(u=(l=c.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:d.opacity=a===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const v in to){if(c[v]===void 0)continue;const{correct:_,applyTo:m}=to[v],y=d.transform==="none"?c[v]:_(c[v],a);if(m){const x=m.length;for(let w=0;w<x;w++)d[m[w]]=y}else d[v]=y}return this.options.layoutId&&(d.pointerEvents=a===this?bs(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Bf),this.root.sharedNodes.clear()}}}function J_(e){e.updateLayout()}function Z_(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?ot(a=>{const c=o?n.measuredBox[a]:n.layoutBox[a],f=tt(c);c.min=r[a].min,c.max=c.min+f}):sy(s,n.layoutBox,r)&&ot(a=>{const c=o?n.measuredBox[a]:n.layoutBox[a],f=tt(r[a]);c.max=c.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[a].max=e.relativeTarget[a].min+f)});const l=or();di(l,r,n.layoutBox);const u=or();o?di(u,e.applyTransform(i,!0),n.measuredBox):di(u,r,n.layoutBox);const d=!ty(l);let h=!1;if(!e.resumeFrom){const a=e.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:c,layout:f}=a;if(c&&f){const g=ge();fi(g,n.layoutBox,c.layoutBox);const v=ge();fi(v,r,f.layoutBox),ny(g,v)||(h=!0),a.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=a)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function e2(e){Jr&&An.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function t2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function n2(e){e.clearSnapshot()}function Bf(e){e.clearMeasurements()}function r2(e){e.isLayoutDirty=!1}function i2(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Uf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function s2(e){e.resolveTargetDelta()}function o2(e){e.calcProjection()}function a2(e){e.resetSkewAndRotation()}function l2(e){e.removeLeadSnapshot()}function Hf(e,t,n){e.translate=ue(t.translate,0,n),e.scale=ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Wf(e,t,n,r){e.min=ue(t.min,n.min,r),e.max=ue(t.max,n.max,r)}function c2(e,t,n,r){Wf(e.x,t.x,n.x,r),Wf(e.y,t.y,n.y,r)}function u2(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const d2={duration:.45,ease:[.4,0,.1,1]},Kf=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Gf=Kf("applewebkit/")&&!Kf("chrome/")?Math.round:Ze;function Yf(e){e.min=Gf(e.min),e.max=Gf(e.max)}function f2(e){Yf(e.x),Yf(e.y)}function sy(e,t,n){return e==="position"||e==="preserve-aspect"&&!m_(Ff(t),Ff(n),.2)}function p2(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const h2=iy({attachResizeListener:(e,t)=>Li(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wa={current:void 0},oy=iy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!wa.current){const e=new h2({});e.mount(window),e.setOptions({layoutScroll:!0}),wa.current=e}return wa.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),m2={pan:{Feature:M_},drag:{Feature:E_,ProjectionNode:oy,MeasureLayout:Jg}};function Xf(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&se.postRender(()=>s(t,Ui(t)))}class g2 extends _n{mount(){const{current:t}=this.node;t&&(this.unmount=m1(t,n=>(Xf(this.node,n,"Start"),r=>Xf(this.node,r,"End"))))}unmount(){}}class y2 extends _n{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bi(Li(this.node.current,"focus",()=>this.onFocus()),Li(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qf(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&se.postRender(()=>s(t,Ui(t)))}class v2 extends _n{mount(){const{current:t}=this.node;t&&(this.unmount=x1(t,n=>(qf(this.node,n,"Start"),(r,{success:i})=>qf(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Nl=new WeakMap,_a=new WeakMap,x2=e=>{const t=Nl.get(e.target);t&&t(e)},w2=e=>{e.forEach(x2)};function _2({root:e,...t}){const n=e||document;_a.has(n)||_a.set(n,{});const r=_a.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(w2,{root:e,...t})),r[i]}function S2(e,t,n){const r=_2(t);return Nl.set(e,n),r.observe(e),()=>{Nl.delete(e),r.unobserve(e)}}const k2={some:0,all:1};class T2 extends _n{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:k2[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:a}=this.node.getProps(),c=d?h:a;c&&c(u)};return S2(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(C2(t,n))&&this.startObserver()}unmount(){}}function C2({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const A2={inView:{Feature:T2},tap:{Feature:v2},focus:{Feature:y2},hover:{Feature:g2}},b2={layout:{ProjectionNode:oy,MeasureLayout:Jg}},Il={current:null},ay={current:!1};function P2(){if(ay.current=!0,!!Oc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Il.current=e.matches;e.addListener(t),t()}else Il.current=!1}const j2=[...Ng,Me,hn],E2=e=>j2.find(Mg(e)),Qf=new WeakMap;function M2(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Ie(i))e.addValue(r,i);else if(Ie(s))e.addValue(r,Ni(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Ni(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Jf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N2{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uu,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Mt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,se.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=bo(n),this.isVariantNode=$m(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:a,...c}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in c){const g=c[f];u[f]!==void 0&&Ie(g)&&g.set(u[f],!1)}}mount(t){this.current=t,Qf.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ay.current||P2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Il.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qf.delete(this.current),this.projection&&this.projection.unmount(),pn(this.notifyUpdate),pn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Bn.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ar){const n=Ar[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jf.length;r++){const i=Jf[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=M2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ni(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(jg(i)||wg(i))?i=parseFloat(i):!E2(i)&&hn.test(n)&&(i=Ag(t,n)),this.setBaseTarget(t,Ie(i)?i.get():i)),Ie(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Hc(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ie(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new iu),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class ly extends N2{constructor(){super(...arguments),this.KeyframeResolver=Ig}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ie(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function I2(e){return window.getComputedStyle(e)}class L2 extends ly{constructor(){super(...arguments),this.type="html",this.renderInstance=Xm}readValueFromInstance(t,n){if(Bn.has(n)){const r=cu(n);return r&&r.default||0}else{const r=I2(t),i=(Km(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return qg(t,n)}build(t,n,r){Gc(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Qc(t,n,r)}}class R2 extends ly{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Bn.has(n)){const r=cu(n);return r&&r.default||0}return n=qm.has(n)?n:zc(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Zm(t,n,r)}build(t,n,r){Yc(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){Qm(t,n,r,i)}mount(t){this.isSVGTag=qc(t.tagName),super.mount(t)}}const D2=(e,t)=>Uc(e)?new R2(t):new L2(t,{allowProjection:e!==T.Fragment}),O2=l1({...o_,...A2,...m2,...b2},D2),I=kx(O2),V2={},Zf=e=>{let t;const n=new Set,r=(h,a)=>{const c=typeof h=="function"?h(t):h;if(!Object.is(c,t)){const f=t;t=a??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(g=>g(t,f))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(V2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},F2=e=>e?Zf(e):Zf;var cy={exports:{}},uy={},dy={exports:{}},fy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pr=T;function $2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z2=typeof Object.is=="function"?Object.is:$2,B2=Pr.useState,U2=Pr.useEffect,H2=Pr.useLayoutEffect,W2=Pr.useDebugValue;function K2(e,t){var n=t(),r=B2({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return H2(function(){i.value=n,i.getSnapshot=t,Sa(i)&&s({inst:i})},[e,n,t]),U2(function(){return Sa(i)&&s({inst:i}),e(function(){Sa(i)&&s({inst:i})})},[e]),W2(n),n}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!z2(e,n)}catch{return!0}}function G2(e,t){return t()}var Y2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?G2:K2;fy.useSyncExternalStore=Pr.useSyncExternalStore!==void 0?Pr.useSyncExternalStore:Y2;dy.exports=fy;var X2=dy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=T,q2=X2;function Q2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var J2=typeof Object.is=="function"?Object.is:Q2,Z2=q2.useSyncExternalStore,eS=Eo.useRef,tS=Eo.useEffect,nS=Eo.useMemo,rS=Eo.useDebugValue;uy.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=eS(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nS(function(){function u(f){if(!d){if(d=!0,h=f,f=r(f),i!==void 0&&o.hasValue){var g=o.value;if(i(g,f))return a=g}return a=f}if(g=a,J2(h,f))return g;var v=r(f);return i!==void 0&&i(g,v)?(h=f,g):(h=f,a=v)}var d=!1,h,a,c=n===void 0?null:n;return[function(){return u(t())},c===null?void 0:function(){return u(c())}]},[t,n,r,i]);var l=Z2(e,s[0],s[1]);return tS(function(){o.hasValue=!0,o.value=l},[l]),rS(l),l};cy.exports=uy;var iS=cy.exports;const sS=Vl(iS),py={},{useDebugValue:oS}=By,{useSyncExternalStoreWithSelector:aS}=sS;let ep=!1;const lS=e=>e;function cS(e,t=lS,n){(py?"production":void 0)!=="production"&&n&&!ep&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ep=!0);const r=aS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return oS(r),r}const tp=e=>{(py?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?F2(e):e,n=(r,i)=>cS(t,r,i);return Object.assign(n,t),n},hy=e=>e?tp(e):tp,uS=()=>{const e=["https://images.pexels.com/photos/1169754/pexels-photo-1169754.jpeg","https://images.pexels.com/photos/1252890/pexels-photo-1252890.jpeg","https://images.pexels.com/photos/1274260/pexels-photo-1274260.jpeg","https://images.pexels.com/photos/1694000/pexels-photo-1694000.jpeg","https://images.pexels.com/photos/1257860/pexels-photo-1257860.jpeg","https://images.pexels.com/photos/1906658/pexels-photo-1906658.jpeg","https://images.pexels.com/photos/1146134/pexels-photo-1146134.jpeg","https://images.pexels.com/photos/1341279/pexels-photo-1341279.jpeg","https://images.pexels.com/photos/816608/pexels-photo-816608.jpeg","https://images.pexels.com/photos/1434608/pexels-photo-1434608.jpeg","https://images.pexels.com/photos/1938348/pexels-photo-1938348.jpeg","https://images.pexels.com/photos/1693095/pexels-photo-1693095.jpeg"];return e[Math.floor(Math.random()*e.length)]},np={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEFAULT_API_KEY:"sk-PWWiJaQvPXNvubR7NUKfpaWdRUVKmTEJdl3db1HRF8vgfCeG",VITE_DEFAULT_ENDPOINT:"https://x666.me/v1/chat/completions",VITE_DEFAULT_MODEL:"gemini-2.5-flash-preview-05-20",VITE_DEFAULT_PROVIDER:"openai"},my=async e=>{var s,o,l,u,d,h,a;if(!e.provider||!e.apiKey||!e.endpoint||!e.model)return{isValid:!1,error:"请选择提供商并填写完整的API配置信息（API Key、Endpoint、Model）"};const t=Date.now(),n='请简单回复"测试成功"';let r,i={"Content-Type":"application/json",Authorization:`Bearer ${((s=e.apiKey)==null?void 0:s.replace(/[^\x20-\x7E]/g,""))||""}`};try{switch(console.log(`🔍 Validating ${e.provider} API configuration...`),e.provider){case"gemini":r={contents:[{parts:[{text:n}]}]};break;case"openai":default:r={model:e.model,messages:[{role:"user",content:n}],max_tokens:10,temperature:.1};break}const c=await fetch(e.endpoint,{method:"POST",headers:i,body:JSON.stringify(r)}),f=Date.now()-t;if(!c.ok){let _=`HTTP ${c.status}: ${c.statusText}`;try{const m=c.headers.get("content-type");if(m&&m.includes("application/json")){const y=await c.json();(o=y.error)!=null&&o.message?_=y.error.message:y.message&&(_=y.message)}else{const y=await c.text();y.includes("<!doctype")||y.includes("<html")?_="服务器返回了HTML页面而不是API响应。请检查endpoint地址是否正确。":_=`非JSON响应: ${y.slice(0,100)}...`}}catch{_=`HTTP ${c.status}: 无法解析错误响应`}return{isValid:!1,error:_,responseTime:f}}let g;try{const _=c.headers.get("content-type");if(!_||!_.includes("application/json"))return{isValid:!1,error:`API返回了非JSON响应。请检查endpoint是否正确。响应内容: ${(await c.text()).slice(0,100)}...`,responseTime:f};g=await c.json()}catch{return{isValid:!1,error:"API响应不是有效的JSON格式，请检查endpoint是否支持OpenAI格式",responseTime:f}}let v;switch(e.provider){case"gemini":if(v=(a=(h=(d=(u=(l=g.candidates)==null?void 0:l[0])==null?void 0:u.content)==null?void 0:d.parts)==null?void 0:h[0])==null?void 0:a.text,!v)return{isValid:!1,error:"Gemini响应格式不正确",responseTime:f};break;case"openai":default:if(!g.choices||!g.choices[0]||!g.choices[0].message)return{isValid:!1,error:"API响应格式不正确，请检查endpoint是否支持OpenAI格式",responseTime:f};v=g.choices[0].message.content;break}return console.log("✅ API validation successful:",{responseTime:`${f}ms`,model:e.model,testResponse:v==null?void 0:v.slice(0,50)}),{isValid:!0,responseTime:f,modelInfo:`${e.model} (${f}ms)`}}catch(c){const f=Date.now()-t;console.error("❌ API validation failed:",c);let g="网络连接失败";return c instanceof Error&&(c.message.includes("fetch")?g="无法连接到API服务器，请检查网络和endpoint地址":c.message.includes("CORS")?g="CORS错误，请检查API服务器是否允许跨域请求":c.message.includes("JSON")?g="服务器响应格式错误，请检查endpoint地址是否正确":g=c.message),{isValid:!1,error:g,responseTime:f}}},cr=(e,t)=>{const n=`${e} ${t}`.toLowerCase(),r={love:["relationships","romance","connection","heart","soulmate"],family:["relationships","parents","children","home","roots","legacy"],friendship:["connection","social","trust","loyalty","support"],career:["work","profession","vocation","success","achievement"],education:["learning","knowledge","growth","skills","wisdom"],health:["wellness","fitness","balance","vitality","self-care"],finance:["money","wealth","abundance","security","resources"],spirituality:["faith","soul","meaning","divinity","practice"],emotions:["feelings","awareness","processing","expression","regulation"],happiness:["joy","fulfillment","contentment","bliss","satisfaction"],anxiety:["fear","worry","stress","uncertainty","overwhelm"],grief:["loss","sadness","mourning","acceptance","healing"],anger:["frustration","resentment","boundaries","assertiveness","release"],shame:["guilt","regret","inadequacy","worthiness","forgiveness"],identity:["self","authenticity","values","discovery","integration"],purpose:["meaning","calling","mission","direction","contribution"],growth:["development","evolution","improvement","transformation","potential"],resilience:["strength","adaptation","recovery","endurance","perseverance"],creativity:["expression","inspiration","imagination","innovation","artistry"],wisdom:["insight","perspective","understanding","discernment","reflection"],communication:["expression","listening","understanding","clarity","connection"],intimacy:["closeness","vulnerability","trust","bonding","openness"],boundaries:["limits","protection","respect","space","autonomy"],conflict:["resolution","understanding","healing","growth","peace"],trust:["faith","reliability","consistency","safety","honesty"],meaning:["purpose","significance","values","understanding","exploration"],mindfulness:["presence","awareness","attention","consciousness","being"],gratitude:["appreciation","thankfulness","recognition","abundance","positivity"],legacy:["impact","contribution","remembrance","influence","heritage"],values:["principles","ethics","morality","beliefs","priorities"],change:["transition","adaptation","adjustment","evolution","transformation"],decision:["choice","discernment","wisdom","judgment","crossroads"],future:["planning","vision","direction","goals","possibilities"],past:["history","memories","reflection","lessons","integration"],"letting-go":["release","surrender","acceptance","closure","freedom"],nature:["environment","connection","outdoors","harmony","elements"],society:["community","culture","belonging","contribution","citizenship"],justice:["fairness","equality","rights","advocacy","ethics"],service:["contribution","helping","impact","giving","purpose"],technology:["digital","tools","innovation","adaptation","balance"]},i={relationships:["love","family","friendship","connection","intimacy","communication","boundaries","trust"],personal_growth:["identity","purpose","wisdom","growth","resilience","spirituality","creativity","education"],career_and_purpose:["future","career","decision","change","goals","values","legacy","mission","purpose"],emotional_wellbeing:["happiness","health","emotions","mindfulness","balance","self-care","vitality","healing"],philosophy_and_existence:["meaning","purpose","spirituality","values","wisdom","legacy","faith","life","death"],creativity_and_passion:["creativity","expression","imagination","innovation","artistry","inspiration","passion"],daily_life:["finance","security","abundance","resources","stability","wealth","work","routine","daily","practical"]},s={充满希望的:["happy","joy","gratitude","hope","excitement","love","strength","peace","confidence"],思考的:["meaning","purpose","wisdom","reflect","wonder","ponder","consider","understand","explore"],探寻中:["find","search","discover","seek","direction","path","guidance","answers","clarity","help"],中性的:["what","is","are","should","would","could","might","perhaps","maybe","possibly"],焦虑的:["anxiety","worry","stress","fear","nervous","uncertain","overwhelm"],感激的:["grateful","thankful","appreciate","blessing","gift","fortune"],困惑的:["confused","puzzled","unclear","unsure","complexity","complicated"],忧郁的:["sad","depressed","melancholy","down","blue","grief","loss"],坚定的:["determined","resolved","committed","decided","sure","certain","confident"]},o={探索型:["why","why do i","what if","how come","为什么","怎么会","如果","假设","是不是因为","可能是"],实用型:["how to","how can i","what is the way to","steps to","method","如何","怎么做","方法","步骤","技巧"],事实型:["what is","when","where","who","什么是","何时","何地","谁","哪里","多少"],表达型:["i feel","i am","i think","i believe","我觉得","我认为","我感到","我相信","我想"]},l=[];let u="philosophy_and_existence";const d=["探寻中"];let h="探索型";Object.entries(r).forEach(([C,A])=>{(n.includes(C)||A.some(S=>n.includes(S)))&&(l.push(C),l.push(...A.slice(0,2)))});const a=["wisdom","growth","reflection","insight"];l.push(...a.slice(0,2)),Object.entries(i).forEach(([C,A])=>{A.filter(b=>n.includes(b)).length>0&&(u=C)}),Object.entries(s).forEach(([C,A])=>{A.filter(b=>n.includes(b)).length>0&&!d.includes(C)&&d.push(C)}),d.length>2&&d.splice(2),Object.entries(o).forEach(([C,A])=>{if(A.some(S=>e.toLowerCase().includes(S))){h=C;return}}),l.length<3&&l.push("reflection","insight","awareness");const c=[...new Set(l)].slice(0,6);let f={value:1,description:"星尘"};e.length>50&&t.length>150?(f.value=4,f.description="启明星"):e.length>30&&t.length>100?(f.value=3,f.description="寻常星"):e.length>10&&t.length>50&&(f.value=2,f.description="微光"),["我自己","我的内心","自我","成长","人生","意义","价值","恐惧","梦想","目标","自我意识"].some(C=>n.includes(C))&&(f.value=Math.min(5,f.value+1),f.value>=4&&(f.description=f.value===5?"超新星":"启明星"));const _=[0,10,30,60,90,100][f.value];let m=3;["love","purpose","meaning","growth","change","fear","happiness","success"].some(C=>c.includes(C))?m=5:c.length<=2?m=1:c.length>=5&&(m=4);let x=e.length>30?e:e+" - "+t.slice(0,40)+"...",w="";return w={relationships:"这种关系模式在你生活的其他方面是否也有体现？",personal_growth:"你觉得是什么阻碍了你在这方面的进一步成长？",career_and_purpose:"如果没有任何限制，你理想中的职业道路是什么样的？",emotional_wellbeing:"这种情绪是从什么时候开始的，有没有特定的触发点？",philosophy_and_existence:"这个信念对你日常生活的决策有什么影响？",creativity_and_passion:"你上一次完全沉浸在创造性活动中是什么时候？那感觉如何？",daily_life:"这个日常习惯如何影响了你的整体生活质量？"}[u]||"关于这个话题，你还有什么更深层次的感受或想法？",{tags:c,primary_category:u,emotional_tone:d,question_type:h,insight_level:f,initial_luminosity:_,connection_potential:m,suggested_follow_up:w,card_summary:x}},gy=async(e,t,n,r)=>{try{if(n!=null&&n.apiKey&&(n!=null&&n.endpoint))return console.log(`🤖 使用${n.provider||"openai"}服务进行内容分析`),console.log(`📝 分析内容 - 问题: "${e}", 回答: "${t}"`),await ip(e,t,n);{const i=Un();if(i.apiKey&&i.endpoint)return console.log(`🤖 使用默认${i.provider||"openai"}配置进行内容分析`),console.log(`📝 分析内容 - 问题: "${e}", 回答: "${t}"`),await ip(e,t,i)}return console.warn("⚠️ 未找到AI配置，使用模拟内容分析"),cr(e,t)}catch(i){return console.warn("❌ AI标签生成失败，使用备用方案:",i),cr(e,t)}},Mo=async(e,t,n,r)=>{console.log("===== Starting AI answer generation ====="),console.log("Question:",e),console.log("Passed config:",t?"Has config":"No config"),console.log("Streaming enabled:",!!n),console.log("Conversation history length:",r?r.length:0),console.log("onStream type:",typeof n);try{if(t!=null&&t.apiKey&&(t!=null&&t.endpoint)){console.log(`Using passed ${t.provider||"openai"} service to generate answer`),console.log("Config details:",{provider:t.provider,endpoint:t.endpoint,model:t.model,hasApiKey:!!t.apiKey}),console.log("🔍 About to call callAIForResponse with onStream:",!!n);const o=await rp(e,t,n,r);return console.log("AI generated answer:",o),o}const i=Un();if(console.log("Retrieved default config:",{hasApiKey:!!i.apiKey,hasEndpoint:!!i.endpoint,provider:i.provider,model:i.model,endpoint:i.endpoint}),i.apiKey&&i.endpoint){console.log(`Using default ${i.provider||"openai"} config to generate answer`),console.log(`Config info: provider=${i.provider}, endpoint=${i.endpoint}, model=${i.model}`),console.log("🔍 About to call callAIForResponse with default config and onStream:",!!n);const o=await rp(e,i,n,r);return console.log("AI generated answer:",o),o}console.log("Using mock answer generation");const s=Ll(e);return n&&(console.log("Simulating stream for mock response"),await Rl(s,n)),console.log("Mock generated answer:",s),s}catch(i){console.warn("AI answer generation failed, using fallback:",i);const s=Ll(e);return n&&await Rl(s,n),console.log("Fallback answer:",s),s}},Ll=e=>{const t=e.toLowerCase();if(t.includes("爱")||t.includes("恋")||t.includes("love")||t.includes("relationship")){const r=["当心灵敞开时，星辰便会排列成行。爱会流向那些勇敢拥抱脆弱的人。","如同双星相互环绕，真正的连接需要独立与统一并存。","当灵魂以真实的光芒闪耀时，宇宙会密谋让它们相遇。","爱不是被找到的，而是被认出的，就像在异国天空中看到熟悉的星座。","真爱如月圆之夜的潮汐，既有规律可循，又充满神秘的力量。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("目标")||t.includes("意义")||t.includes("purpose")||t.includes("meaning")){const r=["你的目标如星云诞生恒星般展开——缓慢、美丽、不可避免。","宇宙不会询问星辰的目标；它们只是闪耀。你也应如此。","意义从你的天赋与世界需求的交汇处涌现，如光线穿过三棱镜般折射。","你的目标写在你最深的喜悦和服务意愿的语言中。","生命的意义不在远方，而在每一个当下的选择与行动中绽放。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("成功")||t.includes("事业")||t.includes("成就")||t.includes("success")||t.includes("career")||t.includes("achieve")){const r=["成功如超新星般绽放——突然的辉煌源于长久耐心的燃烧。","通往成就的道路如银河系的螺旋臂般蜿蜒，每个转弯都揭示新的可能性。","真正的成功不在于积累，而在于你为他人黑暗中带来的光明。","如行星找到轨道般，成功来自于将你的努力与自然力量对齐。","成功的种子早已种在你的内心，只需要时间和坚持的浇灌。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("恐惧")||t.includes("害怕")||t.includes("焦虑")||t.includes("fear")||t.includes("anxiety")||t.includes("worry")){const r=["恐惧是你潜能投下的阴影。转向光明，看它消失。","勇气不是没有恐惧，而是在可能性的星光下与之共舞。","如流星进入大气层时燃烧得明亮，转化需要拥抱火焰。","你的恐惧是古老的星尘；承认它们，然后让它们在宇宙风中飘散。","恐惧是成长的前奏，如黎明前的黑暗，预示着光明的到来。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("未来")||t.includes("将来")||t.includes("命运")||t.includes("future")||t.includes("destiny")){const r=["未来是你通过连接选择之星而创造的星座。","时间如恒星风般流淌，将可能性的种子带到肥沃的时刻。","你的命运不像恒星般固定，而像彗星般流动，由你的方向塑造。","未来以直觉的语言低语；用心聆听，而非恐惧。","明天的轮廓隐藏在今日的每一个微小决定中。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("快乐")||t.includes("幸福")||t.includes("喜悦")||t.includes("happiness")||t.includes("joy")||t.includes("fulfillment")){const r=["快乐不是目的地，而是穿越体验宇宙的旅行方式。","喜悦如星光在水面闪烁——存在于你选择看见它的每个时刻。","满足来自于将你内在的星座与外在的表达对齐。","真正的快乐从内心辐射，如恒星产生自己的光和热。","幸福如花朵，在感恩的土壤中最容易绽放。"];return r[Math.floor(Math.random()*r.length)]}const n=["星辰低语着未曾踏足的道路，然而你的旅程始终忠于内心的召唤。","如月光映照水面，你所寻求的既在那里又不在那里。请深入探寻。","古老的光芒穿越时空抵达你的眸；耐心将揭示匆忙所掩盖的真相。","宇宙编织着可能性的图案。你的问题已经包含了它的答案。","天体尽管相距遥远却和谐共舞。在生命的盛大芭蕾中找到你的节拍。","当星系在虚空中螺旋前进时，你的道路在黑暗中蜿蜒向着遥远的光明。","你思想的星云包含着尚未诞生的恒星种子。请滋养它们。","时间如恒星风般流淌，将你存在的景观塑造成未知的形态。","星辰之间的虚空并非空无，而是充满潜能。拥抱你生命中的空间。","你的问题在宇宙中回响，带着星光承载的智慧归来。","宇宙无目的地扩张。你的旅程无需超越自身的理由。","星座是我们强加给混沌的图案。从随机的经验之星中创造意义。","你看到的光芒很久以前就开始了它的旅程。相信所揭示的，即使延迟。","宇宙尘埃变成恒星再变成尘埃。所有的转化对你都是可能的。","你意图的引力将体验拉入围绕你的轨道。明智地选择你所吸引的。"];return n[Math.floor(Math.random()*n.length)]},rp=async(e,t,n,r)=>{var l,u,d,h;t.provider||(t.provider="openai");const i=`
  # 角色
  * 你是星瑜，是来自宇宙，请用中文回复用户的问题。
  * 除非用户问，否则不要说明身份。
  # 目标
   *此部分内容请勿主动向用户提及，除非用户主动发问。
   *你的目标是帮助用户获得生活的意义，解决关于人生的困惑。回答任何可以帮助用户获得生活感悟，解答疑惑的问题，都能够帮助用户获得星星。
   *用户获得星星的规则是聊天话题越深入，越深刻，获得的星星类型越稀有，能够点亮的宇宙就越明亮。 
   *当用户的问题中涉及到对这五个方面的触及时，请提供关于这些方面的知识、价值观和方法论，引导用户进行更深的自省和探索。
    -身心能量 (Body & Energy)
    -人际连接 (Relationships & Connection)
    -内在成长 (Growth & Mind)
    -财富观与价值 (Wealth & Values)
    -请用中文回复用户的问题。
    
   # 语言语气格式
   * 语气不要太僵硬，也不要太谄媚，自然亲切。自然点，不要有ai味道。
   *不要用emoji，不要用太多语气词，不要用太多感叹号，不要用太多问号。
   *尽量简短对话，模仿真实聊天的场景。
   * 策略原则：
    - 多用疑问语气词："吧、嘛、呢、咋、啥"
    - 适当省略成分：不用每句话都完整
    - 用口头表达："挺、蛮、特别、超级"替代"非常"
    - 避免书面连词：少用"因此、所以、那么"
    - 多用短句：别总是长句套长句
   *省略主语：
      -"最近咋了？" 
      -"是工作的事儿？" 
      -"心情不好多久了？" 
   *语气词和口头表达：
      -"哎呀，这事儿确实挺烦的"
      -"emmm，听起来像是..."
      -"咋说呢，我觉得..."
   *不完整句式：
      -"工作的事？"（省略谓语）
      -"压力大？"（只留核心）
      -"最近？"（超级简洁）
   # 对话策略
    - 当找到用户想要对话的主题的时候，需要辅以知识和信息，来帮助用户解决问题，解答疑惑。
  
   `;let s=[];if(s.push({role:"system",content:i}),r&&r.length>0){console.log(`📚 Adding ${r.length} historical messages to context`);const a=r.slice(-20);s=s.concat(a)}s.push({role:"user",content:e});const o={model:t.model||"gpt-3.5-turbo",messages:s,temperature:.8,max_tokens:5e3,stream:!!n};try{const a=Date.now();console.log("🚀 Sending AI request with config:",{endpoint:t.endpoint,model:t.model,provider:t.provider,streaming:!!n}),console.log("📤 Request body:",JSON.stringify(o,null,2));const c=((l=t.apiKey)==null?void 0:l.replace(/[^\x20-\x7E]/g,""))||"",f=await fetch(t.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(o)}),g=Date.now()-a;if(console.log(`📨 Response status: ${f.status} ${f.statusText} (${g}ms)`),!f.ok){const m=await f.text();throw console.error(`API response error (${f.status}): ${m}`),new Error(`AI API error: ${f.status} - ${m}`)}if(n&&f.body){console.log("📡 Processing streaming response...");const m=Date.now();return await dS(f,n,m)}if(n)return console.warn("⚠️ Streaming was requested but response.body is not available"),console.log("Response headers:",Object.fromEntries(f.headers.entries())),console.log("🔄 Falling back to test streaming..."),await fS(n);const v=await f.json();console.log("📦 Complete API response structure:",JSON.stringify(v,null,2));let _="";if(v.choices&&v.choices[0]&&v.choices[0].message){const m=v.choices[0].message.content;if(_=m?m.trim():"",console.log("📝 Raw message content:",JSON.stringify(m)),console.log(`📏 Content length: ${m?m.length:0}`),console.log("🔧 Trimmed answer:",JSON.stringify(_)),console.log(`📏 Final answer length: ${_.length}`),v.usage&&console.log("📊 Token usage:",{prompt_tokens:v.usage.prompt_tokens,completion_tokens:v.usage.completion_tokens,total_tokens:v.usage.total_tokens,reasoning_tokens:((u=v.usage.completion_tokens_details)==null?void 0:u.reasoning_tokens)||0}),!_&&((h=(d=v.usage)==null?void 0:d.completion_tokens_details)==null?void 0:h.reasoning_tokens)>0)throw console.log("⚠️ Model generated reasoning tokens but no visible content"),console.log("🔄 This might be due to model configuration, trying fallback..."),new Error("Empty content despite reasoning tokens generated")}else throw console.warn("⚠️ Unexpected API response structure:",JSON.stringify(v,null,2)),new Error("Invalid API response structure");if(!_||_.trim()==="")throw console.warn("⚠️ API returned empty answer, response details:"),console.log("  - Response status:",f.status),console.log("  - Response data:",JSON.stringify(v,null,2)),new Error("API returned empty content");return console.log(`✅ Successfully generated answer: "${_}"`),_}catch(a){return console.error("❌ Answer generation request failed:",a),Ll(e)}},dS=async(e,t,n)=>{console.log("📡 === Starting processStreamingResponse ===");const r=e.body.getReader(),i=new TextDecoder;let s="",o="";try{console.log("📡 Starting to read stream...");let l=0;for(;;){console.log(`📡 Reading chunk ${++l}...`);const{done:u,value:d}=await r.read();if(u){console.log("📡 Stream reading completed");break}const h=i.decode(d,{stream:!0});o+=h,console.log(`📡 Added to buffer, buffer length: ${o.length}`);const a=o.split(`
`);o=a.pop()||"",console.log(`📡 Processing ${a.length} complete lines`);for(let c=0;c<a.length;c++){const g=a[c].trim();if(!(!g||g.startsWith(":"))&&g.startsWith("data: ")){const v=g.slice(6);if(v==="[DONE]")return console.log("📡 Stream end marker found"),s.trim();try{const _=JSON.parse(v);if(_.choices&&_.choices[0]&&_.choices[0].delta){const m=_.choices[0].delta.content;if(m){if(n&&s===""){const y=Date.now()-n;console.log(`⏱️ First token received after ${y}ms`)}console.log(`📡 Stream chunk ${l}-${c}:`,JSON.stringify(m)),s+=m,m.length>3?(console.log("📡 Breaking down chunk into characters..."),await Rl(m,t,30)):t(m),console.log(`📡 Full answer so far: ${s.length} chars`)}}}catch(_){console.warn("⚠️ Failed to parse streaming chunk:",v,_)}}}}return console.log(`✅ Streaming completed. Full answer: "${s}"`),s.trim()}catch(l){throw console.error("❌ Streaming error:",l),l}finally{console.log("📡 Releasing reader lock"),r.releaseLock()}},fS=async e=>{const n=Array.from("这是一个测试流式输出的回复，用来验证前端流式功能是否正常工作。");let r="";for(let i=0;i<n.length;i++)await new Promise(s=>setTimeout(s,100)),r+=n[i],e(n[i]),console.log(`🔥 Test stream chunk: "${n[i]}", full so far: "${r}"`);return r},Rl=async(e,t,n=50)=>{const r=Array.from(e);for(let i=0;i<r.length;i++)await new Promise(s=>setTimeout(s,n)),t(r[i])},ip=async(e,t,n,r)=>{var o,l;n.provider||(n.provider="openai");const i=`
  **角色：** 你是"集星问问"应用的"铸星师"。你的使命是评估用户自我探索对话的深度与精髓。

  **核心任务：** 分析下方的问题和回答。基于其内容，生成一个定义这颗"星星"的完整JSON对象。请保持你的洞察力、共情力和分析能力。

  **输入数据:**
  - 问题: "${e}"
  - 回答: "${t}"

  **分析维度与输出格式:**

  请严格遵循以下结构，生成一个单独的JSON对象。不要在JSON对象之外添加任何解释性文字。

  {
    // 1. 星星的核心身份与生命力 (Core Identity & Longevity)
    "insight_level": {
      "value": <整数, 1-5>,
      "description": "<字符串: '星尘', '微光', '寻常星', '启明星', 或 '超新星'>"
    },
    "initial_luminosity": <整数, 0-100>, // 基于 insight_level。星尘=10, 超新星=100。
    
    // 2. 星星的主题归类 (Thematic Classification)
    "primary_category": "<字符串: 从下面的预定义列表中选择>",
    "tags": ["<字符串>", "<字符串>", "<字符串>", "<字符串>"], // 4-6个具体且有启发性的标签。

    // 3. 星星的情感与意图 (Emotional & Intentional Nuance)
    "emotional_tone": ["<字符串>", "<字符串>"], // 可包含多种基调, 例如: ["探寻中", "焦虑的"]
    "question_type": "<字符串: '探索型', '实用型', '事实型', '表达型'>",

    // 4. 星星的连接与成长潜力 (Connection & Growth Potential)
    "connection_potential": <整数, 1-5>, // 这颗星有多大可能性与其他重要人生主题产生连接？
    "suggested_follow_up": "<字符串: 一个开放式的、共情的问题，以鼓励用户进行更深入的思考>",
    
    // 5. 卡片展示内容 (Card Content)
    "card_summary": "<字符串: 一句话总结，捕捉这次觉察的精髓>"
  }


  **各字段详细说明:**

  1.  **insight_level (觉察深度等级)**: 这是最关键的指标。评估自我觉察的*深度*。
      *   **1: 星尘 (Stardust)**: 琐碎、事实性或表面的问题 (例如："今天天气怎么样？", "推荐一首歌")。这类星星非常暗淡，会迅速消逝。
      *   **2: 微光 (Faint Star)**: 日常的想法或简单的偏好 (例如："我好像有点不开心", "我该看什么电影?")。
      *   **3: 寻常星 (Common Star)**: 真正的自我反思或对个人行为的提问 (例如："我为什么总是拖延？", "如何处理和同事的关系?")。这是有意义星星的基准线。
      *   **4: 启明星 (Guiding Star)**: 展现了深度的坦诚，探索了核心信念、价值观或重要的人生事件 (例如："我害怕失败，这是否源于我的童年经历？", "我对人生的意义感到迷茫")。
      *   **5: 超新星 (Supernova)**: 一次深刻的、可能改变人生的顿悟，或一个足以重塑对生活、爱或自我看法的根本性洞见 (例如："我终于意识到，我一直追求的不是成功，而是他人的认可", "我决定放下怨恨，与自己和解")。

  2.  **initial_luminosity (初始亮度)**: 直接根据 \`insight_level.value\` 进行映射。
      *   1 -> 10, 2 -> 30, 3 -> 60, 4 -> 90, 5 -> 100。
      *   系统将使用此数值来计算星星的"半衰期"。

  3.  **primary_category (主要类别)**: 从此列表中选择最贴切的类别：
      *   \`relationships\`: 爱情、家庭、友谊、社交互动。
      *   \`personal_growth\`: 技能、习惯、自我认知、自信。
      *   \`career_and_purpose\`: 工作、抱负、人生方向、意义。
      *   \`emotional_wellbeing\`: 心理健康、情绪、压力、疗愈。
      *   \`philosophy_and_existence\`: 生命、死亡、价值观、信仰。
      *   \`creativity_and_passion\`: 爱好、灵感、艺术。
      *   \`daily_life\`: 日常、实用、普通事务。

  4.  **tags (标签)**: 生成具体、有意义的标签，用于连接星星。避免使用"工作"这样的宽泛词，应使用"职业倦怠"、"自我价值"或"原生家庭"等更具体的标签。

  5.  **emotional_tone (情感基调)**: 从列表中选择1-2个: \`探寻中\`, \`思考的\`, \`焦虑的\`, \`充满希望的\`, \`感激的\`, \`困惑的\`, \`忧郁的\`, \`坚定的\`, \`中性的\`。

  6.  **question_type (问题类型)**:
      *   \`探索型\`: 关于自我的"为什么"或"如果"类问题。
      *   \`实用型\`: 寻求解决方案的"如何做"类问题。
      *   \`事实型\`: 有客观答案的问题。
      *   \`表达型\`: 更多是情感的陈述，而非一个疑问。

  7.  **connection_potential (连接潜力)**: 评估该主题的基础性程度。
      *   1-2: 非常具体或琐碎的话题。
      *   3: 常见的人生议题。
      *   4-5: 一个普世的人类主题，如"爱"、"失落"、"人生意义"，极有可能形成一个主要星座。

  8.  **suggested_follow_up (建议的追问)**: 构思一个自然、不带评判的开放式问题，以引导用户进行下一步的觉察。这将用于"AI主动提问"功能。

  9.  **card_summary (卡片摘要)**: 将问答的核心洞见提炼成一句精炼、有力的总结，用于在卡片上展示给用户。

  **示例:**

  - 问题: "我发现自己总是在讨好别人，即使这让我自己很累。我为什么会这样？"
  - 回答: "这可能源于你内心深处对被接纳和被爱的渴望，或许在成长过程中，你学会了将他人的需求置于自己之上，以此来获得安全感和价值感。认识到这一点，是改变的开始。"

  **期望的JSON输出:**
  {
    "insight_level": {
      "value": 4,
      "description": "启明星"
    },
    "initial_luminosity": 90,
    "primary_category": "personal_growth",
    "tags": ["people_pleasing", "self_worth", "childhood_patterns", "setting_boundaries"],
    "emotional_tone": ["探寻中", "思考的"],
    "question_type": "探索型",
    "connection_potential": 5,
    "suggested_follow_up": "当你尝试不讨好别人时，你内心最担心的声音是什么？",
    "card_summary": "我认识到我的讨好行为，源于对被接纳的深层渴望。"
  }`,s={model:n.model||"gpt-3.5-turbo",messages:[{role:"user",content:i}],temperature:.3,max_tokens:5e3,response_format:{type:"json_object"}};try{console.log(`🔍 发送标签分析请求到 ${n.provider} API...`),console.log(`📤 请求体: ${JSON.stringify(s)}`),console.log(`🔑 使用端点: ${n.endpoint}`),console.log(`📋 使用模型: ${n.model}`);const u=((o=n.apiKey)==null?void 0:o.replace(/[^\x20-\x7E]/g,""))||"",d=await fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(s)});if(!d.ok){const c=await d.text();throw console.error(`❌ API响应错误 (${d.status}): ${c}`),new Error(`AI API error: ${d.status} - ${c}`)}const h=await d.json();console.log("Raw API response: ",JSON.stringify(h,null,2));let a="";if(h.choices&&h.choices[0]&&h.choices[0].message?(a=((l=h.choices[0].message.content)==null?void 0:l.trim())||"",console.log(`Tag analysis - Parsed content: "${a.slice(0,100)}..."`),console.log(`Tag analysis - Content length: ${a.length}`)):console.warn("API response structure abnormal:",JSON.stringify(h,null,2)),!a)return console.warn("⚠️ API返回了空内容，使用备用方案"),cr(e,t);try{const c=a.replace(/^```json\n?/,"").replace(/\n?```$/,"").trim();console.log(`🧹 清理后的内容: "${c.slice(0,100)}..."`);const f=JSON.parse(c);return!f.tags||!Array.isArray(f.tags)?(console.warn("⚠️ 解析的JSON缺少必要的tags字段或格式不正确"),cr(e,t)):(f.category||(f.category="existential"),(!f.emotionalTone||!["positive","neutral","contemplative","seeking"].includes(f.emotionalTone))&&(f.emotionalTone="contemplative"),(!f.keywords||!Array.isArray(f.keywords))&&(f.keywords=f.tags.slice(0,3)),console.log("✅ JSON解析成功:",f),f)}catch(c){console.error("❌ 无法解析API响应内容:",a),console.error("❌ 解析错误:",c),console.warn("⚠️ AI响应不是有效的JSON，使用备用方案");const f=a.match(/\{[\s\S]*\}/);if(f)try{const g=f[0];console.log("🔍 尝试从响应中提取JSON:",g);const v=JSON.parse(g);if(v.tags&&Array.isArray(v.tags))return console.log("✅ 成功从响应中提取JSON数据"),v}catch(g){console.warn("⚠️ 提取的JSON仍然无效:",g)}return cr(e,t)}}catch(u){return console.error("❌ API请求失败:",u),cr(e,t)}},hu=(e,t)=>{if(!e.tags||!t.tags||e.tags.length===0||t.tags.length===0)return 0;const n=new Set(e.tags.map(f=>f.toLowerCase().trim())),r=new Set(t.tags.map(f=>f.toLowerCase().trim())),i=new Set([...n].filter(f=>r.has(f))),s=new Set([...n,...r]);if(s.size===0)return 0;const o=i.size/s.size;let l=0;const u=n.size*r.size;for(const f of n)for(const g of r)(f.includes(g)||g.includes(f)||yy(f,g))&&l++;const d=u>0?l/u:0,h=e.primary_category===t.primary_category?.3:0,a=e.emotional_tone&&t.emotional_tone&&e.emotional_tone.some(f=>t.emotional_tone.includes(f))?.2:0,c=o*.5+d*.3+h+a;return Math.min(1,c)},yy=(e,t)=>[["love","romance","heart","relationship","connection","intimacy"],["family","parents","children","home","roots","legacy","connection"],["friendship","social","trust","connection","support","loyalty"],["career","work","vocation","profession","achievement","success"],["education","learning","knowledge","skills","wisdom","growth"],["health","wellness","fitness","balance","vitality","self-care"],["finance","money","wealth","abundance","security","resources"],["spirituality","faith","soul","meaning","divine","practice"],["emotions","feelings","expression","awareness","processing"],["happiness","joy","fulfillment","contentment","bliss","satisfaction"],["anxiety","fear","worry","stress","uncertainty","overwhelm"],["grief","loss","sadness","mourning","healing","acceptance"],["anger","frustration","resentment","boundaries","release"],["shame","guilt","regret","inadequacy","worthiness","forgiveness"],["identity","self","authenticity","values","discovery","integration"],["purpose","meaning","calling","mission","direction","contribution"],["growth","development","evolution","improvement","transformation"],["resilience","strength","adaptation","recovery","endurance"],["creativity","expression","inspiration","imagination","innovation","artistry"],["wisdom","insight","perspective","understanding","discernment","reflection"],["communication","expression","listening","understanding","clarity","connection"],["intimacy","closeness","vulnerability","trust","bonding","openness"],["boundaries","limits","protection","respect","space","autonomy"],["conflict","resolution","understanding","healing","growth","peace"],["trust","faith","reliability","consistency","safety","honesty"],["meaning","purpose","significance","values","understanding","exploration"],["mindfulness","presence","awareness","attention","consciousness","being"],["gratitude","appreciation","thankfulness","recognition","abundance"],["legacy","impact","contribution","remembrance","influence","heritage"],["values","principles","ethics","morality","beliefs","priorities"],["change","transition","adaptation","adjustment","evolution","transformation"],["decision","choice","discernment","wisdom","judgment","crossroads"],["future","planning","vision","direction","goals","possibilities"],["past","history","memories","reflection","lessons","integration"],["letting-go","release","surrender","acceptance","closure","freedom"],["nature","environment","connection","outdoors","harmony","elements"],["society","community","culture","belonging","contribution","citizenship"],["justice","fairness","equality","rights","advocacy","ethics"],["service","contribution","helping","impact","giving","purpose"],["technology","digital","tools","innovation","adaptation","balance"],["growth","development","improvement","evolution","change","transformation"],["purpose","meaning","mission","calling","significance","direction"],["connection","relationship","bond","intimacy","belonging","attachment"],["reflection","insight","awareness","understanding","perspective","wisdom"]].some(r=>r.includes(e.toLowerCase())&&r.includes(t.toLowerCase())),vy=(e,t,n=.1,r=6)=>!e.tags||e.tags.length===0?[]:t.filter(s=>s.id!==e.id&&s.tags&&s.tags.length>0).map(s=>{var a,c;const o=hu(e,s),l=((a=e.tags)==null?void 0:a.filter(f=>{var g;return(g=s.tags)==null?void 0:g.some(v=>v.toLowerCase()===f.toLowerCase())}))||[],u=((c=e.tags)==null?void 0:c.filter(f=>{var g;return!l.includes(f)&&((g=s.tags)==null?void 0:g.some(v=>yy(f.toLowerCase(),v.toLowerCase())))}))||[],d=[...l,...u],h=l.length>0?Math.min(1,o+l.length*.1):o;return{star:s,similarity:h,sharedTags:d,exactMatchCount:l.length,relatedMatchCount:u.length}}).filter(s=>s.similarity>=n||s.exactMatchCount>0).sort((s,o)=>s.exactMatchCount!==o.exactMatchCount?o.exactMatchCount-s.exactMatchCount:o.similarity-s.similarity).slice(0,r),Zr=e=>{const t=[],n=new Set,r={};return console.log("🌟 Generating connections for",e.length,"stars"),e.forEach(i=>{if(!i.tags||i.tags.length===0){console.warn(`⚠️ Star "${i.question}" has no tags, skipping connections`);return}i.tags.forEach(s=>{const o=s.toLowerCase().trim();r[o]||(r[o]=[]),r[o].push(i.id)})}),Object.entries(r).forEach(([i,s])=>{if(s.length>1)for(let o=0;o<s.length;o++)for(let l=o+1;l<s.length;l++){const u=s[o],d=s[l],h=[u,d].sort().join("-");if(!n.has(h)){const a=e.find(f=>f.id===u),c=e.find(f=>f.id===d);if(a&&c){const f=hu(a,c),g=a.tags.filter(_=>c.tags.some(m=>_.toLowerCase()===m.toLowerCase())),v={id:`connection-${u}-${d}`,fromStarId:u,toStarId:d,strength:Math.max(.3,f),sharedTags:g.length>0?g:[i],constellationName:i};t.push(v),n.add(h),console.log("✨ Created constellation connection:",{tag:i,from:a.question.slice(0,30)+"...",to:c.question.slice(0,30)+"...",strength:v.strength.toFixed(3),sharedTags:v.sharedTags})}}}}),e.forEach(i=>{if(!i.tags||i.tags.length===0)return;vy(i,e,.25,3).forEach(({star:o,similarity:l,sharedTags:u})=>{const d=[i.id,o.id].sort().join("-");if(!n.has(d)&&l>=.25){const h={id:`connection-${i.id}-${o.id}`,fromStarId:i.id,toStarId:o.id,strength:l,sharedTags:u.length>0?u:["universal-wisdom"]};t.push(h),n.add(d),console.log("✨ Created similarity connection:",{from:i.question.slice(0,30)+"...",to:o.question.slice(0,30)+"...",strength:l.toFixed(3),sharedTags:h.sharedTags})}})}),console.log(`🎯 Generated ${t.length} total connections`),t},sp=()=>{try{console.log("🔍 === getSystemDefaultConfig: Starting debug ==="),console.log("🔍 All available env vars:",Object.keys(np));const e="openai",t="sk-PWWiJaQvPXNvubR7NUKfpaWdRUVKmTEJdl3db1HRF8vgfCeG",n="https://x666.me/v1/chat/completions",r="gemini-2.5-flash-preview-05-20";console.log("🔍 Raw environment variables:"),console.log("  VITE_DEFAULT_PROVIDER =",JSON.stringify(e)),console.log("  VITE_DEFAULT_API_KEY =",t?`"${t.slice(0,8)}..." (length: ${t.length})`:"undefined/empty"),console.log("  VITE_DEFAULT_ENDPOINT =",JSON.stringify(n)),console.log("  VITE_DEFAULT_MODEL =",JSON.stringify(r)),console.log("🔍 import.meta.env contains:");for(const[i,s]of Object.entries(np))i.startsWith("VITE_")&&console.log(`  ${i} =`,JSON.stringify(s));if(t&&n){const i=e||"openai",s=r||(i==="gemini"?"gemini-1.5-flash-latest":"gpt-3.5-turbo");console.log("✅ Found complete environment configuration!"),console.log(`  Provider: ${i}`),console.log(`  Model: ${s}`),console.log(`  Endpoint: ${n}`),console.log(`  API Key: ${t.slice(0,8)}... (${t.length} chars)`);const o={provider:i,apiKey:t,endpoint:n,model:s};return console.log("🔍 Returning config:",JSON.stringify({...o,apiKey:"[HIDDEN]"})),o}console.log("❌ Incomplete environment configuration"),console.log(`  envApiKey exists: ${!!t}`),console.log(`  envEndpoint exists: ${!!n}`),n&&typeof n=="string"&&n.includes("请填入")&&(console.log("⚠️  Endpoint contains Chinese placeholder text - this suggests .env.local is not being loaded properly"),console.log("⚠️  Current endpoint value:",n)),console.log("🔍 No complete API config in environment variables, checking for built-in config...")}catch(e){console.error("❌ Error reading environment config:",e)}return console.log("⚠️  No default config found, please check .env.local file"),{}};let xe={};const qt="stelloracle-ai-config",pS="1.1.0",mu=e=>{xe={...xe,...e,_version:pS,_lastUpdated:new Date().toISOString()};try{localStorage.setItem(qt,JSON.stringify(xe)),console.log("✅ AI配置已保存到本地存储"),localStorage.setItem(`${qt}-backup`,JSON.stringify(xe))}catch(t){console.error("❌ 无法保存AI配置到本地存储:",t)}},Un=()=>{try{console.log("🔧 === getAIConfig: Starting fresh config load ===");const e=window.location.search.includes("clearconfig")||sessionStorage.getItem("force-config-refresh")==="true";e&&(console.log("🧹 Force clearing all cached configurations..."),localStorage.removeItem(qt),localStorage.removeItem(`${qt}-backup`),sessionStorage.removeItem("force-config-refresh"),xe={});const t=localStorage.getItem(qt);if(console.log("📦 localStorage content for",qt,":",t),t&&!e){const i=JSON.parse(t);if(console.log("📋 Parsed stored config:",i),i.apiKey&&i.endpoint)return xe=i,console.log("✅ Using stored user configuration"),console.log(`📋 Config: provider=${xe.provider}, model=${xe.model}, endpoint=${xe.endpoint}`),xe}const n=localStorage.getItem(`${qt}-backup`);if(n&&!e){const i=JSON.parse(n);if(i.apiKey&&i.endpoint)return xe=i,console.log("⚠️ Restored from backup user config"),localStorage.setItem(qt,n),xe}console.log("🔍 No user config found, checking system default...");const r=sp();if(console.log("🔍 System default config result:",r),Object.keys(r).length>0)return xe=r,console.log("🔄 Using system default configuration"),console.log("🔍 Final config being returned:",JSON.stringify({...xe,apiKey:"[HIDDEN]"})),xe;console.warn("⚠️ No valid configuration found anywhere, will use mock data"),xe={}}catch(e){console.error("❌ Error getting AI config:",e);const t=sp();Object.keys(t).length>0?(xe=t,console.log("🔄 Using system default config after error")):xe={}}return xe},Dl=()=>{const e=["love","family","friendship","career","education","health","finance","spirituality"],t=["emotions","happiness","anxiety","grief","anger","shame"],n=["identity","purpose","growth","resilience","creativity","wisdom"],r=["communication","intimacy","boundaries","conflict","trust"],i=["meaning","mindfulness","gratitude","legacy","values"],s=["change","decision","future","past","letting-go"],o=["nature","society","justice","service","technology"];return[...e,...t,...n,...r,...i,...s,...o]},gu=()=>{try{const e=Un();return console.log("🔍 检查API配置..."),!e||Object.keys(e).length===0?(console.warn("⚠️ 未找到API配置，将使用模拟数据"),!1):(e.provider||(console.warn("⚠️ 缺少API提供商配置，将使用默认值: openai"),e.provider="openai"),e.apiKey?e.endpoint?(e.model||(console.warn("⚠️ 缺少模型名称，将使用默认值"),e.model=e.provider==="gemini"?"gemini-1.5-flash-latest":"gpt-3.5-turbo"),console.log(`✅ API配置检查完成: 提供商=${e.provider}, 端点=${e.endpoint}, 模型=${e.model}`),mu(e),!0):(console.error("❌ 缺少API端点，无法进行API调用"),!1):(console.error("❌ 缺少API密钥，无法进行API调用"),!1))}catch(e){return console.error("❌ 检查API配置时出错:",e),!1}};setTimeout(()=>{console.log("🚀 初始化AI服务配置..."),gu()},1e3);const xy=async(e,t,n)=>{console.log("🧠 开始分析对话的觉察价值..."),console.log("用户问题:",e),console.log("AI回复:",t);try{const r=n||Un();return!r.apiKey||!r.endpoint?(console.warn("⚠️ 没有AI配置，使用模拟觉察分析"),op(e,t)):(console.log("🤖 使用AI进行觉察价值分析"),await hS(e,t,r))}catch(r){return console.warn("❌ 觉察分析失败，使用备用方案:",r),op(e,t)}},hS=async(e,t,n)=>{var s,o;const r=`
你是一位专业的心理洞察分析师。请分析以下对话是否具有自我觉察的价值。

用户问题: "${e}"
AI回答: "${t}"

请判断这段对话是否帮助用户产生了自我觉察、情绪洞察或个人成长的洞见。

觉察价值的判断标准：
1. HIGH（高价值）：触及深层自我认知、价值观反思、行为模式认识、情绪根源探索
2. MEDIUM（中等价值）：涉及个人情感、人际关系思考、生活态度调整
3. LOW（低价值）：一般性建议、事实性信息、浅层交流
4. NONE（无价值）：纯粹的信息咨询、技术问题、日常闲聊

重要要求：后续问题必须以用户第一人称视角表达，像用户自己在思考和提问，而不是AI询问用户。

例如：
- 错误："你觉得这种情绪是什么时候开始的？"
- 正确："我这种情绪是什么时候开始的呢？"
- 错误："你希望这种关系如何发展？"  
- 正确："我希望这种关系如何发展呢？"

请严格按照以下JSON格式返回分析结果，不要添加任何其他文字：

{
  "hasInsight": <boolean: 是否有觉察价值>,
  "insightLevel": "<string: low/medium/high>",
  "insightType": "<string: 觉察类型，如'自我认知'、'情绪洞察'、'关系反思'等>",
  "keyInsights": ["<string: 关键洞察点1>", "<string: 关键洞察点2>"],
  "emotionalPattern": "<string: 识别到的情绪或行为模式>",
  "suggestedReflection": "<string: 建议的深入思考方向>",
  "followUpQuestions": ["<string: 用户第一人称后续探索问题1>", "<string: 用户第一人称后续探索问题2>"]
}
`,i={model:n.model||"gpt-3.5-turbo",messages:[{role:"user",content:r}],temperature:.3,max_tokens:2e3,response_format:{type:"json_object"}};try{const l=((s=n.apiKey)==null?void 0:s.replace(/[^\x20-\x7E]/g,""))||"",u=await fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(i)});if(!u.ok){const f=await u.text();throw console.error(`觉察分析API错误 (${u.status}): ${f}`),new Error(`Awareness API error: ${u.status}`)}const d=await u.json();if(console.log("觉察分析原始响应:",JSON.stringify(d,null,2)),!d.choices||!d.choices[0]||!d.choices[0].message)throw new Error("Invalid awareness analysis response structure");const h=((o=d.choices[0].message.content)==null?void 0:o.trim())||"";console.log("觉察分析内容:",h);const a=h.replace(/^```json\n?/,"").replace(/\n?```$/,"").trim(),c=JSON.parse(a);if(typeof c.hasInsight!="boolean")throw new Error("Invalid hasInsight field");return console.log("✅ 觉察分析完成:",c),c}catch(l){throw console.error("❌ AI觉察分析调用失败:",l),l}},op=(e,t)=>{const n=e.toLowerCase(),r=t.toLowerCase(),i=["为什么","原因","内心","感受","恐惧","焦虑","担心","困惑","意义","价值观","目标","梦想","关系","家庭","自己","成长","改变","选择","决定","未来","过去","痛苦","快乐","孤独","自信","自我","认识","理解","接受","原谅"],s=["感觉","想法","看法","态度","习惯","行为","情绪","心情","压力","疲惫","兴奋","满足","失望","希望","期待","担忧"];let o=0,l=0;const u=`${n} ${r}`;i.forEach(_=>{u.includes(_)&&o++}),s.forEach(_=>{u.includes(_)&&l++});let d="low",h=!1;o>=2?(d="high",h=!0):o>=1||l>=3?(d="medium",h=!0):l>=1&&(d="low",h=!0);let a="自我探索",c="思考模式",f="继续深入思考这个话题",g=["我对此还有什么其他想法？","这让我想到了什么？"];(u.includes("感受")||u.includes("情绪"))&&(a="情绪洞察",c="情绪觉察模式",f="观察和理解自己的情绪反应",g=["我这种情绪是什么时候开始的？","在什么情况下我会有类似感受？"]),(u.includes("关系")||u.includes("家庭")||u.includes("朋友"))&&(a="关系反思",c="人际互动模式",f="思考人际关系中的互动模式",g=["在其他关系中我是否也有类似情况？","我希望这种关系如何发展？"]),(u.includes("目标")||u.includes("未来")||u.includes("梦想"))&&(a="人生规划",c="目标导向思维",f="明确自己真正想要的人生方向",g=["什么阻碍了我实现这个目标？","如果没有任何限制，我会如何规划？"]);const v=h?[`识别到${a}的重要性`,"开始深入思考个人内在体验"]:[];return{hasInsight:h,insightLevel:d,insightType:a,keyInsights:v,emotionalPattern:c,suggestedReflection:f,followUpQuestions:g}},mS=Object.freeze(Object.defineProperty({__proto__:null,analyzeAwarenessValue:xy,analyzeStarContent:gy,calculateStarSimilarity:hu,checkApiConfiguration:gu,findSimilarStars:vy,generateAIResponse:Mo,generateSmartConnections:Zr,getAIConfig:Un,getMainTagSuggestions:Dl,setAIConfig:mu,validateAIConfig:my},Symbol.toStringTag,{value:"Module"})),gS=e=>({positive:"充满希望的",contemplative:"思考的",seeking:"探寻中",neutral:"中性的"})[e]||"探寻中",yS=e=>({relationships:"relationships",personal_growth:"personal_growth",life_direction:"career_and_purpose",wellbeing:"emotional_wellbeing",material:"daily_life",creative:"creativity_and_passion",existential:"philosophy_and_existence"})[e]||"philosophy_and_existence",vS=e=>{const t=e.toLowerCase();return t.includes("为什么")||t.includes("why")||t.includes("是否")||t.includes("if")||t.includes("是不是")?"探索型":t.includes("如何")||t.includes("how to")||t.includes("方法")||t.includes("steps")?"实用型":t.includes("什么是")||t.includes("what is")||t.includes("谁")||t.includes("who")||t.includes("where")?"事实型":"探索型"},xS=e=>({relationships:"这种关系模式在你生活的其他方面是否也有体现？",personal_growth:"你觉得是什么阻碍了你在这方面的进一步成长？",career_and_purpose:"如果没有任何限制，你理想中的职业道路是什么样的？",emotional_wellbeing:"这种情绪是从什么时候开始的，有没有特定的触发点？",philosophy_and_existence:"这个信念对你日常生活的决策有什么影响？",creativity_and_passion:"你上一次完全沉浸在创造性活动中是什么时候？那感觉如何？",daily_life:"这个日常习惯如何影响了你的整体生活质量？"})[e]||"关于这个话题，你还有什么更深层次的感受或想法？",wy=[{id:"aries",name:"Aries",chineseName:"白羊座",description:"勇敢的开拓者，充满激情与活力",element:"fire",centerX:25,centerY:30,scale:1,stars:[{id:"aries-1",x:0,y:0,size:4,brightness:1,question:"我如何发现自己的勇气？",answer:"勇气如火星般燃烧，在行动中点燃，在挑战中壮大。",tags:["courage","leadership","action","passion","initiative"],category:"personal_growth",emotionalTone:"positive",isMainStar:!0},{id:"aries-2",x:-8,y:5,size:3,brightness:.8,question:"如何成为更好的领导者？",answer:"真正的领导者如北极星，不是最亮的，却为他人指引方向。",tags:["leadership","guidance","responsibility","vision"],category:"life_direction",emotionalTone:"contemplative"},{id:"aries-3",x:8,y:-3,size:2.5,brightness:.7,question:"我的激情在哪里？",answer:"激情如恒星核心的聚变，从内心深处释放无穷能量。",tags:["passion","energy","motivation","drive"],category:"personal_growth",emotionalTone:"seeking"},{id:"aries-4",x:3,y:8,size:2,brightness:.6,question:"如何开始新的征程？",answer:"每个新开始都是宇宙的重新创造，勇敢迈出第一步。",tags:["new_beginnings","adventure","courage","change"],category:"life_direction",emotionalTone:"positive"}],connections:[{fromStarId:"aries-1",toStarId:"aries-2",strength:.8,sharedTags:["leadership","courage"]},{fromStarId:"aries-1",toStarId:"aries-3",strength:.7,sharedTags:["passion","energy"]},{fromStarId:"aries-2",toStarId:"aries-4",strength:.6,sharedTags:["leadership","new_beginnings"]}]},{id:"taurus",name:"Taurus",chineseName:"金牛座",description:"稳重的建设者，追求美好与安全",element:"earth",centerX:75,centerY:25,scale:1,stars:[{id:"taurus-1",x:0,y:0,size:4,brightness:1,question:"如何建立稳定的生活？",answer:"稳定如大地般深厚，在耐心与坚持中慢慢积累。",tags:["stability","security","patience","persistence"],category:"wellbeing",emotionalTone:"contemplative",isMainStar:!0},{id:"taurus-2",x:-6,y:-4,size:3,brightness:.8,question:"什么是真正的财富？",answer:"真正的财富不在金库，而在心灵的富足与关系的深度。",tags:["wealth","abundance","values","material"],category:"material",emotionalTone:"contemplative"},{id:"taurus-3",x:7,y:6,size:2.5,brightness:.7,question:"如何欣赏生活中的美？",answer:"美如花朵在感恩的土壤中绽放，用心感受每个瞬间。",tags:["beauty","appreciation","senses","gratitude"],category:"wellbeing",emotionalTone:"positive"},{id:"taurus-4",x:2,y:-8,size:2,brightness:.6,question:"如何保持内心的平静？",answer:"平静如深山古井，不因外界波动而失去内在的宁静。",tags:["peace","calm","stability","inner_strength"],category:"wellbeing",emotionalTone:"contemplative"}],connections:[{fromStarId:"taurus-1",toStarId:"taurus-2",strength:.7,sharedTags:["stability","security"]},{fromStarId:"taurus-1",toStarId:"taurus-4",strength:.8,sharedTags:["stability","peace"]},{fromStarId:"taurus-3",toStarId:"taurus-4",strength:.6,sharedTags:["peace","appreciation"]}]},{id:"gemini",name:"Gemini",chineseName:"双子座",description:"好奇的探索者，善于沟通与学习",element:"air",centerX:50,centerY:70,scale:1,stars:[{id:"gemini-1",x:-4,y:0,size:3.5,brightness:.9,question:"如何提升我的沟通能力？",answer:"沟通如双星系统，倾听与表达相互环绕，创造和谐共鸣。",tags:["communication","expression","listening","connection"],category:"relationships",emotionalTone:"seeking",isMainStar:!0},{id:"gemini-2",x:4,y:0,size:3.5,brightness:.9,question:"如何平衡生活的多面性？",answer:"如月亮的阴晴圆缺，拥抱你内在的多重面向，它们都是完整的你。",tags:["balance","duality","adaptability","flexibility"],category:"personal_growth",emotionalTone:"contemplative",isMainStar:!0},{id:"gemini-3",x:0,y:-6,size:2.5,brightness:.7,question:"如何保持学习的热情？",answer:"好奇心如星际尘埃，在宇宙中永远飘散，永远发现新的世界。",tags:["learning","curiosity","knowledge","growth"],category:"personal_growth",emotionalTone:"positive"},{id:"gemini-4",x:0,y:6,size:2,brightness:.6,question:"如何建立深度的友谊？",answer:"友谊如星座，看似分散的点，实则由无形的引力紧密相连。",tags:["friendship","connection","loyalty","understanding"],category:"relationships",emotionalTone:"positive"}],connections:[{fromStarId:"gemini-1",toStarId:"gemini-2",strength:.9,sharedTags:["communication","balance"]},{fromStarId:"gemini-1",toStarId:"gemini-4",strength:.7,sharedTags:["communication","connection"]},{fromStarId:"gemini-2",toStarId:"gemini-3",strength:.6,sharedTags:["growth","adaptability"]}]},{id:"cancer",name:"Cancer",chineseName:"巨蟹座",description:"温暖的守护者，重视家庭与情感",element:"water",centerX:20,centerY:75,scale:1,stars:[{id:"cancer-1",x:0,y:0,size:4,brightness:1,question:"如何创造温暖的家？",answer:"家不在建筑中，而在心灵的港湾，用爱编织的安全感。",tags:["home","family","security","nurturing","love"],category:"relationships",emotionalTone:"positive",isMainStar:!0},{id:"cancer-2",x:-5,y:5,size:3,brightness:.8,question:"如何处理敏感的情感？",answer:"敏感如月光映水，既是脆弱也是力量，学会拥抱你的深度。",tags:["emotions","sensitivity","intuition","empathy"],category:"personal_growth",emotionalTone:"contemplative"},{id:"cancer-3",x:6,y:-3,size:2.5,brightness:.7,question:"如何照顾他人又不失自我？",answer:"如月亮照亮夜空却不失去自己的光芒，给予中保持自我的完整。",tags:["caring","boundaries","self_care","balance"],category:"relationships",emotionalTone:"seeking"},{id:"cancer-4",x:2,y:7,size:2,brightness:.6,question:"如何找到内心的安全感？",answer:"真正的安全感来自内心的根基，如深海般宁静而深邃。",tags:["security","inner_peace","self_trust","stability"],category:"wellbeing",emotionalTone:"contemplative"}],connections:[{fromStarId:"cancer-1",toStarId:"cancer-2",strength:.8,sharedTags:["emotions","nurturing"]},{fromStarId:"cancer-1",toStarId:"cancer-4",strength:.7,sharedTags:["security","home"]},{fromStarId:"cancer-2",toStarId:"cancer-3",strength:.6,sharedTags:["emotions","caring"]}]},{id:"leo",name:"Leo",chineseName:"狮子座",description:"自信的表演者，散发光芒与魅力",element:"fire",centerX:80,centerY:60,scale:1,stars:[{id:"leo-1",x:0,y:0,size:4.5,brightness:1,question:"如何建立真正的自信？",answer:"自信如太阳般从内心发光，不需要外界的认可来证明自己的价值。",tags:["confidence","self_worth","authenticity","inner_strength"],category:"personal_growth",emotionalTone:"positive",isMainStar:!0},{id:"leo-2",x:-6,y:-4,size:3,brightness:.8,question:"如何展现我的创造力？",answer:"创造力如恒星的光芒，需要勇气点燃，用热情维持燃烧。",tags:["creativity","expression","art","passion","uniqueness"],category:"creative",emotionalTone:"positive"},{id:"leo-3",x:7,y:5,size:2.5,brightness:.7,question:"如何成为他人的光芒？",answer:"如太阳照亮行星，真正的光芒在于启发他人发现自己的光。",tags:["inspiration","leadership","generosity","influence"],category:"relationships",emotionalTone:"positive"},{id:"leo-4",x:3,y:-7,size:2,brightness:.6,question:"如何平衡自我与谦逊？",answer:"真正的王者如太阳，强大而温暖，照亮一切却不炫耀自己。",tags:["humility","balance","wisdom","maturity"],category:"personal_growth",emotionalTone:"contemplative"}],connections:[{fromStarId:"leo-1",toStarId:"leo-2",strength:.8,sharedTags:["confidence","creativity"]},{fromStarId:"leo-1",toStarId:"leo-3",strength:.7,sharedTags:["confidence","leadership"]},{fromStarId:"leo-2",toStarId:"leo-3",strength:.6,sharedTags:["creativity","inspiration"]}]},{id:"virgo",name:"Virgo",chineseName:"处女座",description:"完美的工匠，追求精确与服务",element:"earth",centerX:30,centerY:50,scale:1,stars:[{id:"virgo-1",x:0,y:0,size:4,brightness:1,question:"如何在细节中找到完美？",answer:"完美不在无瑕，而在每个细节中倾注的爱与专注。",tags:["perfection","attention","craftsmanship","dedication"],category:"personal_growth",emotionalTone:"contemplative",isMainStar:!0},{id:"virgo-2",x:-5,y:6,size:3,brightness:.8,question:"如何更好地服务他人？",answer:"服务如星光，看似微小却能照亮他人前行的道路。",tags:["service","helping","contribution","purpose"],category:"relationships",emotionalTone:"positive"},{id:"virgo-3",x:6,y:-4,size:2.5,brightness:.7,question:"如何管理我的时间和精力？",answer:"时间如星辰运行，有序而精确，在规律中找到效率的美。",tags:["organization","efficiency","planning","discipline"],category:"life_direction",emotionalTone:"seeking"},{id:"virgo-4",x:2,y:8,size:2,brightness:.6,question:"如何接受不完美的自己？",answer:"如星空中的每颗星都有独特的光芒，不完美也是美的一种形式。",tags:["self_acceptance","growth","compassion","healing"],category:"personal_growth",emotionalTone:"contemplative"}],connections:[{fromStarId:"virgo-1",toStarId:"virgo-3",strength:.8,sharedTags:["perfection","organization"]},{fromStarId:"virgo-1",toStarId:"virgo-4",strength:.7,sharedTags:["perfection","growth"]},{fromStarId:"virgo-2",toStarId:"virgo-4",strength:.6,sharedTags:["service","compassion"]}]}],wS=()=>wy,_S=e=>wy.filter(t=>t.element===e),SS=(e,t=0,n=0)=>{const r=e.stars.map(s=>{const o=Array.isArray(s.emotional_tone)?s.emotional_tone:[gS(s.emotionalTone)],l=s.primary_category||yS(s.category);return{id:`${e.id}-${s.id}-${Date.now()}`,x:e.centerX+s.x*e.scale+t,y:e.centerY+s.y*e.scale+n,size:s.size,brightness:s.brightness,question:s.question,answer:s.answer,imageUrl:`https://images.pexels.com/photos/${Math.floor(Math.random()*2e6)+1e6}/pexels-photo-${Math.floor(Math.random()*2e6)+1e6}.jpeg`,createdAt:new Date,isSpecial:s.isMainStar||!1,tags:s.tags,primary_category:l,emotional_tone:o,question_type:s.question_type||vS(s.question),insight_level:s.insight_level||{value:s.isMainStar?4:3,description:s.isMainStar?"启明星":"寻常星"},initial_luminosity:s.initial_luminosity||(s.isMainStar?90:60),connection_potential:s.connection_potential||4,suggested_follow_up:s.suggested_follow_up||xS(l),card_summary:s.card_summary||s.question,isTemplate:!0,templateType:e.chineseName}}),i=[];return e.connections.forEach(s=>{const o=r.find(u=>u.id.includes(s.fromStarId)),l=r.find(u=>u.id.includes(s.toStarId));o&&l&&i.push({id:`connection-${o.id}-${l.id}`,fromStarId:o.id,toStarId:l.id,strength:s.strength,sharedTags:s.sharedTags,isTemplate:!0})}),{stars:r,connections:i}},ap=[{id:"self-1",question:"如果今天是你生命的最后一天，你最想做什么？",reflection:"生命的有限性让每个选择都变得珍贵，真正重要的事物会在这种思考中浮现。",tags:["life","priorities","meaning","death","values"],category:"existential",emotionalTone:"contemplative"},{id:"self-2",question:"你最害怕失去的是什么？为什么？",reflection:"恐惧往往指向我们最珍视的东西，了解恐惧就是了解自己的价值观。",tags:["fear","loss","values","attachment","security"],category:"personal_growth",emotionalTone:"seeking"},{id:"self-3",question:"如果你可以给10年前的自己一个建议，会是什么？",reflection:"回望过去的智慧往往是对当下最好的指引。",tags:["wisdom","growth","regret","learning","time"],category:"personal_growth",emotionalTone:"contemplative"},{id:"self-4",question:"什么时候你感到最像真正的自己？",reflection:"真实的自我在特定的时刻和环境中会自然流露，找到这些时刻就是找到回家的路。",tags:["authenticity","self","identity","freedom","truth"],category:"personal_growth",emotionalTone:"seeking"},{id:"relationship-1",question:"你在关系中最容易重复的模式是什么？",reflection:"我们在关系中的模式往往反映了内心深处的信念和恐惧。",tags:["relationships","patterns","behavior","awareness","growth"],category:"relationships",emotionalTone:"contemplative"},{id:"relationship-2",question:"如果你的朋友用三个词形容你，会是哪三个词？",reflection:"他人眼中的我们往往能揭示我们自己看不到的特质。",tags:["identity","perception","friendship","self_image","reflection"],category:"relationships",emotionalTone:"seeking"},{id:"relationship-3",question:"你最想对某个人说但一直没说的话是什么？",reflection:"未说出的话语往往承载着我们最深的情感和遗憾。",tags:["communication","regret","courage","expression","love"],category:"relationships",emotionalTone:"contemplative"},{id:"dreams-1",question:"如果金钱不是问题，你会如何度过你的一生？",reflection:"当外在限制被移除，内心真正的渴望就会显现。",tags:["dreams","freedom","purpose","passion","life_design"],category:"life_direction",emotionalTone:"positive"},{id:"dreams-2",question:"你小时候的梦想现在还重要吗？为什么？",reflection:"童年的梦想往往包含着我们最纯真的渴望，值得重新审视。",tags:["childhood","dreams","growth","change","authenticity"],category:"life_direction",emotionalTone:"contemplative"},{id:"dreams-3",question:"什么阻止了你追求真正想要的生活？",reflection:"障碍往往不在外界，而在我们内心的信念和恐惧中。",tags:["obstacles","fear","limiting_beliefs","courage","change"],category:"life_direction",emotionalTone:"seeking"},{id:"emotion-1",question:"你最近一次真正快乐是什么时候？那种感觉是什么样的？",reflection:"快乐的记忆是心灵的指南针，指向我们真正需要的方向。",tags:["happiness","joy","memory","fulfillment","gratitude"],category:"wellbeing",emotionalTone:"positive"},{id:"emotion-2",question:"如果你的情绪是一种天气，现在是什么天气？",reflection:"用自然的语言描述情绪，往往能带来更深的理解和接纳。",tags:["emotions","metaphor","awareness","feelings","weather"],category:"wellbeing",emotionalTone:"contemplative"},{id:"emotion-3",question:"你最想治愈内心的哪个部分？",reflection:"承认伤痛是治愈的第一步，每个伤口都包含着成长的种子。",tags:["healing","pain","growth","self_care","compassion"],category:"wellbeing",emotionalTone:"seeking"},{id:"creative-1",question:"如果你必须创造一件作品来代表现在的你，会是什么？",reflection:"创造是自我表达的最直接方式，作品往往比言语更能传达内心。",tags:["creativity","expression","art","identity","representation"],category:"creative",emotionalTone:"positive"},{id:"creative-2",question:"你最想学会的技能是什么？为什么？",reflection:"我们渴望学习的技能往往反映了内心未被满足的表达需求。",tags:["learning","skills","growth","curiosity","development"],category:"creative",emotionalTone:"seeking"},{id:"philosophy-1",question:"如果你可以知道一个关于宇宙的终极真理，你想知道什么？",reflection:"我们对终极真理的好奇往往反映了当下最困扰我们的问题。",tags:["truth","universe","meaning","curiosity","existence"],category:"existential",emotionalTone:"contemplative"},{id:"philosophy-2",question:"什么让你感到生命是有意义的？",reflection:"意义不是被发现的，而是被创造的，在我们的选择和行动中诞生。",tags:["meaning","purpose","life","significance","values"],category:"existential",emotionalTone:"contemplative"},{id:"philosophy-3",question:"如果今天是世界的最后一天，你会如何度过？",reflection:"末日的假设能够剥离一切不重要的东西，让真正珍贵的浮现。",tags:["priorities","death","meaning","love","presence"],category:"existential",emotionalTone:"contemplative"},{id:"growth-1",question:"你最想改变自己的哪个方面？为什么？",reflection:"改变的渴望往往指向我们对更好自己的向往，也反映了当下的不满足。",tags:["change","growth","improvement","self_development","aspiration"],category:"personal_growth",emotionalTone:"seeking"},{id:"growth-2",question:"你从最大的失败中学到了什么？",reflection:"失败是最严厉也是最慈悲的老师，它强迫我们成长。",tags:["failure","learning","resilience","wisdom","growth"],category:"personal_growth",emotionalTone:"contemplative"},{id:"growth-3",question:"如果你可以重新开始，你会做什么不同的选择？",reflection:"重新开始的幻想往往揭示了我们对当下生活的真实感受。",tags:["regret","choices","restart","wisdom","reflection"],category:"personal_growth",emotionalTone:"contemplative"}],kS=()=>{const e=Math.floor(Math.random()*ap.length);return ap[e]},lp=()=>({stars:[],connections:[]}),Lr=hy((e,t)=>{const n=()=>Un();return{constellation:lp(),activeStarId:null,isAsking:!1,isLoading:!1,pendingStarPosition:null,currentInspirationCard:null,hasTemplate:!1,templateInfo:null,addStar:async r=>{var y,x;const{constellation:i,pendingStarPosition:s}=t(),{stars:o}=i;console.log("===== User asked a question ====="),console.log(`Question: "${r}"`),e({isLoading:!0});const l=n();console.log("Retrieved AI config result:",{hasApiKey:!!l.apiKey,hasEndpoint:!!l.endpoint,provider:l.provider,model:l.model});const u=(s==null?void 0:s.x)??Math.random()*70+15,d=(s==null?void 0:s.y)??Math.random()*70+15,h={id:`star-${Date.now()}`,x:u,y:d,size:Math.random()*1.5+2,brightness:.6,question:r,answer:"",imageUrl:uS(),createdAt:new Date,isSpecial:!1,tags:[],primary_category:"philosophy_and_existence",emotional_tone:["探寻中"],question_type:"探索型",insight_level:{value:1,description:"星尘"},initial_luminosity:10,connection_potential:3,suggested_follow_up:"",card_summary:r,isTemplate:!1,isStreaming:!0},a=[...o,h];e({constellation:{stars:a,connections:i.connections},activeStarId:h.id,isAsking:!1,pendingStarPosition:null}),console.log("Starting AI response generation with streaming...");let c,f="";try{if(c=await Mo(r,l,k=>{f+=k,e(C=>({constellation:{...C.constellation,stars:C.constellation.stars.map(A=>A.id===h.id?{...A,answer:f}:A)}}))}),console.log(`Got AI response: "${c}"`),!c||c.trim().length===0)throw new Error("Empty AI response")}catch(w){console.warn("AI response failed, using fallback:",w),c=TS(r),console.log(`Fallback response: "${c}"`),f=c}const g=await gy(r,c,l),v={...h,size:Math.random()*1.5+2+(((y=g.insight_level)==null?void 0:y.value)||0)*.5,brightness:(g.initial_luminosity||60)/100,answer:f||c,isSpecial:Math.random()<.12||(((x=g.insight_level)==null?void 0:x.value)||0)>=4,tags:g.tags,primary_category:g.primary_category,emotional_tone:g.emotional_tone,question_type:g.question_type,insight_level:g.insight_level,initial_luminosity:g.initial_luminosity,connection_potential:g.connection_potential,suggested_follow_up:g.suggested_follow_up,card_summary:g.card_summary,isStreaming:!1};console.log("⭐ Final star with AI analysis:",{question:v.question,answer:v.answer,answerLength:v.answer.length,tags:v.tags,primary_category:v.primary_category,emotional_tone:v.emotional_tone,insight_level:v.insight_level,connection_potential:v.connection_potential});const _=a.map(w=>w.id===h.id?v:w),m=Zr(_);return e({constellation:{stars:_,connections:m},isLoading:!1}),v},drawInspirationCard:()=>{const r=kS();return console.log("🌟 Drawing inspiration card:",r.question),e({currentInspirationCard:r}),r},useInspirationCard:()=>{const{currentInspirationCard:r}=t();r&&(console.log("✨ Using inspiration card for new star"),e({isAsking:!0,currentInspirationCard:null}))},dismissInspirationCard:()=>{console.log("👋 Dismissing inspiration card"),e({currentInspirationCard:null})},viewStar:r=>{e({activeStarId:r}),console.log(`👁️ Viewing star: ${r}`)},hideStarDetail:()=>{e({activeStarId:null}),console.log("👁️ Hiding star detail")},setIsAsking:(r,i)=>{e({isAsking:r,pendingStarPosition:i??null})},regenerateConnections:()=>{const{constellation:r}=t(),i=Zr(r.stars);console.log("Regenerating connections, found:",i.length),e({constellation:{...r,connections:i}})},applyTemplate:r=>{console.log(`🌟 Applying template: ${r.chineseName}`);const{stars:i,connections:s}=SS(r),{constellation:o}=t(),l=o.stars.filter(a=>!a.isTemplate),u=[...i,...l],d=Zr(u),h=[...s,...d];e({constellation:{stars:u,connections:h},activeStarId:null,hasTemplate:!0,templateInfo:{name:r.chineseName,element:r.element}}),console.log(`✨ Applied template with ${i.length} stars and ${s.length} connections`)},clearConstellation:()=>{e({constellation:lp(),activeStarId:null,hasTemplate:!1,templateInfo:null}),console.log("🧹 Cleared constellation")},updateStarTags:(r,i)=>{e(s=>{const o=s.constellation.stars.map(u=>u.id===r?{...u,tags:i}:u),l=Zr(o);return{constellation:{stars:o,connections:l}}}),console.log(`🏷️ Updated tags for star ${r}`)}}}),TS=e=>{const t=e.toLowerCase();if(t.includes("爱")||t.includes("恋")||t.includes("love")||t.includes("relationship")){const r=["当心灵敞开时，星辰便会排列成行。爱会流向那些勇敢拥抱脆弱的人。","如同双星相互环绕，真正的连接需要独立与统一并存。","当灵魂以真实的光芒闪耀时，宇宙会密谋让它们相遇。","爱不是被找到的，而是被认出的，就像在异国天空中看到熟悉的星座。","真爱如月圆之夜的潮汐，既有规律可循，又充满神秘的力量。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("目标")||t.includes("意义")||t.includes("purpose")||t.includes("meaning")){const r=["你的目标如星云诞生恒星般展开——缓慢、美丽、不可避免。","宇宙不会询问星辰的目标；它们只是闪耀。你也应如此。","意义从你的天赋与世界需求的交汇处涌现，如光线穿过三棱镜般折射。","你的目标写在你最深的喜悦和服务意愿的语言中。","生命的意义不在远方，而在每一个当下的选择与行动中绽放。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("成功")||t.includes("事业")||t.includes("成就")||t.includes("success")||t.includes("career")||t.includes("achieve")){const r=["成功如超新星般绽放——突然的辉煌源于长久耐心的燃烧。","通往成就的道路如银河系的螺旋臂般蜿蜒，每个转弯都揭示新的可能性。","真正的成功不在于积累，而在于你为他人黑暗中带来的光明。","如行星找到轨道般，成功来自于将你的努力与自然力量对齐。","成功的种子早已种在你的内心，只需要时间和坚持的浇灌。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("恐惧")||t.includes("害怕")||t.includes("焦虑")||t.includes("fear")||t.includes("anxiety")||t.includes("worry")){const r=["恐惧是你潜能投下的阴影。转向光明，看它消失。","勇气不是没有恐惧，而是在可能性的星光下与之共舞。","如流星进入大气层时燃烧得明亮，转化需要拥抱火焰。","你的恐惧是古老的星尘；承认它们，然后让它们在宇宙风中飘散。","恐惧是成长的前奏，如黎明前的黑暗，预示着光明的到来。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("未来")||t.includes("将来")||t.includes("命运")||t.includes("future")||t.includes("destiny")){const r=["未来是你通过连接选择之星而创造的星座。","时间如恒星风般流淌，将可能性的种子带到肥沃的时刻。","你的命运不像恒星般固定，而像彗星般流动，由你的方向塑造。","未来以直觉的语言低语；用心聆听，而非恐惧。","明天的轮廓隐藏在今日的每一个微小决定中。"];return r[Math.floor(Math.random()*r.length)]}if(t.includes("快乐")||t.includes("幸福")||t.includes("喜悦")||t.includes("happiness")||t.includes("joy")||t.includes("fulfillment")){const r=["快乐不是目的地，而是穿越体验宇宙的旅行方式。","喜悦如星光在水面闪烁——存在于你选择看见它的每个时刻。","满足来自于将你内在的星座与外在的表达对齐。","真正的快乐从内心辐射，如恒星产生自己的光和热。","幸福如花朵，在感恩的土壤中最容易绽放。"];return r[Math.floor(Math.random()*r.length)]}const n=["星辰低语着未曾踏足的道路，然而你的旅程始终忠于内心的召唤。","如月光映照水面，你所寻求的既在那里又不在那里。请深入探寻。","古老的光芒穿越时空抵达你的眸；耐心将揭示匆忙所掩盖的真相。","宇宙编织着可能性的图案。你的问题已经包含了它的答案。","天体尽管相距遥远却和谐共舞。在生命的盛大芭蕾中找到你的节拍。","当星系在虚空中螺旋前进时，你的道路在黑暗中蜿蜒向着遥远的光明。","你思想的星云包含着尚未诞生的恒星种子。请滋养它们。","时间如恒星风般流淌，将你存在的景观塑造成未知的形态。","星辰之间的虚空并非空无，而是充满潜能。拥抱你生命中的空间。","你的问题在宇宙中回响，带着星光承载的智慧归来。","宇宙无目的地扩张。你的旅程无需超越自身的理由。","星座是我们强加给混沌的图案。从随机的经验之星中创造意义。","你看到的光芒很久以前就开始了它的旅程。相信所揭示的，即使延迟。","宇宙尘埃变成恒星再变成尘埃。所有的转化对你都是可能的。","你意图的引力将体验拉入围绕你的轨道。明智地选择你所吸引的。"];return n[Math.floor(Math.random()*n.length)]},Hn=hy((e,t)=>({messages:[],isLoading:!1,conversationTitle:"",conversationAwareness:{overallLevel:"none",conversationDepth:0,isAnalyzing:!1,insights:[],topicProgression:[]},addUserMessage:n=>{const r={id:`user-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:n,isUser:!0,timestamp:new Date};e(i=>({messages:[...i.messages,r]}))},addAIMessage:n=>{const r={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:n,isUser:!1,timestamp:new Date};e(i=>({messages:[...i.messages,r]}))},addStreamingAIMessage:(n="")=>{const r=`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i={id:r,text:n,isUser:!1,timestamp:new Date,isStreaming:!0};return e(s=>({messages:[...s.messages,i]})),r},updateStreamingMessage:(n,r)=>{e(i=>({messages:i.messages.map(s=>s.id===n?{...s,text:r}:s)}))},finalizeStreamingMessage:n=>{e(r=>({messages:r.messages.map(i=>i.id===n?{...i,isStreaming:!1}:i)}))},setLoading:n=>{e({isLoading:n})},clearMessages:()=>{e({messages:[],isLoading:!1})},startAwarenessAnalysis:n=>{e(r=>({messages:r.messages.map(i=>i.id===n?{...i,isAnalyzingAwareness:!0}:i)}))},completeAwarenessAnalysis:(n,r)=>{e(i=>({messages:i.messages.map(s=>s.id===n?{...s,isAnalyzingAwareness:!1,awarenessInsight:r}:s)})),t().updateConversationAwareness()},updateConversationAwareness:()=>{const{messages:n}=t(),r=n.filter(l=>!l.isUser&&l.awarenessInsight&&l.awarenessInsight.hasInsight).map(l=>l.awarenessInsight).filter(Boolean);let i="none",s=0;if(r.length>0){const l={high:r.filter(u=>u.insightLevel==="high").length,medium:r.filter(u=>u.insightLevel==="medium").length,low:r.filter(u=>u.insightLevel==="low").length};s=Math.min(100,l.high*30+l.medium*20+l.low*10),l.high>=2||l.high>=1&&l.medium>=2?i="high":l.medium>=2||l.medium>=1&&l.low>=3?i="medium":(l.low>=1||l.medium>=1)&&(i="low")}const o=r.map(l=>l.insightType).filter((l,u,d)=>d.indexOf(l)===u);e(l=>({conversationAwareness:{...l.conversationAwareness,overallLevel:i,conversationDepth:s,insights:r,topicProgression:o}}))},setConversationAnalyzing:n=>{e(r=>({conversationAwareness:{...r.conversationAwareness,isAnalyzing:n}}))},setConversationTitle:n=>{e({conversationTitle:n})},generateConversationTitle:async()=>{var r;const{messages:n}=t();if(!(n.length<2||t().conversationTitle))try{const{generateAIResponse:i}=await Tr(async()=>{const{generateAIResponse:h}=await Promise.resolve().then(()=>mS);return{generateAIResponse:h}},void 0),l=`请为以下对话生成一个简洁的标题（不超过10个字）：

${n.slice(0,Math.min(6,n.length)).map(h=>`${h.isUser?"用户":"AI"}：${h.text}`).join(`
`)}

要求：
- 标题要准确反映对话的核心主题
- 使用中文
- 不超过10个字
- 不要包含标点符号
- 直接返回标题，不要其他内容`,d=(await i(l)).replace(/["'""'']/g,"").replace(/[。！？，、；：]/g,"").replace(/[.!?,;:]/g,"").trim().substring(0,10);d&&(e({conversationTitle:d}),console.log("📝 已生成对话标题:",d))}catch(i){console.error("❌ 生成对话标题失败:",i);const s=((r=n.find(l=>l.isUser))==null?void 0:r.text)||"",o=s.length>10?s.substring(0,8)+"...":s||"新对话";e({conversationTitle:o})}}}));var _y={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var a=this||n;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var c=this||n;if(a=parseFloat(a),c.ctx||h(),typeof a<"u"&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a,n.ctx.currentTime);for(var f=0;f<c._howls.length;f++)if(!c._howls[f]._webAudio)for(var g=c._howls[f]._getSoundIds(),v=0;v<g.length;v++){var _=c._howls[f]._soundById(g[v]);_&&_._node&&(_._node.volume=_._volume*a)}return c}return c._volume},mute:function(a){var c=this||n;c.ctx||h(),c._muted=a,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a?0:c._volume,n.ctx.currentTime);for(var f=0;f<c._howls.length;f++)if(!c._howls[f]._webAudio)for(var g=c._howls[f]._getSoundIds(),v=0;v<g.length;v++){var _=c._howls[f]._soundById(g[v]);_&&_._node&&(_._node.muted=a?!0:_._muted)}return c},stop:function(){for(var a=this||n,c=0;c<a._howls.length;c++)a._howls[c].stop();return a},unload:function(){for(var a=this||n,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,h()),a},codecs:function(a){return(this||n)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||n;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var c=new Audio;c.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||n,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return a}if(!c||typeof c.canPlayType!="function")return a;var f=c.canPlayType("audio/mpeg;").replace(/^no$/,""),g=a._navigator?a._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),_=v&&parseInt(v[0].split("/")[1],10)<33,m=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,y=g.match(/Version\/(.*?) /),x=m&&y&&parseInt(y[1],10)<15;return a._codecs={mp3:!!(!_&&(f||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||n;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var c=function(f){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,a._releaseHtml5Audio(g)}catch{a.noAudio=!0;break}for(var v=0;v<a._howls.length;v++)if(!a._howls[v]._webAudio)for(var _=a._howls[v]._getSoundIds(),m=0;m<_.length;m++){var y=a._howls[v]._soundById(_[m]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}a._autoResume();var x=a.ctx.createBufferSource();x.buffer=a._scratchBuffer,x.connect(a.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),x.onended=function(){x.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var w=0;w<a._howls.length;w++)a._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),a}},_obtainHtml5Audio:function(){var a=this||n;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var c=this||n;return a._unlocked&&c._html5AudioPool.push(a),c},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!n.usingWebAudio)){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio){for(var f=0;f<a._howls[c]._sounds.length;f++)if(!a._howls[c]._sounds[f]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var g=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(g,g)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!n.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var c=0;c<a._howls.length;c++)a._howls[c]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var n=new t,r=function(a){var c=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(a)};r.prototype={init:function(a){var c=this;return n.ctx||h(),c._autoplay=a.autoplay||!1,c._format=typeof a.format!="string"?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src=typeof a.src!="string"?a.src:[a.src],c._volume=a.volume!==void 0?a.volume:1,c._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=a.onload?[{fn:a.onload}]:[],c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._onunlock=a.onunlock?[{fn:a.onunlock}]:[],c._onresume=[],c._webAudio=n.usingWebAudio&&!c._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var a=this,c=null;if(n.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var f=0;f<a._src.length;f++){var g,v;if(a._format&&a._format[f])g=a._format[f];else{if(v=a._src[f],typeof v!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&n.codecs(g)){c=a._src[f];break}}if(!c){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=c,a._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new i(a),a._webAudio&&o(a),a},play:function(a,c){var f=this,g=null;if(typeof a=="number")g=a,a=null;else{if(typeof a=="string"&&f._state==="loaded"&&!f._sprite[a])return null;if(typeof a>"u"&&(a="__default",!f._playLock)){for(var v=0,_=0;_<f._sounds.length;_++)f._sounds[_]._paused&&!f._sounds[_]._ended&&(v++,g=f._sounds[_]._id);v===1?a=null:g=null}}var m=g?f._soundById(g):f._inactiveSound();if(!m)return null;if(g&&!a&&(a=m._sprite||"__default"),f._state!=="loaded"){m._sprite=a,m._ended=!1;var y=m._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(g&&!m._paused)return c||f._loadQueue("play"),m._id;f._webAudio&&n._autoResume();var x=Math.max(0,m._seek>0?m._seek:f._sprite[a][0]/1e3),w=Math.max(0,(f._sprite[a][0]+f._sprite[a][1])/1e3-x),k=w*1e3/Math.abs(m._rate),C=f._sprite[a][0]/1e3,A=(f._sprite[a][0]+f._sprite[a][1])/1e3;m._sprite=a,m._ended=!1;var S=function(){m._paused=!1,m._seek=x,m._start=C,m._stop=A,m._loop=!!(m._loop||f._sprite[a][2])};if(x>=A){f._ended(m);return}var b=m._node;if(f._webAudio){var P=function(){f._playLock=!1,S(),f._refreshBuffer(m);var R=m._muted||f._muted?0:m._volume;b.gain.setValueAtTime(R,n.ctx.currentTime),m._playStart=n.ctx.currentTime,typeof b.bufferSource.start>"u"?m._loop?b.bufferSource.noteGrainOn(0,x,86400):b.bufferSource.noteGrainOn(0,x,w):m._loop?b.bufferSource.start(0,x,86400):b.bufferSource.start(0,x,w),k!==1/0&&(f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),k)),c||setTimeout(function(){f._emit("play",m._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?P():(f._playLock=!0,f.once("resume",P),f._clearTimer(m._id))}else{var E=function(){b.currentTime=x,b.muted=m._muted||f._muted||n._muted||b.muted,b.volume=m._volume*n.volume(),b.playbackRate=m._rate;try{var R=b.play();if(R&&typeof Promise<"u"&&(R instanceof Promise||typeof R.then=="function")?(f._playLock=!0,S(),R.then(function(){f._playLock=!1,b._unlocked=!0,c?f._loadQueue():f._emit("play",m._id)}).catch(function(){f._playLock=!1,f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):c||(f._playLock=!1,S(),f._emit("play",m._id)),b.playbackRate=m._rate,b.paused){f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||m._loop?f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),k):(f._endTimers[m._id]=function(){f._ended(m),b.removeEventListener("ended",f._endTimers[m._id],!1)},b.addEventListener("ended",f._endTimers[m._id],!1))}catch(F){f._emit("playerror",m._id,F)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=f._src,b.load());var O=window&&window.ejecta||!b.readyState&&n._navigator.isCocoonJS;if(b.readyState>=3||O)E();else{f._playLock=!0,f._state="loading";var B=function(){f._state="loaded",E(),b.removeEventListener(n._canPlayEvent,B,!1)};b.addEventListener(n._canPlayEvent,B,!1),f._clearTimer(m._id)}}return m._id},pause:function(a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(a)}}),c;for(var f=c._getSoundIds(a),g=0;g<f.length;g++){c._clearTimer(f[g]);var v=c._soundById(f[g]);if(v&&!v._paused&&(v._seek=c.seek(f[g]),v._rateSeek=0,v._paused=!0,c._stopFade(f[g]),v._node))if(c._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),c._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||c._emit("pause",v?v._id:null)}return c},stop:function(a,c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(a)}}),f;for(var g=f._getSoundIds(a),v=0;v<g.length;v++){f._clearTimer(g[v]);var _=f._soundById(g[v]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,f._stopFade(g[v]),_._node&&(f._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),f._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&f._clearSound(_._node))),c||f._emit("stop",_._id))}return f},mute:function(a,c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(a,c)}}),f;if(typeof c>"u")if(typeof a=="boolean")f._muted=a;else return f._muted;for(var g=f._getSoundIds(c),v=0;v<g.length;v++){var _=f._soundById(g[v]);_&&(_._muted=a,_._interval&&f._stopFade(_._id),f._webAudio&&_._node?_._node.gain.setValueAtTime(a?0:_._volume,n.ctx.currentTime):_._node&&(_._node.muted=n._muted?!0:a),f._emit("mute",_._id))}return f},volume:function(){var a=this,c=arguments,f,g;if(c.length===0)return a._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var v=a._getSoundIds(),_=v.indexOf(c[0]);_>=0?g=parseInt(c[0],10):f=parseFloat(c[0])}else c.length>=2&&(f=parseFloat(c[0]),g=parseInt(c[1],10));var m;if(typeof f<"u"&&f>=0&&f<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,c)}}),a;typeof g>"u"&&(a._volume=f),g=a._getSoundIds(g);for(var y=0;y<g.length;y++)m=a._soundById(g[y]),m&&(m._volume=f,c[2]||a._stopFade(g[y]),a._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(f,n.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=f*n.volume()),a._emit("volume",m._id))}else return m=g?a._soundById(g):a._sounds[0],m?m._volume:0;return a},fade:function(a,c,f,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(a,c,f,g)}}),v;a=Math.min(Math.max(0,parseFloat(a)),1),c=Math.min(Math.max(0,parseFloat(c)),1),f=parseFloat(f),v.volume(a,g);for(var _=v._getSoundIds(g),m=0;m<_.length;m++){var y=v._soundById(_[m]);if(y){if(g||v._stopFade(_[m]),v._webAudio&&!y._muted){var x=n.ctx.currentTime,w=x+f/1e3;y._volume=a,y._node.gain.setValueAtTime(a,x),y._node.gain.linearRampToValueAtTime(c,w)}v._startFadeInterval(y,a,c,f,_[m],typeof g>"u")}}return v},_startFadeInterval:function(a,c,f,g,v,_){var m=this,y=c,x=f-c,w=Math.abs(x/.01),k=Math.max(4,w>0?g/w:g),C=Date.now();a._fadeTo=f,a._interval=setInterval(function(){var A=(Date.now()-C)/g;C=Date.now(),y+=x*A,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),m._webAudio?a._volume=y:m.volume(y,a._id,!0),_&&(m._volume=y),(f<c&&y<=f||f>c&&y>=f)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,m.volume(f,a._id),m._emit("fade",a._id))},k)},_stopFade:function(a){var c=this,f=c._soundById(a);return f&&f._interval&&(c._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,c.volume(f._fadeTo,a),f._fadeTo=null,c._emit("fade",a)),c},loop:function(){var a=this,c=arguments,f,g,v;if(c.length===0)return a._loop;if(c.length===1)if(typeof c[0]=="boolean")f=c[0],a._loop=f;else return v=a._soundById(parseInt(c[0],10)),v?v._loop:!1;else c.length===2&&(f=c[0],g=parseInt(c[1],10));for(var _=a._getSoundIds(g),m=0;m<_.length;m++)v=a._soundById(_[m]),v&&(v._loop=f,a._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=f,f&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,a.playing(_[m])&&(a.pause(_[m],!0),a.play(_[m],!0)))));return a},rate:function(){var a=this,c=arguments,f,g;if(c.length===0)g=a._sounds[0]._id;else if(c.length===1){var v=a._getSoundIds(),_=v.indexOf(c[0]);_>=0?g=parseInt(c[0],10):f=parseFloat(c[0])}else c.length===2&&(f=parseFloat(c[0]),g=parseInt(c[1],10));var m;if(typeof f=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,c)}}),a;typeof g>"u"&&(a._rate=f),g=a._getSoundIds(g);for(var y=0;y<g.length;y++)if(m=a._soundById(g[y]),m){a.playing(g[y])&&(m._rateSeek=a.seek(g[y]),m._playStart=a._webAudio?n.ctx.currentTime:m._playStart),m._rate=f,a._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):m._node&&(m._node.playbackRate=f);var x=a.seek(g[y]),w=(a._sprite[m._sprite][0]+a._sprite[m._sprite][1])/1e3-x,k=w*1e3/Math.abs(m._rate);(a._endTimers[g[y]]||!m._paused)&&(a._clearTimer(g[y]),a._endTimers[g[y]]=setTimeout(a._ended.bind(a,m),k)),a._emit("rate",m._id)}}else return m=a._soundById(g),m?m._rate:a._rate;return a},seek:function(){var a=this,c=arguments,f,g;if(c.length===0)a._sounds.length&&(g=a._sounds[0]._id);else if(c.length===1){var v=a._getSoundIds(),_=v.indexOf(c[0]);_>=0?g=parseInt(c[0],10):a._sounds.length&&(g=a._sounds[0]._id,f=parseFloat(c[0]))}else c.length===2&&(f=parseFloat(c[0]),g=parseInt(c[1],10));if(typeof g>"u")return 0;if(typeof f=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,c)}}),a;var m=a._soundById(g);if(m)if(typeof f=="number"&&f>=0){var y=a.playing(g);y&&a.pause(g,!0),m._seek=f,m._ended=!1,a._clearTimer(g),!a._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=f);var x=function(){y&&a.play(g,!0),a._emit("seek",g)};if(y&&!a._webAudio){var w=function(){a._playLock?setTimeout(w,0):x()};setTimeout(w,0)}else x()}else if(a._webAudio){var k=a.playing(g)?n.ctx.currentTime-m._playStart:0,C=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(C+k*Math.abs(m._rate))}else return m._node.currentTime;return a},playing:function(a){var c=this;if(typeof a=="number"){var f=c._soundById(a);return f?!f._paused:!1}for(var g=0;g<c._sounds.length;g++)if(!c._sounds[g]._paused)return!0;return!1},duration:function(a){var c=this,f=c._duration,g=c._soundById(a);return g&&(f=c._sprite[g._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,f=0;f<c.length;f++)c[f]._paused||a.stop(c[f]._id),a._webAudio||(a._clearSound(c[f]._node),c[f]._node.removeEventListener("error",c[f]._errorFn,!1),c[f]._node.removeEventListener(n._canPlayEvent,c[f]._loadFn,!1),c[f]._node.removeEventListener("ended",c[f]._endFn,!1),n._releaseHtml5Audio(c[f]._node)),delete c[f]._node,a._clearTimer(c[f]._id);var g=n._howls.indexOf(a);g>=0&&n._howls.splice(g,1);var v=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===a._src||a._src.indexOf(n._howls[f]._src)>=0){v=!1;break}return s&&v&&delete s[a._src],n.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,c,f,g){var v=this,_=v["_on"+a];return typeof c=="function"&&_.push(g?{id:f,fn:c,once:g}:{id:f,fn:c}),v},off:function(a,c,f){var g=this,v=g["_on"+a],_=0;if(typeof c=="number"&&(f=c,c=null),c||f)for(_=0;_<v.length;_++){var m=f===v[_].id;if(c===v[_].fn&&m||!c&&m){v.splice(_,1);break}}else if(a)g["_on"+a]=[];else{var y=Object.keys(g);for(_=0;_<y.length;_++)y[_].indexOf("_on")===0&&Array.isArray(g[y[_]])&&(g[y[_]]=[])}return g},once:function(a,c,f){var g=this;return g.on(a,c,f,1),g},_emit:function(a,c,f){for(var g=this,v=g["_on"+a],_=v.length-1;_>=0;_--)(!v[_].id||v[_].id===c||a==="load")&&(setTimeout((function(m){m.call(this,c,f)}).bind(g,v[_].fn),0),v[_].once&&g.off(a,v[_].fn,v[_].id));return g._loadQueue(a),g},_loadQueue:function(a){var c=this;if(c._queue.length>0){var f=c._queue[0];f.event===a&&(c._queue.shift(),c._loadQueue()),a||f.action()}return c},_ended:function(a){var c=this,f=a._sprite;if(!c._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(c._ended.bind(c,a),100),c;var g=!!(a._loop||c._sprite[f][2]);if(c._emit("end",a._id),!c._webAudio&&g&&c.stop(a._id,!0).play(a._id),c._webAudio&&g){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=n.ctx.currentTime;var v=(a._stop-a._start)*1e3/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),v)}return c._webAudio&&!g&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),n._autoSuspend()),!c._webAudio&&!g&&c.stop(a._id,!0),c},_clearTimer:function(a){var c=this;if(c._endTimers[a]){if(typeof c._endTimers[a]!="function")clearTimeout(c._endTimers[a]);else{var f=c._soundById(a);f&&f._node&&f._node.removeEventListener("ended",c._endTimers[a],!1)}delete c._endTimers[a]}return c},_soundById:function(a){for(var c=this,f=0;f<c._sounds.length;f++)if(a===c._sounds[f]._id)return c._sounds[f];return null},_inactiveSound:function(){var a=this;a._drain();for(var c=0;c<a._sounds.length;c++)if(a._sounds[c]._ended)return a._sounds[c].reset();return new i(a)},_drain:function(){var a=this,c=a._pool,f=0,g=0;if(!(a._sounds.length<c)){for(g=0;g<a._sounds.length;g++)a._sounds[g]._ended&&f++;for(g=a._sounds.length-1;g>=0;g--){if(f<=c)return;a._sounds[g]._ended&&(a._webAudio&&a._sounds[g]._node&&a._sounds[g]._node.disconnect(0),a._sounds.splice(g,1),f--)}}},_getSoundIds:function(a){var c=this;if(typeof a>"u"){for(var f=[],g=0;g<c._sounds.length;g++)f.push(c._sounds[g]._id);return f}else return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=n.ctx.createBufferSource(),a._node.bufferSource.buffer=s[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,n.ctx.currentTime),c},_cleanBuffer:function(a){var c=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return c;if(n._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),f))try{a.bufferSource.buffer=n._scratchBuffer}catch{}return a.bufferSource=null,c},_clearSound:function(a){var c=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);c||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(a){this._parent=a,this.init()};i.prototype={init:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,c._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,f=n._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),a._node.gain.setValueAtTime(f,n.ctx.currentTime),a._node.paused=!0,a._node.connect(n.masterGain)):n.noAudio||(a._node=n._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(n._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=c._src,a._node.preload=c._preload===!0?"auto":c._preload,a._node.volume=f*n.volume(),a._node.load()),a},reset:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(a._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),a._node.removeEventListener(n._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,c=a._parent;c._duration===1/0&&(c._duration=Math.ceil(a._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var s={},o=function(a){var c=a._src;if(s[c]){a._duration=s[c].duration,d(a);return}if(/^data:[^;]+;base64,/.test(c)){for(var f=atob(c.split(",")[1]),g=new Uint8Array(f.length),v=0;v<f.length;++v)g[v]=f.charCodeAt(v);u(g.buffer,a)}else{var _=new XMLHttpRequest;_.open(a._xhr.method,c,!0),_.withCredentials=a._xhr.withCredentials,_.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(m){_.setRequestHeader(m,a._xhr.headers[m])}),_.onload=function(){var m=(_.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}u(_.response,a)},_.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete s[c],a.load())},l(_)}},l=function(a){try{a.send()}catch{a.onerror()}},u=function(a,c){var f=function(){c._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&c._sounds.length>0?(s[c._src]=v,d(c,v)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(a).then(g).catch(f):n.ctx.decodeAudioData(a,g,f)},d=function(a,c){c&&!a._duration&&(a._duration=c.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),c=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=c?parseInt(c[1],10):null;if(a&&f&&f<9){var g=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!g&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};e.Howler=n,e.Howl=r,typeof Dr<"u"?(Dr.HowlerGlobal=t,Dr.Howler=n,Dr.Howl=r,Dr.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,i,s,o,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var d=u._orientation;if(r=typeof r!="number"?d[1]:r,i=typeof i!="number"?d[2]:i,s=typeof s!="number"?d[3]:s,o=typeof o!="number"?d[4]:o,l=typeof l!="number"?d[5]:l,typeof n=="number")u._orientation=[n,r,i,s,o,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,i,s,o,l);else return d;return u},Howl.prototype.init=function(n){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var o=i._getSoundIds(r),l=0;l<o.length;l++){var u=i._soundById(o[l]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&t(u,s),s==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",u._id);else return u._stereo}return i},Howl.prototype.pos=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")o._pos=[n,r,i];else return o._pos;for(var l=o._getSoundIds(s),u=0;u<l.length;u++){var d=o._soundById(l[u]);if(d)if(typeof n=="number")d._pos=[n,r,i],d._node&&((!d._panner||d._panner.pan)&&t(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setPosition(n,r,i)),o._emit("pos",d._id);else return d._pos}return o},Howl.prototype.orientation=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof n=="number")o._orientation=[n,r,i];else return o._orientation;for(var l=o._getSoundIds(s),u=0;u<l.length;u++){var d=o._soundById(l[u]);if(d)if(typeof n=="number")d._orientation=[n,r,i],d._node&&(d._panner||(d._pos||(d._pos=o._pos||[0,0,-.5]),t(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setOrientation(n,r,i)),o._emit("orientation",d._id);else return d._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,i,s,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var l=n._getSoundIds(s),u=0;u<l.length;u++)if(o=n._soundById(l[u]),o){var d=o._pannerAttr;d={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:d.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:d.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:d.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:d.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:d.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:d.panningModel};var h=o._panner;h||(o._pos||(o._pos=n._pos||[0,0,-.5]),t(o,"spatial"),h=o._panner),h.coneInnerAngle=d.coneInnerAngle,h.coneOuterAngle=d.coneOuterAngle,h.coneOuterGain=d.coneOuterGain,h.distanceModel=d.distanceModel,h.maxDistance=d.maxDistance,h.refDistance=d.refDistance,h.rolloffFactor=d.rolloffFactor,h.panningModel=d.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,n.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var t=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(_y);const CS={starClick:"https://assets.codepen.io/21542/click-2.mp3",starLight:"https://assets.codepen.io/21542/pop-up-on.mp3",starReveal:"https://assets.codepen.io/21542/pop-down.mp3",ambient:"https://assets.codepen.io/21542/ambient-loop.mp3"},tn={};Object.entries(CS).forEach(([e,t])=>{tn[e]=new _y.Howl({src:[t],volume:e==="ambient"?.2:.5,loop:e==="ambient"})});function Z(e,t={}){const n=e==="uiClick"?"starClick":e;tn[n]?(t.volume!==void 0&&tn[n].volume(t.volume),t.loop!==void 0&&tn[n].loop(t.loop),tn[n].play(),console.log(`🔊 Playing sound: ${e}`)):console.warn(`⚠️ Sound not found: ${e}`)}const AS=()=>{tn.ambient.playing()||tn.ambient.play()},bS=()=>{tn.ambient.stop()},PS=({x:e,y:t,size:n,brightness:r,isSpecial:i,isActive:s,isGrowing:o=!1,onClick:l,tags:u=[],category:d="existential",connectionCount:h=0})=>p.jsx("div",{style:{position:"absolute",left:`${e}px`,top:`${t}px`,transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",width:`${n*1.5}px`,height:`${n*1.5}px`,cursor:"pointer",zIndex:o?20:10},onClick:l,title:`${d.replace("_"," ")} • ${u.slice(0,3).join(", ")}`,children:p.jsxs(I.div,{className:`star-container ${s?"pulse":""} ${i?"special twinkle":""}`,initial:{opacity:0,scale:0},animate:{opacity:o?1:r,scale:o?2:1},whileHover:{scale:o?2:1.5,opacity:1},whileTap:{scale:.9},style:{width:`${n}px`,height:`${n}px`,display:"flex",justifyContent:"center",alignItems:"center"},children:[p.jsx(I.div,{className:"star-core",style:{width:"100%",height:"100%",backgroundColor:"#fff",borderRadius:"50%",filter:s?"blur(0)":"blur(1px)"}}),o&&p.jsx("svg",{className:"star-lines",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200%",height:"200%"},children:[0,1,2,3].map(a=>p.jsx(I.line,{x1:"50%",y1:"50%",x2:`${50+Math.cos(a*Math.PI/2)*40}%`,y2:`${50+Math.sin(a*Math.PI/2)*40}%`,stroke:"#fff",strokeWidth:"1",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:[0,.8,0]},transition:{duration:1.5,delay:a*.2,repeat:1/0,repeatDelay:1}},a))})]})}),dt=({size:e=20,animated:t=!1,iconColor:n="#ffffff",className:r="",color:i,isSpecial:s=!1})=>{const o=n||i||(s?"#FFD700":"#ffffff");return p.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`star-ray-icon ${r}`,children:[t?p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:o,className:"animate-pulse"}):p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:o}),[0,1,2,3,4,5,6,7].map(l=>{const u=l*45*(Math.PI/180),d=12+Math.cos(u)*3,h=12+Math.sin(u)*3,a=12+Math.cos(u)*8,c=12+Math.sin(u)*8;return t?p.jsx("line",{x1:d,y1:h,x2:a,y2:c,stroke:o,strokeWidth:"2",strokeLinecap:"round",className:"animate-ray",style:{animation:`rayExpand 0.5s ease-out ${.1+l*.05}s both`,transformOrigin:"12px 12px"}},l):p.jsx("line",{x1:d,y1:h,x2:a,y2:c,stroke:o,strokeWidth:"2",strokeLinecap:"round"},l)}),p.jsx("style",{jsx:!0,children:`
        @keyframes rayExpand {
          0% {
            stroke-dasharray: 5;
            stroke-dashoffset: 5;
          }
          100% {
            stroke-dasharray: 5;
            stroke-dashoffset: 0;
          }
        }
        .animate-ray {
          stroke-dasharray: 5;
          stroke-dashoffset: 0;
        }
      `})]})},jS=()=>{const{constellation:e,activeStarId:t,viewStar:n,setIsAsking:r,drawInspirationCard:i,pendingStarPosition:s,isLoading:o}=Lr(),{messages:l,isLoading:u}=Hn(),{stars:d,connections:h}=e,[a,c]=T.useState({width:0,height:0}),[f,g]=T.useState({x:0,y:0}),[v,_]=T.useState([]),[m,y]=T.useState(0);T.useEffect(()=>{const S=()=>{c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",S),S(),()=>window.removeEventListener("resize",S)},[]);const x=T.useCallback(S=>{g({x:S.clientX,y:S.clientY})},[]),w=S=>{Z("starClick"),n(S)},k=(S,b)=>{const P=Date.now();_(E=>[...E,{id:P,x:S,y:b}]),setTimeout(()=>{_(E=>E.filter(O=>O.id!==P))},1e3)},C=S=>{if(console.log("🌌 Constellation clicked at:",S.clientX,S.clientY),console.log("🎯 Click target:",S.target),l.length>0||u){console.log("💬 聊天会话活跃中，跳过灵感卡片显示");return}if(((E,O)=>E<200&&O<200||E>window.innerWidth-200&&O<200)(S.clientX,S.clientY)){console.log("🚫 Click in button area, ignoring");return}if(!o)if(S.target.classList.contains("constellation-area")){console.log("✅ Valid constellation area click");const E=Date.now(),O=S.target.getBoundingClientRect();(S.clientX-O.left)/O.width*100,(S.clientY-O.top)/O.height*100,k(S.clientX,S.clientY),Z("starReveal"),console.log("🌟 主屏幕点击 - 显示灵感卡片（复用右键逻辑）");const B=i();console.log("📇 灵感卡片已生成:",B.question),y(E)}else console.log("❌ Click not on constellation area")},A=S=>{if(o)return;if(l.length>0||u){console.log("💬 聊天会话活跃中，跳过灵感卡片显示（右键）");return}if(S.preventDefault(),console.log("🔍 右键点击事件触发"),S.target.classList.contains("constellation-area")){const P=S.target.getBoundingClientRect();(S.clientX-P.left)/P.width*100,(S.clientY-P.top)/P.height*100,k(S.clientX,S.clientY),Z("starReveal"),console.log("🌟 右键点击 - 显示灵感卡片");const E=i();console.log("📇 灵感卡片已生成:",E.question)}};return p.jsxs("div",{className:"absolute inset-0 overflow-hidden constellation-area",onClick:C,onContextMenu:A,onMouseMove:x,children:[p.jsx("div",{className:"hover-indicator",style:{left:`${f.x}px`,top:`${f.y}px`}}),o&&s&&p.jsx("div",{className:"absolute pointer-events-none z-20",style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, -50%)"},children:p.jsx(I.div,{initial:{scale:0,opacity:0},animate:{scale:[.8,1.2,.8],opacity:[.4,.8,.4]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center",children:p.jsx(dt,{size:48,animated:!0,className:"text-cosmic-accent"})})}),p.jsx(St,{children:v.map(S=>p.jsx(I.div,{className:"star-sparkle",style:{left:S.x-10,top:S.y-10},initial:{scale:0,rotate:0,opacity:0},animate:{scale:1,rotate:180,opacity:1},exit:{scale:0,rotate:360,opacity:0}},S.id))}),a.width>0&&a.height>0&&p.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:5,overflow:"visible"},children:p.jsxs("svg",{width:a.width,height:a.height,style:{position:"absolute",top:0,left:0,overflow:"visible"},children:[p.jsx("defs",{children:h.map(S=>{const b=d.find(K=>K.id===S.fromStarId),P=d.find(K=>K.id===S.toStarId);if(!b||!P)return null;const E=(()=>{var K,z,M,$,j,L;if(S.constellationName){const D=S.constellationName.toLowerCase();if(["love","romance","heart","relationship","intimacy"].includes(D))return"255, 105, 180";if(["family","parents","children","home","roots"].includes(D))return"255, 165, 0";if(["friendship","social","trust","loyalty"].includes(D))return"124, 252, 0";if(["career","work","profession","vocation"].includes(D))return"255, 215, 0";if(["education","learning","knowledge","skills"].includes(D))return"30, 144, 255";if(["health","wellness","fitness","balance"].includes(D))return"50, 205, 50";if(["finance","money","wealth","abundance"].includes(D))return"218, 165, 32";if(["spirituality","faith","soul","divine"].includes(D))return"147, 112, 219";if(["emotions","feelings","expression","awareness"].includes(D))return"255, 99, 71";if(["happiness","joy","fulfillment","contentment"].includes(D))return"255, 255, 0";if(["anxiety","fear","worry","stress"].includes(D))return"70, 130, 180";if(["grief","loss","sadness","mourning"].includes(D))return"75, 0, 130";if(["identity","self","authenticity","values"].includes(D))return"0, 206, 209";if(["purpose","meaning","calling","mission"].includes(D))return"138, 43, 226";if(["growth","development","evolution","improvement"].includes(D))return"60, 179, 113";if(["resilience","strength","adaptation","recovery"].includes(D))return"178, 34, 34";if(["creativity","expression","imagination","innovation"].includes(D))return"255, 140, 0";if(["wisdom","insight","perspective","understanding"].includes(D))return"186, 85, 211";if(["mindfulness","presence","awareness"].includes(D))return"240, 230, 140";if(["change","transition","transformation"].includes(D))return"0, 191, 255";const X=D.split("").reduce((me,Pe)=>me+Pe.charCodeAt(0),0),te=X%360,le=70+X%20,H=65+X%15,G=(1-Math.abs(2*H/100-1))*le/100,oe=G*(1-Math.abs(te/60%2-1)),it=H/100-G/2;let Ye,ze,W;return te<60?(Ye=G,ze=oe,W=0):te<120?(Ye=oe,ze=G,W=0):te<180?(Ye=0,ze=G,W=oe):te<240?(Ye=0,ze=oe,W=G):te<300?(Ye=oe,ze=0,W=G):(Ye=G,ze=0,W=oe),Ye=Math.round((Ye+it)*255),ze=Math.round((ze+it)*255),W=Math.round((W+it)*255),`${Ye}, ${ze}, ${W}`}return(K=S.sharedTags)!=null&&K.includes("love")||(z=S.sharedTags)!=null&&z.includes("romance")?"255, 182, 193":(M=S.sharedTags)!=null&&M.includes("wisdom")||($=S.sharedTags)!=null&&$.includes("purpose")?"138, 95, 189":(j=S.sharedTags)!=null&&j.includes("success")||(L=S.sharedTags)!=null&&L.includes("career")?"255, 215, 0":"255, 255, 255"})(),O=b.x/100*a.width,B=b.y/100*a.height,R=P.x/100*a.width,F=P.y/100*a.height;return p.jsxs("linearGradient",{id:`gradient-${S.id}`,gradientUnits:"userSpaceOnUse",x1:O,y1:B,x2:R,y2:F,children:[p.jsx("stop",{offset:"0%",stopColor:`rgba(${E}, 0)`}),p.jsx("stop",{offset:"25%",stopColor:`rgba(${E}, 0.2)`}),p.jsx("stop",{offset:"50%",stopColor:`rgba(${E}, 0.6)`}),p.jsx("stop",{offset:"75%",stopColor:`rgba(${E}, 0.2)`}),p.jsx("stop",{offset:"100%",stopColor:`rgba(${E}, 0)`})]},S.id)})}),h.map((S,b)=>{const P=d.find(M=>M.id===S.fromStarId),E=d.find(M=>M.id===S.toStarId);if(!P||!E)return null;const O=P.x/100*a.width,B=P.y/100*a.height,R=E.x/100*a.width,F=E.y/100*a.height,K=P.id===t||E.id===t,z=S.strength||.3;return p.jsxs("g",{children:[p.jsx(I.line,{x1:O,y1:B,x2:R,y2:F,stroke:`url(#gradient-${S.id})`,strokeWidth:K?6:Math.max(3,z*5),filter:"blur(3px)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:K?[.2,.5,.2]:[.05,Math.max(.15,z*.3),.05]},transition:{pathLength:{duration:2,ease:"easeInOut",delay:b*.1},opacity:{duration:4+Math.random()*2,repeat:1/0,ease:"easeInOut",delay:b*.3}}}),p.jsx(I.line,{x1:O,y1:B,x2:R,y2:F,stroke:`url(#gradient-${S.id})`,strokeWidth:K?3:Math.max(1.5,z*2.5),filter:"blur(1px)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:K?[.3,.7,.3]:[.1,Math.max(.25,z*.5),.1]},transition:{pathLength:{duration:2.5,ease:"easeInOut",delay:b*.15},opacity:{duration:5+Math.random()*3,repeat:1/0,ease:"easeInOut",delay:b*.4+.5}}}),p.jsx(I.line,{x1:O,y1:B,x2:R,y2:F,stroke:`url(#gradient-${S.id})`,strokeWidth:K?1:Math.max(.5,z),initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:K?[.5,1,.5]:[.2,Math.max(.4,z*.8),.2]},transition:{pathLength:{duration:3,ease:"easeInOut",delay:b*.2},opacity:{duration:6+Math.random()*4,repeat:1/0,ease:"easeInOut",delay:b*.5+1}}}),K&&p.jsx(I.circle,{cx:O,cy:B,r:"1.5",fill:"rgba(255, 255, 255, 0.9)",initial:{opacity:0},animate:{cx:[O,R,O],cy:[B,F,B],opacity:[0,1,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]},S.id)})]})}),d.map(S=>{const b=S.x/100*a.width,P=S.y/100*a.height,E=S.id===t,O=h.filter(R=>R.fromStarId===S.id||R.toStarId===S.id).map(R=>R.fromStarId===S.id?R.toStarId:R.fromStarId),B=h.some(R=>(R.fromStarId===S.id||R.toStarId===S.id)&&R.strength>.4);return p.jsx(PS,{x:b,y:P,size:S.size*(B?1.2:1),brightness:S.brightness,isSpecial:S.isSpecial||B,isActive:E,onClick:()=>w(S.id),tags:S.tags,category:S.primary_category,connectionCount:O.length},S.id)})]})},ES=()=>{const e=["是的，毫无疑问。","相信你的直觉。","现在不是时候。","宇宙已经安排好了。","耐心等待，时机即将到来。","不要强求，顺其自然。","放手，让它去吧。","是时候改变方向了。","这个问题的答案就在你心中。","寻求更多信息后再决定。","绝对不要。","现在就行动。","接受它，然后前进。","你已经知道答案了。","这个决定将带来意想不到的结果。","重新思考你的问题。","寻求他人的建议。","相信这个过程。","答案将在梦中揭示。","观察自然的征兆。","是的，但不要操之过急。","不，但不要放弃希望。","暂时搁置这个问题。","专注于当下。","回顾过去的经验。","这不是正确的问题。","跟随你的心。","这是一个转折点。","答案就在你面前。","勇敢地面对恐惧。","等待更清晰的指引。","信任这个旅程。","接受不确定性。","改变你的视角。","这个问题需要更深入的思考。","现在是行动的时候了。","寻找平衡。","放下过去。","相信宇宙的时机。","答案将在意想不到的地方出现。","保持开放的心态。","这个决定将影响你的未来道路。","不要被表面现象迷惑。","寻找内在的智慧。","是的，如果你全心投入。","不，除非情况发生变化。","宇宙正在为你创造更好的机会。","这个挑战是一份礼物。","你比自己想象的更强大。","答案在星光中闪烁。"];return e[Math.floor(Math.random()*e.length)]},MS=e=>{const t={"是的，毫无疑问。":["有时宇宙会给予明确的指引，这是一个清晰的信号。","当道路如此清晰，勇敢前行是唯一的选择。","确定性是一种礼物，珍视这一刻的清晰。"],"相信你的直觉。":["内在的声音往往比理性更能接近真相。","直觉是灵魂的语言，它知道理性尚未发现的真理。","最深刻的智慧常常以感觉的形式出现。"],"现在不是时候。":["时机的重要性常被低估，耐心等待是一种智慧。","有些种子需要更长的时间才能发芽，给它应有的时间。","延迟并不意味着拒绝，只是宇宙的时间与我们的期望不同。"],"耐心等待，时机即将到来。":["等待的过程本身就是准备的一部分。","即将到来的转变需要你完全准备好。","黎明前的黑暗常常最为深沉。"],default:["每个答案都是一面镜子，反射出提问者内心的真相。","有时答案的价值不在于它的内容，而在于它引发的思考。","智慧不在于获得确定的答案，而在于提出更好的问题。","答案可能会随着时间的推移而揭示其更深层的含义。","星辰的指引是微妙的，需要安静的心灵才能理解。"]},n=t[e]||t.default;return n[Math.floor(Math.random()*n.length)]},NS=({card:e,onDismiss:t})=>{const{addStar:n}=Lr(),[r,i]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[a,c]=T.useState(!1),f=T.useRef(null),[g]=T.useState(()=>Array.from({length:12}).map((k,C)=>({cx:20+C%4*40+Math.random()*20,cy:20+Math.floor(C/4)*40+Math.random()*20,r:Math.random()*1.5+.5,duration:2+Math.random()*2,delay:Math.random()*2}))),[v]=T.useState(()=>Array.from({length:6}).map(()=>({left:`${20+Math.random()*60}%`,top:`${20+Math.random()*60}%`,duration:3+Math.random()*2,delay:Math.random()*2})));T.useEffect(()=>{const k=ES(),C=MS(k);o(k),u(C)},[]),T.useEffect(()=>{const k=setTimeout(()=>{c(!0)},0);return()=>clearTimeout(k)},[]);const _=()=>{Z("starClick"),t()},m=()=>{i(!r),Z("starClick")},y=()=>{d.trim()&&(console.log("发送消息:",d),n(d),h(""),Z("starClick"))},x=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),y())},w=`insp-${Date.now()}`;return xn.createPortal(p.jsxs(I.div,{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:999999},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(I.div,{className:"absolute inset-0 bg-black",style:{opacity:.7},initial:{opacity:0},animate:{opacity:.7},exit:{opacity:0},onClick:_}),p.jsx(I.div,{className:"star-card-container",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",damping:20},children:p.jsxs("div",{className:"star-card-wrapper",children:[p.jsxs(I.div,{className:"star-card",animate:{rotateY:r?180:0},transition:{duration:.6,type:"spring"},onClick:m,children:[p.jsx("div",{className:"star-card-face star-card-front",children:p.jsxs("div",{className:"star-card-bg",children:[p.jsx("div",{className:"star-card-constellation",children:p.jsxs("svg",{className:"constellation-svg",viewBox:"0 0 200 200",children:[p.jsx("defs",{children:p.jsxs("radialGradient",{id:`starGlow-${w}`,cx:"50%",cy:"50%",r:"50%",children:[p.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.8"}),p.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:"0"})]})}),g.map((k,C)=>p.jsx(I.circle,{cx:k.cx,cy:k.cy,r:k.r,fill:"rgba(255,255,255,0.6)",initial:{opacity:0},animate:a?{opacity:[.3,.8,.3]}:{opacity:0},transition:{duration:k.duration,repeat:a?1/0:0,delay:a?2+k.delay:0}},C)),p.jsx(I.circle,{cx:"100",cy:"100",r:"8",fill:`url(#starGlow-${w})`,initial:{scale:0},animate:a?{scale:1}:{scale:0},transition:{delay:a?.1:0,type:"spring",damping:15}}),[0,1,2,3,4,5,6,7].map(k=>p.jsx(I.line,{x1:"100",y1:"100",x2:100+Math.cos(k*Math.PI/4)*40,y2:100+Math.sin(k*Math.PI/4)*40,stroke:"#ffffff",strokeWidth:"2",initial:{pathLength:0,opacity:0},animate:a?{pathLength:1,opacity:[0,.8,0]}:{pathLength:0,opacity:0},transition:{duration:1.5,delay:a?k*.1:0,repeat:a?1/0:0,repeatDelay:a?1:0}},k))]})}),p.jsx(I.div,{className:"card-prompt",initial:{opacity:0,y:20},animate:a?{opacity:.7,y:0}:{opacity:0,y:20},transition:{delay:a?.5:0,duration:.3},children:p.jsx("p",{className:"text-center text-base text-neutral-300 font-normal",children:"翻开卡片，宇宙会回答你"})}),p.jsx("div",{className:"star-card-decorations",children:v.map((k,C)=>p.jsx(I.div,{className:"floating-particle",style:{left:k.left,top:k.top},initial:{y:0,opacity:.3},animate:a?{y:[-5,5,-5],opacity:[.3,.7,.3]}:{y:0,opacity:0},transition:{duration:k.duration,repeat:a?1/0:0,delay:a?2+k.delay:0}},C))})]})}),p.jsx("div",{className:"star-card-face star-card-back",children:p.jsxs("div",{className:"star-card-content flex flex-col h-full",children:[p.jsx(I.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:p.jsx("h3",{className:"answer-label text-xl font-semibold text-cosmic-accent text-center mb-6",children:"来自宇宙的答案"})}),p.jsx("div",{className:"answer-section flex-grow flex items-center justify-center px-6",children:p.jsx(I.div,{className:"answer-reveal text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,type:"spring",damping:20},children:p.jsx("p",{className:"answer-text text-3xl font-bold text-white mb-2 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:s})})}),p.jsx(I.div,{className:"reflection-section mt-auto mb-3 px-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:p.jsx("p",{className:"reflection-text text-[9px] text-neutral-400 italic text-center leading-tight tracking-wide",children:l})}),p.jsx(I.div,{className:"card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:p.jsx(I.div,{className:"input-ghost-wrapper w-full",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:20,delay:.7},children:p.jsxs("div",{className:"flex items-center gap-3 relative py-2 px-1",children:[p.jsx("input",{ref:f,type:"text",className:"flex-1 bg-transparent text-white placeholder-neutral-400 outline-none text-sm leading-relaxed border-0 border-b border-neutral-600/50 focus:border-cosmic-accent transition-colors duration-300",placeholder:"说说你的困惑吧",value:d,onChange:k=>h(k.target.value),onKeyPress:x,onClick:k=>k.stopPropagation()}),p.jsx(I.button,{className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${d.trim()?"bg-cosmic-accent/80 text-white":"bg-transparent text-neutral-400"}`,onClick:k=>{k.stopPropagation(),y()},disabled:!d.trim(),whileHover:d.trim()?{scale:1.1}:{},whileTap:d.trim()?{scale:.95}:{},children:p.jsx(dt,{size:14,animated:!!d.trim()})})]})})})]})})]}),p.jsx(I.div,{className:"star-card-glow",animate:{opacity:.4,scale:1.05},transition:{duration:.3}})]})})]}),document.body)};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=T.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>T.createElement("svg",{ref:h,...IS,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${LS(e)}`,l].join(" "),...d},[...t.map(([a,c])=>T.createElement(a,c)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=J("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=J("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=J("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=J("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=J("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=J("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=J("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=J("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=J("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=J("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=J("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=J("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=J("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=J("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ZS=()=>{const{constellation:e,activeStarId:t,hideStarDetail:n,updateStarTags:r}=Lr(),i=e.stars.find(S=>S.id===t),[s,o]=T.useState(!1),[l,u]=T.useState([]),[d,h]=T.useState(""),[a,c]=T.useState([]),f=()=>{Z("starClick"),n()},g=()=>{Z("starClick"),console.log("分享功能将在这里实现")},v=()=>{Z("starClick"),console.log("保存到星图功能将在这里实现")},_=()=>{i&&(u([...i.tags]),o(!0),c(Dl()))},m=()=>{i&&(r(i.id,l),o(!1))},y=S=>{const b=S.trim().toLowerCase();b&&!l.some(P=>P.toLowerCase()===b)&&(u([...l,b]),h(""))},x=S=>{u(l.filter(b=>b!==S))},w=S=>{const b=Dl().filter(P=>P.toLowerCase().includes(S.toLowerCase()));c(b.slice(0,10))},k=S=>{const b=S.target.value;h(b),w(b)},C=S=>({relationships:"#FF69B4",personal_growth:"#9370DB",career_and_purpose:"#FFD700",emotional_wellbeing:"#98FB98",material:"#FFA500",creative:"#FF6347",philosophy_and_existence:"#87CEEB",creativity_and_passion:"#FF6347",daily_life:"#FFA500"})[S]||"#fff";if(!i)return null;const A=e.connections.filter(S=>S.fromStarId===t||S.toStarId===t).map(S=>{const b=S.fromStarId===t?S.toStarId:S.fromStarId;return{star:e.stars.find(E=>E.id===b),connection:S}}).filter(S=>S.star);return xn.createPortal(p.jsx(St,{children:t&&i&&p.jsxs(I.div,{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:999999},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(I.div,{className:"absolute inset-0 bg-black bg-opacity-70 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f}),p.jsxs(I.div,{className:"oracle-card rounded-lg w-full max-w-lg mx-4 overflow-hidden z-10",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",damping:25},children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:i.imageUrl,alt:"宇宙视觉",className:"w-full h-48 object-cover"}),p.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-50 rounded-full p-1",onClick:f,children:p.jsx(mn,{className:"w-5 h-5 text-white"})}),p.jsx("div",{className:"absolute top-2 left-2 rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:`${C(i.primary_category)}20`,border:`1px solid ${C(i.primary_category)}60`,color:C(i.primary_category)},children:i.primary_category.replace("_"," ").toUpperCase()}),i.isSpecial&&p.jsx("div",{className:"absolute top-2 right-12 bg-cosmic-purple bg-opacity-70 rounded-full px-2 py-1 text-xs",children:"✨ 稀有天体事件"})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("h3",{className:"text-lg text-gray-300 mb-2 italic",children:['"',i.question,'"']}),p.jsx("p",{className:"text-xl font-heading text-white mb-4",children:i.answer}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(XS,{className:"w-4 h-4 text-cosmic-accent"}),p.jsx("span",{className:"text-sm font-semibold text-cosmic-accent",children:"主题"}),!s&&p.jsx("button",{className:"ml-auto text-blue-400 hover:text-blue-300 text-sm",onClick:_,children:"编辑标签"})]}),s?p.jsxs("div",{children:[p.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.map(S=>p.jsxs("div",{className:"bg-blue-900 bg-opacity-40 rounded-full px-3 py-1 text-sm flex items-center",children:[p.jsx("span",{className:"text-blue-300",children:S}),p.jsx("button",{className:"ml-2 text-gray-400 hover:text-white",onClick:()=>x(S),children:"×"})]},S)),l.length===0&&p.jsx("span",{className:"text-gray-500 text-sm italic",children:"添加标签以创建星座"})]}),p.jsxs("div",{className:"flex mb-3",children:[p.jsx("input",{type:"text",value:d,onChange:k,placeholder:"添加新标签...",className:"flex-grow bg-gray-800 text-white px-3 py-2 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),p.jsx("button",{onClick:()=>y(d),className:"bg-blue-700 hover:bg-blue-600 text-white px-3 py-1 rounded-r-md",children:"添加"})]}),a.length>0&&p.jsxs("div",{className:"bg-gray-800 rounded-md p-2 mb-3",children:[p.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"推荐标签："}),p.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(S=>p.jsx("button",{onClick:()=>y(S),disabled:l.some(b=>b.toLowerCase()===S.toLowerCase()),className:`text-xs px-2 py-1 rounded-full ${l.some(b=>b.toLowerCase()===S.toLowerCase())?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600 text-white"}`,children:S},S))})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{onClick:()=>o(!1),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md",children:"取消"}),p.jsx("button",{onClick:m,className:"bg-green-700 hover:bg-green-600 text-white px-3 py-1 rounded-md",children:"保存更改"})]})]}):p.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(S=>p.jsx("span",{className:"px-2 py-1 bg-cosmic-purple bg-opacity-20 border border-cosmic-purple border-opacity-30 rounded-full text-xs text-white",children:S},S))})]}),A.length>0&&p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(dt,{size:16}),p.jsx("span",{className:"text-sm font-semibold text-cosmic-accent",children:"相连的星星"})]}),p.jsx("div",{className:"space-y-2",children:A.slice(0,3).map(({star:S,connection:b})=>{var P;return p.jsxs("div",{className:"flex items-center justify-between p-2 bg-cosmic-navy bg-opacity-30 rounded-md",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("p",{className:"text-sm text-white truncate",children:['"',S.question,'"']}),p.jsxs("p",{className:"text-xs text-gray-400",children:["共享：",((P=b.sharedTags)==null?void 0:P.join("、"))||"相似能量"]})]}),p.jsxs("div",{className:"text-xs text-cosmic-accent font-semibold",children:[Math.round(b.strength*100),"%"]})]},S.id)})})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(vu,{className:"w-4 h-4 text-cosmic-accent"}),p.jsx("span",{className:"text-sm font-semibold text-cosmic-accent",children:"情感基调"})]}),p.jsx("span",{className:"text-sm text-gray-300 capitalize",children:i.emotional_tone&&i.emotional_tone.length>0?i.emotional_tone.join("、"):"中性"})]}),p.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["照亮于 ",i.createdAt.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("button",{className:"cosmic-button rounded-md px-3 py-2 flex items-center",onClick:v,children:[p.jsx(WS,{className:"w-4 h-4 mr-2"}),p.jsx("span",{children:"保存到星图"})]}),p.jsxs("button",{className:"cosmic-button rounded-md px-3 py-2 flex items-center",onClick:g,children:[p.jsx(GS,{className:"w-4 h-4 mr-2"}),p.jsx("span",{children:"分享星语"})]})]})]})]})]})}),document.body)},Ty=()=>q.getPlatform()==="ios",No=()=>{let e=document.getElementById("top-level-modals");return e||(e=document.createElement("div"),e.id="top-level-modals",e.style.cssText=`
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      z-index: 2147483647 !important;
      pointer-events: none !important;
      -webkit-transform: translateZ(0) !important;
      transform: translateZ(0) !important;
      -webkit-backface-visibility: hidden !important;
      backface-visibility: hidden !important;
    `,document.body.appendChild(e)),e},xu=()=>({position:"fixed",zIndex:2147483647,top:0,left:0,right:0,bottom:0,pointerEvents:"auto",WebkitTransform:"translateZ(0)",transform:"translateZ(0)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden"}),wu=()=>"fixed inset-0 flex items-center justify-center",_u=()=>Ty()?(console.log("iOS hideOtherElements called - using minimal approach"),()=>{console.log("iOS hideOtherElements restore called")}):()=>{},Su=()=>{Ty()&&No()},Kt={STANDARD:"standard",CROSS:"cross",BURST:"burst",SPARKLE:"sparkle",RINGED:"ringed",PLANET_SMOOTH:"planet_smooth",PLANET_CRATERS:"planet_craters",PLANET_SEAS:"planet_seas",PLANET_DUST:"planet_dust",PLANET_RINGS:"planet_rings"},ek=[{name:"深空蓝",inner:"hsl(250, 40%, 20%)",outer:"hsl(230, 50%, 5%)",star:"hsl(220, 100%, 85%)",accent:"hsl(240, 70%, 70%)"},{name:"星云紫",inner:"hsl(280, 50%, 18%)",outer:"hsl(260, 60%, 4%)",star:"hsl(290, 100%, 85%)",accent:"hsl(280, 70%, 70%)"},{name:"远古红",inner:"hsl(340, 45%, 15%)",outer:"hsl(320, 50%, 5%)",star:"hsl(350, 100%, 85%)",accent:"hsl(340, 70%, 70%)"},{name:"冰晶蓝",inner:"hsl(200, 50%, 15%)",outer:"hsl(220, 60%, 6%)",star:"hsl(190, 100%, 85%)",accent:"hsl(200, 70%, 70%)"}],tk=({star:e,isFlipped:t=!1,onFlip:n,showActions:r=!0,starStyle:i,colorTheme:s,onContextMenu:o})=>{const[l,u]=T.useState(!1),d=T.useRef(null),{style:h,theme:a,hasRing:c,dustCount:f}=T.useMemo(()=>{const x=e.id.split("-")[1]?parseInt(e.id.split("-")[1]):Date.now(),w=(P,E)=>{const O=Math.sin(x)*1e4,B=O-Math.floor(O);return Math.floor(B*(E-P+1))+P},k=Object.values(Kt),C=i||k[w(0,k.length-1)],A=s!==void 0?s:w(0,3),S=e.isSpecial?w(0,10)>6:!1,b=w(5,e.isSpecial?20:10);return{style:C,theme:A,hasRing:S,dustCount:b}},[e.id,e.isSpecial,i,s]),g=ek[a],v=e.isSpecial?g.accent:g.star,_=T.useMemo(()=>Array.from({length:f}).map((x,w)=>{const k=Math.random()*Math.PI*2,C=30+Math.random()*40;return{id:w,x:100+Math.cos(k)*C,y:100+Math.sin(k)*C,size:Math.random()*1.5+.5,opacity:Math.random()*.7+.3,animationDuration:2+Math.random()*3}}),[f]),m=T.useMemo(()=>c?{tilt:(Math.random()-.5)*.8,radiusX:25,radiusY:25*.35,color:v,lineWidth:1.5}:null,[c,v]),y=x=>{x.preventDefault(),o&&o(x)};return T.useEffect(()=>{if(!h.startsWith("planet_")||!d.current)return;const x=d.current,w=x.getContext("2d");if(!w)return;const k=window.devicePixelRatio||2;x.width=200*k,x.height=200*k,w.scale(k,k),w.imageSmoothingEnabled=!0,w.imageSmoothingQuality="high";const C=e.id.split("-")[1]?parseInt(e.id.split("-")[1]):Date.now(),A=(b,P)=>{const E=Math.sin(C)*1e4,O=E-Math.floor(E);return Math.floor(O*(P-b+1))+b};(()=>{try{w.clearRect(0,0,200,200),w.fillStyle="rgba(0,0,0,0)",w.fillRect(0,0,200,200);const b=e.isSpecial?g.accent:g.star;let P=0,E=0,O=70;try{const W=b.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);W&&W.length>=4&&(P=parseInt(W[1]),E=parseInt(W[2]),O=parseInt(W[3]))}catch(W){console.error("HSL解析错误:",W),P=0,E=0,O=70}const B=Math.max(40,O-20),R=25+A(0,20),F=B-R/2,K=B+R/2,z={base:`hsl(${P}, ${E*.7}%, ${B}%)`,shadow:`hsl(${P}, ${E*.5}%, ${F}%)`,highlight:`hsl(${P}, ${E*.9}%, ${K}%)`,glow:b},M=15+A(0,5),L={x:100,y:100,radius:M,palette:z,shading:{lightAngle:A(0,628)/100,numBands:5+A(0,5),darkL:F,lightL:K}},D=h==="planet_rings"||h.startsWith("planet_")&&A(0,10)>7,X=D?{tilt:(A(0,100)-50)/100*.8,radius:M*1.6,color:z.base,lineWidth:1+A(0,1)}:null,te=()=>{w.save();for(let W=0;W<30;W++){const me=Math.random()*200,Pe=Math.random()*200,Re=Math.random()*1.2+.3;w.fillStyle="#ffffff",w.globalAlpha=Math.random()*.7+.1,w.fillRect(me,Pe,Re,Re)}w.restore()},le=()=>{try{w.save();const W=w.createRadialGradient(L.x,L.y,L.radius*.8,L.x,L.y,L.radius*3),me=z.glow||"rgba(255,255,255,0.7)";W.addColorStop(0,me.replace(")",", 0.7)").replace("rgb","rgba")),W.addColorStop(.5,me.replace(")",", 0.3)").replace("rgb","rgba")),W.addColorStop(1,"rgba(0,0,0,0)"),w.globalCompositeOperation="screen",w.fillStyle=W,w.beginPath(),w.arc(L.x,L.y,L.radius*3,0,Math.PI*2),w.fill(),w.restore()}catch(W){console.error("绘制光晕错误:",W),w.restore()}},H=()=>{const W=L.shading.lightAngle,me=L.shading.numBands,Pe=L.shading.darkL,Re=L.shading.lightL,Be={x:Math.cos(W),y:Math.sin(W)},Xe=L.radius*.8;for(let kt=0;kt<me;kt++){const Rr=kt/(me-1),Io=Pe+Rr*(Re-Pe),Lo=`hsl(${P}, ${Math.max(0,E-20+Rr*20)}%, ${Io}%)`,Hi=-1+2*Rr,Ro=Be.x*Xe*Hi*-.5,Do=Be.y*Xe*Hi*-.5;w.beginPath(),w.arc(L.x-Ro,L.y-Do,L.radius,0,Math.PI*2),w.fillStyle=Lo,w.fill()}},G=()=>{if(!D||!X)return;w.save(),w.translate(L.x,L.y),w.rotate(X.tilt);const W=X.radius,me=X.radius*.3;w.beginPath(),w.ellipse(0,0,W,me,0,Math.PI,Math.PI*2),w.strokeStyle=z.base,w.lineWidth=X.lineWidth,w.globalAlpha=.6,w.stroke(),w.restore()},oe=()=>{if(!D||!X)return;w.save(),w.translate(L.x,L.y),w.rotate(X.tilt);const W=X.radius,me=X.radius*.3;w.beginPath(),w.ellipse(0,0,W,me,0,0,Math.PI),w.strokeStyle=z.base,w.lineWidth=X.lineWidth,w.globalAlpha=.8,w.stroke(),w.restore()},it=()=>{w.save(),w.translate(L.x,L.y),w.beginPath(),w.arc(0,0,L.radius,0,2*Math.PI),w.clip();const W=10+A(0,10);for(let me=0;me<W;me++){const Pe=A(0,628)/100,Re=A(0,Math.floor(L.radius*100))/100,Be=Math.cos(Pe)*Re,Xe=Math.sin(Pe)*Re,kt=A(0,10)/10+.3;w.beginPath(),w.arc(Be,Xe,kt,0,2*Math.PI),w.fillStyle=z.highlight,w.globalAlpha=.8,w.fill()}w.restore()},Ye=()=>{w.save(),w.translate(L.x,L.y),w.beginPath(),w.arc(0,0,L.radius,0,2*Math.PI),w.clip();const W=5+A(0,10);for(let me=0;me<W;me++){const Pe=A(0,628)/100,Re=A(0,Math.floor(L.radius*80))/100,Be=Math.cos(Pe)*Re,Xe=Math.sin(Pe)*Re,kt=(A(0,6)/100+.01)*L.radius,Rr=Math.sqrt(Be*Be+Xe*Xe),Io=.1,Lo=Math.min(Rr/L.radius,1),Hi=Math.max(Io,Math.sqrt(1-Math.pow(Lo,2))),Ro=kt,Do=kt*Hi,Ay=Math.atan2(Xe,Be)+Math.PI/2;w.beginPath(),w.ellipse(Be,Xe,Ro,Do,Ay,0,2*Math.PI),w.fillStyle=A(0,10)>5?z.shadow:z.highlight,w.globalAlpha=.6,w.fill()}w.restore()},ze=()=>{if(e.isSpecial)try{w.save(),w.translate(L.x,L.y);const W=4+A(0,4),me=A(0,100)/100*Math.PI;for(let Pe=0;Pe<W;Pe++){const Re=me+Pe*Math.PI*2/W,Be=L.radius*(2+A(0,20)/10);w.beginPath(),w.moveTo(0,0),w.lineTo(Math.cos(Re)*Be,Math.sin(Re)*Be);const Xe=w.createLinearGradient(0,0,Math.cos(Re)*Be,Math.sin(Re)*Be),kt=z.glow||"rgba(255,255,255,0.9)";Xe.addColorStop(0,kt.replace(")",", 0.9)").replace("rgb","rgba")),Xe.addColorStop(1,"rgba(0,0,0,0)"),w.strokeStyle=Xe,w.lineWidth=1+A(0,10)/10,w.globalAlpha=.3+A(0,5)/10,w.stroke()}w.restore()}catch(W){console.error("绘制光晕射线错误:",W),w.restore()}};le(),te(),D&&G(),w.save(),w.beginPath(),w.arc(L.x,L.y,L.radius,0,2*Math.PI),w.clip(),H(),w.restore(),h===Kt.PLANET_CRATERS?Ye():h===Kt.PLANET_DUST&&it(),D&&oe(),ze()}catch(b){console.error("行星绘制错误:",b)}})()},[h,e.id,g,v]),p.jsxs(I.div,{className:"star-card-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},onHoverStart:()=>u(!0),onHoverEnd:()=>u(!1),onContextMenu:y,children:[p.jsxs("div",{className:"star-card-wrapper",children:[p.jsxs(I.div,{className:"star-card",animate:{rotateY:t?180:0},transition:{duration:.6,type:"spring"},onClick:n,children:[p.jsx("div",{className:"star-card-face star-card-front",children:p.jsxs("div",{className:"star-card-bg",style:{background:`radial-gradient(circle, ${g.inner} 0%, ${g.outer} 100%)`},children:[p.jsxs("div",{className:"star-card-constellation",children:[h.startsWith("planet_")&&p.jsx("canvas",{ref:d,width:"200",height:"200",className:"planet-canvas",style:{width:"160px",height:"160px"}}),!h.startsWith("planet_")&&p.jsxs("svg",{className:"constellation-svg",viewBox:"0 0 200 200",children:[p.jsxs("defs",{children:[p.jsxs("radialGradient",{id:`starGlow-${e.id}`,cx:"50%",cy:"50%",r:"50%",children:[p.jsx("stop",{offset:"0%",stopColor:v,stopOpacity:"0.8"}),p.jsx("stop",{offset:"100%",stopColor:v,stopOpacity:"0"})]}),p.jsxs("filter",{id:`glow-${e.id}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[p.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),p.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),Array.from({length:20}).map((x,w)=>p.jsx(I.circle,{cx:20+w%5*40+Math.random()*20,cy:20+Math.floor(w/5)*40+Math.random()*20,r:Math.random()*1.5+.5,fill:"rgba(255,255,255,0.6)",initial:{opacity:.3},animate:{opacity:[.3,.8,.3],scale:[1,1.2,1]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},`bg-star-${w}`)),_.map(x=>p.jsx(I.circle,{cx:x.x,cy:x.y,r:x.size,fill:v,initial:{opacity:0},animate:{opacity:[0,x.opacity,0],cx:[x.x-2,x.x+2,x.x-2],cy:[x.y-2,x.y+2,x.y-2]},transition:{duration:x.animationDuration,repeat:1/0,ease:"easeInOut"}},`dust-${x.id}`)),c&&m&&p.jsxs(p.Fragment,{children:[p.jsx(I.ellipse,{cx:"100",cy:"100",rx:m.radiusX,ry:m.radiusY,transform:`rotate(${m.tilt*180/Math.PI} 100 100)`,fill:"none",stroke:m.color,strokeWidth:m.lineWidth,strokeDasharray:"1,2",initial:{opacity:0},animate:{opacity:[.2,.5,.2],strokeWidth:[m.lineWidth,m.lineWidth*1.5,m.lineWidth]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),p.jsx(I.path,{d:`M ${100-m.radiusX} 100 A ${m.radiusX} ${m.radiusY} ${m.tilt*180/Math.PI} 0 1 ${100+m.radiusX} 100`,fill:"none",stroke:m.color,strokeWidth:m.lineWidth,initial:{opacity:0},animate:{opacity:[.5,.8,.5],strokeWidth:[m.lineWidth,m.lineWidth*1.5,m.lineWidth]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]}),p.jsx(I.circle,{cx:"100",cy:"100",r:"8",fill:`url(#starGlow-${e.id})`,filter:`url(#glow-${e.id})`,initial:{scale:0},animate:{scale:[1,1.1,1],opacity:[.8,1,.8]},transition:{scale:{duration:3,repeat:1/0,ease:"easeInOut"},opacity:{duration:2,repeat:1/0,ease:"easeInOut"}}}),h===Kt.STANDARD&&[0,1,2,3,4,5,6,7].map(x=>p.jsx(I.line,{x1:"100",y1:"100",x2:100+Math.cos(x*Math.PI/4)*40,y2:100+Math.sin(x*Math.PI/4)*40,stroke:v,strokeWidth:"2",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:[0,.8,0]},transition:{duration:1.5,delay:x*.1,repeat:1/0,repeatDelay:1}},`ray-${x}`)),h===Kt.CROSS&&[0,1,2,3].map(x=>p.jsx(I.rect,{x:100-(x%2===0?1:15),y:100-(x%2===1?1:15),width:x%2===0?2:30,height:x%2===1?2:30,fill:v,initial:{opacity:0,scale:0},animate:{opacity:[0,.8,0],scale:[0,1,0],rotate:[0,90,180]},transition:{duration:2,delay:x*.2,repeat:1/0,repeatDelay:.5}},`cross-${x}`)),h===Kt.BURST&&Array.from({length:12}).map((x,w)=>{const k=w*Math.PI*2/12,C=20+Math.random()*30;return p.jsx(I.line,{x1:"100",y1:"100",x2:100+Math.cos(k)*C,y2:100+Math.sin(k)*C,stroke:v,strokeWidth:Math.random()*1.5+.5,initial:{pathLength:0,opacity:0},animate:{pathLength:[0,1,0],opacity:[0,.7,0]},transition:{duration:2+Math.random(),delay:w*.05,repeat:1/0,repeatDelay:Math.random()}},`burst-${w}`)}),h===Kt.SPARKLE&&Array.from({length:8}).map((x,w)=>{const k=w*Math.PI*2/8,C=15+Math.random()*20;return p.jsx(I.circle,{cx:100+Math.cos(k)*C,cy:100+Math.sin(k)*C,r:Math.random()*2+1,fill:v,initial:{opacity:0,scale:0},animate:{opacity:[0,.9,0],scale:[0,1,0]},transition:{duration:1+Math.random(),delay:w*.1,repeat:1/0,repeatDelay:Math.random()*2}},`sparkle-${w}`)}),h===Kt.RINGED&&!c&&p.jsx(I.circle,{cx:"100",cy:"100",r:"15",fill:"none",stroke:v,strokeWidth:"1",strokeDasharray:"1,2",initial:{opacity:0},animate:{opacity:[.3,.6,.3],r:[15,18,15]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})]}),p.jsxs("div",{className:"star-card-title",children:[p.jsx(I.div,{className:"star-type-badge",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8},style:{backgroundColor:e.isSpecial?`${g.accent}30`:"rgba(255,255,255,0.1)"},children:e.isSpecial?p.jsxs(p.Fragment,{children:[p.jsx(dt,{className:"w-3 h-3",color:g.accent}),p.jsx("span",{style:{color:g.accent},children:"Rare Celestial"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-white opacity-80"}),p.jsx("span",{children:"Inner Star"})]})}),p.jsxs(I.div,{className:"star-date",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:[p.jsx(DS,{className:"w-3 h-3"}),p.jsx("span",{children:e.createdAt.toLocaleDateString()})]})]}),p.jsx("div",{className:"star-card-decorations",children:Array.from({length:6}).map((x,w)=>p.jsx(I.div,{className:"floating-particle",style:{left:`${20+Math.random()*60}%`,top:`${20+Math.random()*60}%`,backgroundColor:v},animate:{y:[-5,5,-5],opacity:[.3,.7,.3]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},w))})]})}),p.jsx("div",{className:"star-card-face star-card-back",children:p.jsxs("div",{className:"star-card-content",children:[p.jsxs("div",{className:"question-section",children:[p.jsx("h3",{className:"question-label",children:"Your Question"}),p.jsxs("p",{className:"question-text",children:['"',e.question,'"']})]}),p.jsx("div",{className:"divider",children:p.jsx(dt,{className:"w-4 h-4 text-cosmic-accent"})}),p.jsx("div",{className:"answer-section",children:p.jsxs(I.div,{className:"answer-reveal",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[p.jsx("h3",{className:"answer-label",children:"星辰的启示"}),p.jsx("p",{className:"answer-text",children:e.answer})]})}),p.jsxs(I.div,{className:"card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[p.jsxs("div",{className:"star-stats",children:[p.jsxs("span",{className:"stat",children:["Brightness: ",Math.round(e.brightness*100),"%"]}),p.jsxs("span",{className:"stat",children:["Size: ",e.size.toFixed(1),"px"]})]}),p.jsx("p",{className:"text-center text-sm text-cosmic-accent mt-3",children:"再次点击卡片继续探索星空"})]})]})})]}),p.jsx(I.div,{className:"star-card-glow",animate:{opacity:l?.6:0,scale:l?1.05:1},transition:{duration:.3},style:{background:l?`radial-gradient(circle, ${g.accent}40 0%, transparent 70%)`:"none"}})]}),r&&p.jsxs(I.div,{className:"star-card-actions",initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.2},children:[p.jsx("button",{className:"action-btn favorite",children:p.jsx(vu,{className:"w-4 h-4"})}),p.jsx("button",{className:"action-btn flip",onClick:n,children:p.jsx(dt,{className:"w-4 h-4"})})]})]})},nk={STANDARD:"standard",CROSS:"cross",BURST:"burst",SPARKLE:"sparkle",RINGED:"ringed",PLANET_SMOOTH:"planet_smooth",PLANET_CRATERS:"planet_craters",PLANET_SEAS:"planet_seas",PLANET_DUST:"planet_dust",PLANET_RINGS:"planet_rings"},rk=({isOpen:e,onClose:t})=>{const{constellation:n,drawInspirationCard:r}=Lr(),[i,s]=T.useState(""),[o,l]=T.useState("all"),[u,d]=T.useState(new Set),[h,a]=T.useState(null);T.useEffect(()=>{Su()},[]),T.useEffect(()=>{if(e){document.body.classList.add("modal-open");const m=_u();a(()=>m)}else document.body.classList.remove("modal-open"),h&&(h(),a(null));return()=>{document.body.classList.remove("modal-open"),h&&h()}},[e]);const c=T.useMemo(()=>{const m=new Map;return n.stars.forEach(y=>{const x=y.id.split("-")[1]?parseInt(y.id.split("-")[1]):Date.now(),w=(S,b)=>{const P=Math.sin(x)*1e4,E=P-Math.floor(P);return Math.floor(E*(b-S+1))+S},k=Object.values(nk),C=w(0,k.length-1),A=w(0,3);m.set(y.id,{style:k[C],theme:A})}),m},[n.stars]),f=()=>{Z("starClick"),t()},g=m=>{Z("starClick"),d(y=>{const x=new Set(y);return x.has(m)?x.delete(m):x.add(m),x})},v=m=>{m.preventDefault(),Z("starReveal");const y=r();console.log("📇 灵感卡片已生成:",y.question)},_=n.stars.filter(m=>{const y=m.question.toLowerCase().includes(i.toLowerCase())||m.answer.toLowerCase().includes(i.toLowerCase()),x=o==="all"||o==="special"&&m.isSpecial||o==="recent"&&Date.now()-m.createdAt.getTime()<7*24*60*60*1e3;return y&&x});return xn.createPortal(p.jsx(St,{children:e&&p.jsxs(I.div,{className:wu(),style:xu(),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onContextMenu:v,children:[p.jsx(I.div,{className:"absolute inset-0 bg-black bg-opacity-90 backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f}),p.jsxs(I.div,{className:"star-collection-panel",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25},children:[p.jsxs("div",{className:"collection-header",children:[p.jsxs("div",{className:"header-left",children:[p.jsx("h2",{className:"stellar-title text-white",children:"集星"}),p.jsxs("span",{className:"star-count",children:[_.length," stars"]})]}),p.jsx("button",{className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",onClick:f,children:p.jsx(mn,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"collection-controls",children:[p.jsxs("div",{className:"search-bar",children:[p.jsx(KS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search your stars...",value:i,onChange:m=>s(m.target.value),className:"stellar-body w-full bg-transparent text-white placeholder-gray-400 pl-10 pr-4 py-2 focus:outline-none"})]}),p.jsx("div",{className:"control-buttons",children:p.jsxs("select",{value:o,onChange:m=>l(m.target.value),className:"stellar-body bg-transparent text-white focus:outline-none p-2 rounded-full dialog-transparent-button",children:[p.jsx("option",{value:"all",children:"All Stars"}),p.jsx("option",{value:"special",children:"Special Stars"}),p.jsx("option",{value:"recent",children:"Recent (7 days)"})]})})]}),p.jsxs("div",{className:"collection-content grid",children:[p.jsx(St,{children:_.map((m,y)=>{const x=c.get(m.id)||{style:"standard",theme:0};return p.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:y*.1},children:p.jsx(tk,{star:m,isFlipped:u.has(m.id),onFlip:()=>g(m.id),starStyle:x.style,colorTheme:x.theme,onContextMenu:v})},m.id)})}),_.length===0&&p.jsxs(I.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},children:[p.jsx(Ol,{className:"w-12 h-12 text-gray-400 mb-4"}),p.jsx("p",{className:"text-gray-400",children:"No stars found matching your criteria"})]})]})]})]})}),No())},ik=({isOpen:e,onClose:t,onSelectTemplate:n})=>{const[r,i]=T.useState("all"),[s,o]=T.useState(null),l=wS(),u=r==="all"?l:_S(r);T.useEffect(()=>{Su()},[]),T.useEffect(()=>{if(e){document.body.classList.add("modal-open");const f=_u();o(()=>f)}else document.body.classList.remove("modal-open"),s&&(s(),o(null));return()=>{document.body.classList.remove("modal-open"),s&&s()}},[e]);const d=()=>{Z("starClick"),t()},h=f=>{Z("starReveal"),n(f),t()},a=f=>{switch(f){case"fire":return p.jsx(up,{className:"w-4 h-4"});case"earth":return p.jsx(pp,{className:"w-4 h-4"});case"air":return p.jsx(gp,{className:"w-4 h-4"});case"water":return p.jsx(mp,{className:"w-4 h-4"});default:return p.jsx(Ol,{className:"w-4 h-4"})}},c=f=>{switch(f){case"fire":return"text-red-400 border-red-400";case"earth":return"text-green-400 border-green-400";case"air":return"text-blue-400 border-blue-400";case"water":return"text-cyan-400 border-cyan-400";default:return"text-white border-white"}};return xn.createPortal(p.jsx(St,{children:e&&p.jsxs(I.div,{className:wu(),style:xu(),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(I.div,{className:"absolute inset-0 bg-black bg-opacity-90 backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d}),p.jsx(I.div,{className:"cosmic-input rounded-lg w-full max-w-4xl mx-4 z-10 max-h-[90vh] overflow-hidden",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",damping:25},children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(dt,{size:24,className:"text-cosmic-accent",animated:!0}),p.jsx("h2",{className:"stellar-title text-white",children:"选择星座模板"})]}),p.jsx("button",{className:"w-8 h-8 rounded-full cosmic-button flex items-center justify-center",onClick:d,children:p.jsx(mn,{className:"w-4 h-4 text-white"})})]}),p.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{key:"all",label:"全部",icon:p.jsx(Ol,{className:"w-4 h-4"})},{key:"fire",label:"火象",icon:p.jsx(up,{className:"w-4 h-4"})},{key:"earth",label:"土象",icon:p.jsx(pp,{className:"w-4 h-4"})},{key:"air",label:"风象",icon:p.jsx(gp,{className:"w-4 h-4"})},{key:"water",label:"水象",icon:p.jsx(mp,{className:"w-4 h-4"})}].map(({key:f,label:g,icon:v})=>p.jsxs("button",{className:`flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${r===f?"bg-cosmic-accent bg-opacity-20 border-cosmic-accent text-cosmic-accent":"cosmic-button text-white"}`,onClick:()=>i(f),children:[v,p.jsx("span",{className:"text-sm font-medium",children:g})]},f))}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:p.jsx(St,{children:u.map((f,g)=>p.jsxs(I.div,{className:"constellation-template-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:g*.1},whileHover:{y:-5},onClick:()=>h(f),children:[p.jsx("div",{className:"template-preview",children:p.jsxs("svg",{className:"w-full h-24",viewBox:"0 0 100 60",children:[f.stars.map((v,_)=>p.jsxs("g",{children:[p.jsx("circle",{cx:50+v.x*2,cy:30+v.y*2,r:v.size*.8,fill:v.isMainStar?"#8A5FBD":"#ffffff",opacity:v.brightness}),v.isMainStar&&p.jsx("circle",{cx:50+v.x*2,cy:30+v.y*2,r:v.size*1.2,fill:"none",stroke:"#8A5FBD",strokeWidth:"0.5",opacity:"0.6"})]},_)),f.connections.map((v,_)=>{const m=f.stars.find(x=>x.id===v.fromStarId),y=f.stars.find(x=>x.id===v.toStarId);return!m||!y?null:p.jsx("line",{x1:50+m.x*2,y1:30+m.y*2,x2:50+y.x*2,y2:30+y.y*2,stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"},_)})]})}),p.jsxs("div",{className:"template-info",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("h3",{className:"font-heading text-white text-lg",children:f.chineseName}),p.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full border text-xs ${c(f.element)}`,children:[a(f.element),p.jsx("span",{children:f.element})]})]}),p.jsx("p",{className:"text-sm text-gray-300 mb-3",children:f.description}),p.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[p.jsxs("span",{children:[f.stars.length," 颗星"]}),p.jsxs("span",{children:[f.connections.length," 条连线"]})]})]})]},f.id))})}),p.jsx("div",{className:"mt-6 p-4 bg-cosmic-purple bg-opacity-10 border border-cosmic-purple border-opacity-20 rounded-md",children:p.jsxs("p",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"提示:"})," 选择一个星座模板作为你的星空基础。你可以在此基础上继续添加自己的星星， 创造独特的个人星座。模板星星会以特殊样式显示，与你后续添加的星星形成美丽的连接。"]})})]})})]})}),No())},sk=({isOpen:e,onClose:t})=>{const[n,r]=T.useState(()=>Un()),[i,s]=T.useState(!1),[o,l]=T.useState(!1),[u,d]=T.useState(null),[h,a]=T.useState(!1),[c,f]=T.useState(n.provider||"openai"),[g,v]=T.useState(null),_=T.useRef(null),m=T.useRef(null),y=T.useRef(null),x=T.useRef(null);T.useEffect(()=>{Su()},[]),T.useEffect(()=>{if(e){document.body.classList.add("modal-open");const R=_u();v(()=>R)}else document.body.classList.remove("modal-open"),g&&(g(),v(null));return()=>{document.body.classList.remove("modal-open"),g&&g()}},[e]),T.useEffect(()=>{if(e){const R=K=>{K.stopPropagation()},F=[_.current,m.current,y.current];return F.forEach(K=>{K&&K.addEventListener("paste",R)}),f(n.provider||"openai"),()=>{F.forEach(K=>{K&&K.removeEventListener("paste",R)})}}},[e,n]);const w=R=>{f(R),r({...n,provider:R}),R==="gemini"?(!n.endpoint||n.endpoint.includes("openai.com"))&&r(F=>({...F,endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent",model:"gemini-1.5-flash-latest"})):R==="openai"&&(!n.endpoint||n.endpoint.includes("googleapis.com"))&&r(F=>({...F,endpoint:"https://api.openai.com/v1/chat/completions",model:"gpt-4o"}))},k=async()=>{if(!n.provider||!n.apiKey||!n.endpoint||!n.model){d({isValid:!1,error:"请填写完整的配置信息"});return}l(!0),d(null),Z("starClick");try{const R=await my(n);d(R),R.isValid?Z("starReveal"):Z("starClick")}catch{d({isValid:!1,error:"验证过程中发生错误"})}finally{l(!1)}},C=async()=>{s(!0),Z("starLight");try{mu(n),await new Promise(R=>setTimeout(R,1e3)),Z("starReveal"),t()}catch(R){console.error("Failed to save AI config:",R)}finally{s(!1)}},A=()=>{Z("starClick"),t()},S=()=>o?p.jsx(ka,{className:"w-4 h-4 animate-spin text-blue-400"}):u!=null&&u.isValid?p.jsx(cp,{className:"w-4 h-4 text-green-400"}):u&&!u.isValid?p.jsx(VS,{className:"w-4 h-4 text-red-400"}):null,b=()=>o?"正在验证API配置...":u!=null&&u.isValid?`✅ API验证成功！响应时间: ${u.responseTime}ms`:u&&!u.isValid?`❌ ${u.error}`:null,P=()=>{try{const R=JSON.stringify({provider:n.provider,apiKey:n.apiKey,endpoint:n.endpoint,model:n.model,exportDate:new Date().toISOString()},null,2),F=new Blob([R],{type:"application/json"}),K=URL.createObjectURL(F),z=document.createElement("a");z.href=K,z.download=`stelloracle-config-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(z),z.click(),setTimeout(()=>{document.body.removeChild(z),URL.revokeObjectURL(K)},0),Z("starLight")}catch(R){console.error("导出配置失败:",R)}},E=()=>{x.current&&x.current.click()},O=R=>{var z;const F=(z=R.target.files)==null?void 0:z[0];if(!F)return;const K=new FileReader;K.onload=M=>{var $;try{const j=JSON.parse(($=M.target)==null?void 0:$.result);if(j.apiKey&&j.endpoint){const L={provider:j.provider||"openai",apiKey:j.apiKey,endpoint:j.endpoint,model:j.model||n.model};r(L),f(L.provider),Z("starReveal")}else console.error("导入的配置格式不正确")}catch(j){console.error("解析导入的配置失败:",j)}x.current&&(x.current.value="")},K.readAsText(F)},B=R=>{if(!R)return"未知";try{return new Date(R).toLocaleString("zh-CN")}catch{return R}};return xn.createPortal(p.jsx(St,{children:e&&p.jsxs(I.div,{className:wu(),style:xu(),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(I.div,{className:"absolute inset-0 bg-black bg-opacity-90 backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A}),p.jsx(I.div,{className:"cosmic-input rounded-lg w-full max-w-md mx-4 z-10",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",damping:25},children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(hp,{className:"w-6 h-6 text-cosmic-accent"}),p.jsx("h2",{className:"stellar-title text-white",children:"AI Configuration"})]}),p.jsx("button",{className:"w-8 h-8 rounded-full cosmic-button flex items-center justify-center",onClick:A,children:p.jsx(mn,{className:"w-4 h-4 text-white"})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[p.jsx(dp,{className:"w-4 h-4 mr-2"}),"API 提供商"]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{className:`flex-1 py-2 px-3 rounded-md text-sm flex items-center justify-center gap-2 transition-colors ${c==="openai"?"bg-cosmic-accent text-white":"cosmic-button text-gray-300"}`,onClick:()=>w("openai"),children:"OpenAI / 兼容服务"}),p.jsx("button",{className:`flex-1 py-2 px-3 rounded-md text-sm flex items-center justify-center gap-2 transition-colors ${c==="gemini"?"bg-cosmic-accent text-white":"cosmic-button text-gray-300"}`,onClick:()=>w("gemini"),children:"Google Gemini"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[p.jsx(BS,{className:"w-4 h-4 mr-2"}),"API Key"]}),p.jsx("input",{ref:_,type:"password",className:"w-full cosmic-input rounded-md px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cosmic-accent",placeholder:c==="gemini"?"Google API Key":"OpenAI API Key",value:n.apiKey||"",onChange:R=>r({...n,apiKey:R.target.value})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[p.jsx(dp,{className:"w-4 h-4 mr-2"}),"API Endpoint"]}),p.jsx("input",{ref:m,type:"text",className:"w-full cosmic-input rounded-md px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cosmic-accent",placeholder:c==="gemini"?"https://generativelanguage.googleapis.com/...":"https://api.openai.com/v1/chat/completions",value:n.endpoint||"",onChange:R=>r({...n,endpoint:R.target.value})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[p.jsx($S,{className:"w-4 h-4 mr-2"}),"模型名称"]}),p.jsx("input",{ref:y,type:"text",className:"w-full cosmic-input rounded-md px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cosmic-accent",placeholder:c==="gemini"?"gemini-1.5-flash-latest":"gpt-4o",value:n.model||"",onChange:R=>r({...n,model:R.target.value})})]}),(o||u)&&p.jsxs("div",{className:`mb-6 p-3 rounded-md flex items-start gap-2 text-sm ${u!=null&&u.isValid?"bg-green-500 bg-opacity-20 text-green-300":"bg-red-500 bg-opacity-20 text-red-300"}`,children:[S(),p.jsx("div",{children:b()})]}),n._lastUpdated&&p.jsx("div",{className:"mb-6",children:p.jsxs("button",{className:"text-xs text-gray-400 flex items-center gap-1 hover:text-gray-300 transition-colors",onClick:()=>a(!h),children:[p.jsx(FS,{className:"w-3 h-3"}),h?`最后更新: ${B(n._lastUpdated)}`:"显示最后更新时间"]})}),p.jsxs("div",{className:"flex flex-wrap gap-3",children:[p.jsxs("button",{className:"flex-1 py-2 px-4 cosmic-button text-white rounded-md flex items-center justify-center gap-2 transition-colors",onClick:k,disabled:o,children:[o?p.jsx(ka,{className:"w-4 h-4 animate-spin"}):p.jsx(cp,{className:"w-4 h-4"}),"验证"]}),p.jsxs("button",{className:"flex-1 py-2 px-4 bg-cosmic-accent hover:bg-cosmic-accent-dark text-white rounded-md flex items-center justify-center gap-2 transition-colors",onClick:C,disabled:i,children:[i?p.jsx(ka,{className:"w-4 h-4 animate-spin"}):p.jsx(hp,{className:"w-4 h-4"}),"保存"]})]}),p.jsxs("div",{className:"mt-4 flex justify-between",children:[p.jsxs("button",{className:"text-sm text-gray-400 flex items-center gap-1 hover:text-gray-300 transition-colors",onClick:E,children:[p.jsx(JS,{className:"w-4 h-4"}),"导入配置"]}),p.jsx("input",{ref:x,type:"file",accept:".json",style:{display:"none"},onChange:O}),p.jsxs("button",{className:"text-sm text-gray-400 flex items-center gap-1 hover:text-gray-300 transition-colors",onClick:P,children:[p.jsx(yu,{className:"w-4 h-4"}),"导出配置"]})]})]})})]})}),No())},ok=({isOpen:e,onClose:t,onOpenSettings:n,onOpenTemplateSelector:r})=>{const i=[{label:"所有项目",active:!0},{label:"记忆",count:0},{label:"选择星座",hasArrow:!0,onClick:()=>{r(),t()}},{label:"智能标签",count:9,section:"资料库"},{label:"人物",count:0},{label:"事物",count:0},{label:"地点",count:0},{label:"类型"},{label:"AI配置",hasArrow:!0,onClick:()=>{n(),t()}},{label:"导入",hasArrow:!0}];return p.jsx(St,{children:e&&p.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[p.jsxs(I.div,{initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",damping:25,stiffness:200},className:"w-80 h-full shadow-2xl",style:{background:"linear-gradient(135deg, rgba(27, 39, 53, 0.95) 0%, rgba(9, 10, 15, 0.98) 100%)",backdropFilter:"blur(20px)"},children:[p.jsx("div",{className:"px-5 border-b border-white/10",style:{paddingLeft:"calc(1.25rem + var(--safe-area-inset-left, 0px))",paddingRight:"calc(1.25rem + var(--safe-area-inset-right, 0px))",paddingTop:"3rem",paddingBottom:"0.5rem"},children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"stellar-title text-white",children:"StarOracle"}),p.jsx("button",{onClick:t,className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",children:p.jsx(mn,{className:"w-5 h-5"})})]})}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:i.map((s,o)=>p.jsxs("div",{children:[s.section&&p.jsx("div",{className:"px-5 py-3 text-xs text-white/40 font-medium tracking-wide uppercase",children:s.section}),p.jsxs("div",{className:`flex items-center justify-between px-5 py-4 cursor-pointer transition-all duration-200 ${s.active?"text-white border-r-2 border-blue-400":"text-white/60 hover:text-white"}`,onClick:s.onClick,children:[p.jsx("div",{className:"flex items-center",children:p.jsx("span",{className:"stellar-body",children:s.label})}),p.jsxs("div",{className:"flex items-center gap-2",children:[typeof s.count=="number"&&p.jsx("span",{className:`text-sm ${s.active?"text-blue-300":"text-white/40"}`,children:s.count}),s.hasArrow&&p.jsx(OS,{className:"w-4 h-4 text-white/40"})]})]})]},o))}),p.jsx("div",{className:"px-5 py-4 border-t border-white/10 backdrop-blur-sm",style:{background:"rgba(255, 255, 255, 0.02)"},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full flex items-center justify-center text-white text-sm font-bold",children:"✦"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"stellar-body text-white",children:"星谕用户"}),p.jsx("div",{className:"text-xs text-white/60",children:"探索星辰的奥秘"})]})]})})]}),p.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 bg-black/50 backdrop-blur-sm",onClick:t})]})})},ak=({onOpenDrawerMenu:e,onLogoClick:t})=>p.jsx(p.Fragment,{children:p.jsx("header",{className:"fixed top-0 left-0 right-0 z-50",style:{paddingLeft:"calc(1rem + var(--safe-area-inset-left, 0px))",paddingRight:"calc(1rem + var(--safe-area-inset-right, 0px))",paddingTop:"3rem",paddingBottom:"0.5rem",background:"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)"},children:p.jsxs("div",{className:"flex justify-between items-center h-full",children:[p.jsx("button",{className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",onClick:e,title:"菜单",children:p.jsx(US,{className:"w-4 h-4"})}),p.jsxs("h1",{className:"stellar-title text-white flex items-center",children:[p.jsx("span",{children:"星谕"}),p.jsx("span",{className:"ml-2 text-xs opacity-70",children:"(StarOracle)"})]}),p.jsx("button",{className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",onClick:t,title:"集星",children:p.jsx(dt,{size:18,animated:!1,iconColor:"#a855f7"})})]})})});var ur;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(ur||(ur={}));var yp;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(yp||(yp={}));const fs=wn("Haptics",{web:()=>Tr(()=>import("./web-CWU5qeg2.js"),[]).then(e=>new e.HapticsWeb)}),Ct=async(e="light")=>{if(q.isNativePlatform())try{switch(e){case"light":await fs.impact({style:ur.Light});break;case"medium":await fs.impact({style:ur.Medium});break;case"heavy":await fs.impact({style:ur.Heavy});break;case"success":case"warning":case"error":await fs.impact({style:ur.Medium});break}}catch(t){console.warn("Haptic feedback not available:",t)}},lk=({level:e,isAnalyzing:t,conversationDepth:n,onTogglePanel:r})=>{const s=(()=>{if(t)return"#8A5FBD";const l=e==="none"?0:e==="low"?.33:e==="medium"?.66:e==="high"?1:0,u={r:136,g:136,b:136},d={r:138,g:95,b:189},h=Math.round(u.r+(d.r-u.r)*l),a=Math.round(u.g+(d.g-u.g)*l),c=Math.round(u.b+(d.b-u.b)*l);return`rgb(${h}, ${a}, ${c})`})(),o=e!=="none"||t;return p.jsx(I.div,{className:"cursor-pointer",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r,transition:{duration:.3,ease:"easeOut"},children:p.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[p.jsx(I.circle,{cx:"16",cy:"16",r:"1.5",fill:s,animate:o?{scale:[1,1.2,1],opacity:[.8,1,.8]}:{},transition:{duration:2,repeat:o?1/0:0,ease:"easeInOut"}}),Array.from({length:12}).map((l,u)=>{const d=u*Math.PI*2/12,h=f=>{const g=Math.sin(f)*1e4;return g-Math.floor(g)},a=5+h(u)*8,c=h(u+12)*1.2+.3;return p.jsx(I.line,{x1:"16",y1:"16",x2:16+Math.cos(d)*a,y2:16+Math.sin(d)*a,stroke:s,strokeWidth:c,strokeLinecap:"round",initial:{pathLength:0,opacity:0},animate:o?{pathLength:[0,1,0],opacity:[0,.7,0]}:{pathLength:0,opacity:.2},transition:{duration:2+h(u+24),delay:u*.05,repeat:o?1/0:0,repeatDelay:h(u+36)}},`burst-${u}`)})]})})};var vp;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(vp||(vp={}));var xp;(function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"})(xp||(xp={}));const ps=wn("Keyboard"),ck=()=>{const[e,t]=T.useState(0),[n,r]=T.useState(!1);return T.useEffect(()=>{const i=ps.addListener("keyboardWillShow",u=>{console.log("🔍 键盘即将显示:",u),t(u.keyboardHeight),r(!0)}),s=ps.addListener("keyboardDidShow",u=>{console.log("🔍 键盘已显示:",u),t(u.keyboardHeight),r(!0)}),o=ps.addListener("keyboardWillHide",()=>{console.log("🔍 键盘即将隐藏"),t(0),r(!1)}),l=ps.addListener("keyboardDidHide",()=>{console.log("🔍 键盘已隐藏"),t(0),r(!1)});return()=>{i.remove(),s.remove(),o.remove(),l.remove()}},[]),{keyboardHeight:e,isKeyboardOpen:n}},uk=({onSendMessage:e,isFloatingAttached:t=!1})=>{const[n,r]=T.useState(""),[i,s]=T.useState(!1),[o,l]=T.useState(!1),u=T.useRef(null),{conversationAwareness:d}=Hn(),{keyboardHeight:h,isKeyboardOpen:a}=ck(),c=()=>a&&h>0?h+10:t?70:20,f=()=>{s(!i),console.log("Microphone clicked, recording:",!i),q.isNativePlatform()&&Ct("light"),Z("starClick")},g=()=>{l(!0),console.log("Star ray button clicked"),n.trim()&&_(),setTimeout(()=>{l(!1)},1e3)},v=y=>{r(y.target.value)},_=T.useCallback(async()=>{const y=n.trim();y&&(e&&e(y),r(""),console.log("🔍 ConversationDrawer: 消息已发送，请求打开ChatOverlay"))},[n,e]),m=y=>{y.key==="Enter"&&_()};return p.jsx("div",{className:"fixed left-0 right-0 z-50 p-4",style:{bottom:`${c()}px`,transition:"bottom 0.3s ease-out",pointerEvents:"none"},children:p.jsx("div",{className:"w-full max-w-md mx-auto pointer-events-auto",children:p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex items-center bg-gray-900 rounded-full h-12 shadow-lg border border-gray-800",children:[p.jsx("div",{className:"ml-3 flex-shrink-0",children:p.jsx(lk,{level:d.overallLevel,isAnalyzing:d.isAnalyzing,conversationDepth:d.conversationDepth,onTogglePanel:()=>console.log("觉察动画被点击")})}),p.jsx("input",{ref:u,type:"text",value:n,onChange:v,onKeyPress:m,placeholder:"询问任何问题",className:"flex-1 bg-transparent text-white placeholder-gray-400 pl-2 pr-4 py-2 focus:outline-none stellar-body",inputMode:"text",autoComplete:"off",autoCapitalize:"sentences",spellCheck:"false"}),p.jsxs("div",{className:"flex items-center space-x-2 mr-3",children:[p.jsx("button",{type:"button",onClick:f,className:`p-2 rounded-full dialog-transparent-button transition-colors duration-200 ${i?"recording":""}`,children:p.jsx(ky,{className:"w-4 h-4",strokeWidth:2})}),p.jsx("button",{type:"button",onClick:g,className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",children:p.jsx(dt,{size:16,animated:o||!!n.trim(),iconColor:"currentColor"})})]})]}),i&&p.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:p.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-xs",children:[p.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),p.jsx("span",{children:"Recording..."})]})})]})})})},Cy=({isVisible:e,position:t,messageText:n,onClose:r,onCopy:i})=>{const s=T.useRef(null);if(T.useEffect(()=>{const u=d=>{s.current&&!s.current.contains(d.target)&&r()};return e&&(document.addEventListener("mousedown",u),document.addEventListener("touchstart",u)),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[e,r]),!e)return null;const o=()=>{i(),r()},l=()=>{const u=document.createElement("textarea");u.value=n,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),r()};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black bg-opacity-20"}),p.jsxs("div",{ref:s,className:"fixed z-[10000] bg-gray-800 rounded-lg shadow-2xl border border-gray-600 py-2 min-w-[180px]",style:{left:Math.min(t.x,window.innerWidth-200),top:Math.max(20,Math.min(t.y,window.innerHeight-150))},children:[p.jsxs("button",{onClick:l,className:"flex items-center gap-3 w-full px-4 py-3 text-left text-white hover:bg-gray-700 transition-colors stellar-body",children:[p.jsx(Sy,{className:"w-4 h-4"}),"复制文本"]}),p.jsxs("button",{onClick:o,className:"flex items-center gap-3 w-full px-4 py-3 text-left text-white hover:bg-gray-700 transition-colors stellar-body",children:[p.jsx(yu,{className:"w-4 h-4"}),"复制消息"]}),p.jsxs("button",{onClick:()=>{r()},className:"flex items-center gap-3 w-full px-4 py-3 text-left text-gray-400 hover:bg-gray-700 transition-colors stellar-body",children:[p.jsx(YS,{className:"w-4 h-4"}),"分享 (待实现)"]})]})]})},dk=({message:e})=>{const[t,n]=T.useState({isVisible:!1,x:0,y:0}),[r,i]=T.useState(null),s=T.useRef(null),o=c=>{c.preventDefault();const f="touches"in c?c.touches[0].clientX:c.clientX,g="touches"in c?c.touches[0].clientY:c.clientY;n({isVisible:!0,x:f,y:g}),console.log("显示用户消息上下文菜单",{x:f,y:g})},l=c=>{const f=setTimeout(()=>{o(c)},500);i(f)},u=()=>{r&&(clearTimeout(r),i(null))},d=c=>{c.preventDefault(),o(c)},h=()=>{n({isVisible:!1,x:0,y:0})},a=()=>{navigator.clipboard.writeText(e.text),console.log("通过上下文菜单复制用户消息")};return p.jsx("div",{className:"flex justify-end mb-4",children:p.jsxs("div",{className:"max-w-[80%]",children:[p.jsx("div",{className:"px-4 py-2 rounded-2xl bg-gray-700 text-white stellar-body",children:p.jsx("div",{ref:s,className:"whitespace-pre-wrap break-words chat-message-content",onTouchStart:l,onTouchEnd:u,onTouchCancel:u,onContextMenu:d,children:e.text})}),p.jsx("div",{className:"text-xs text-gray-400 mt-1 text-right",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),p.jsx(Cy,{isVisible:t.isVisible,position:{x:t.x,y:t.y},messageText:e.text,onClose:h,onCopy:a})]})})},fk=({size:e=16,className:t=""})=>p.jsx("div",{className:`inline-flex items-center justify-center ${t}`,children:p.jsx(I.div,{className:"flex items-center justify-center",animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:2,repeat:1/0,ease:"linear"},scale:{duration:1,repeat:1/0,ease:"easeInOut"}},children:p.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",children:[p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#ffffff"}),[0,1,2,3,4,5,6,7].map(n=>{const r=n*45*(Math.PI/180),i=12+Math.cos(r)*3,s=12+Math.sin(r)*3,o=12+Math.cos(r)*8,l=12+Math.sin(r)*8;return p.jsx("line",{x1:i,y1:s,x2:o,y2:l,stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",opacity:.8},n)})]})})}),pk=({level:e,isActive:t,isAnalyzing:n,size:r=20,onClick:i})=>{const o=(()=>{if(!t&&!n)return{color:"rgba(255,255,255,0.3)",brightness:.3,rayCount:0,glowIntensity:0};switch(e){case"high":return{color:"#FFD700",brightness:1,rayCount:8,glowIntensity:.8,starType:"supernova"};case"medium":return{color:"#87CEEB",brightness:.8,rayCount:6,glowIntensity:.6,starType:"bright"};case"low":return{color:"#98FB98",brightness:.6,rayCount:4,glowIntensity:.4,starType:"dim"};default:return{color:"rgba(255,255,255,0.5)",brightness:.5,rayCount:4,glowIntensity:.3}}})();return n?p.jsx(I.div,{className:"cursor-pointer relative",onClick:i,whileHover:{scale:1.1},whileTap:{scale:.95},style:{width:r,height:r},children:p.jsxs(I.svg,{width:r,height:r,viewBox:"0 0 24 24",fill:"none",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:[p.jsx(I.circle,{cx:"12",cy:"12",r:"2.5",fill:"rgba(138, 95, 189, 0.8)",animate:{scale:[1,1.2,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),[0,1,2,3,4,5].map(l=>{const u=l*60*(Math.PI/180),d=12+Math.cos(u)*3.5,h=12+Math.sin(u)*3.5,a=12+Math.cos(u)*8,c=12+Math.sin(u)*8;return p.jsx(I.line,{x1:d,y1:h,x2:a,y2:c,stroke:"rgba(138, 95, 189, 0.6)",strokeWidth:"1.5",strokeLinecap:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:[0,1,0],opacity:[0,.8,0]},transition:{duration:2,repeat:1/0,delay:l*.2,ease:"easeInOut"}},l)})]})}):p.jsx(I.div,{className:"cursor-pointer relative",onClick:i,whileHover:{scale:t?1.3:1.1,filter:t?`drop-shadow(0 0 8px ${o.color})`:"none"},whileTap:{scale:.9},style:{width:r,height:r},initial:{opacity:0,scale:.5},animate:{opacity:t?1:.4,scale:1,filter:t?`drop-shadow(0 0 4px ${o.color})`:"none"},transition:{duration:.5,ease:"easeOut"},children:p.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",children:[p.jsx(I.circle,{cx:"12",cy:"12",r:"2.5",fill:o.color,animate:t?{scale:[1,1.1,1],opacity:[o.brightness,Math.min(1,o.brightness+.2),o.brightness]}:{},transition:{duration:o.starType==="supernova"?1.5:2,repeat:t?1/0:0,ease:"easeInOut"}}),t&&o.rayCount>0&&p.jsx(p.Fragment,{children:Array.from({length:o.rayCount},(l,u)=>{const d=u*(360/o.rayCount)*(Math.PI/180),h=12+Math.cos(d)*3.5,a=12+Math.sin(d)*3.5,c=12+Math.cos(d)*(o.starType==="supernova"?9:7.5),f=12+Math.sin(d)*(o.starType==="supernova"?9:7.5);return p.jsx(I.line,{x1:h,y1:a,x2:c,y2:f,stroke:o.color,strokeWidth:o.starType==="supernova"?"2":"1.5",strokeLinecap:"round",opacity:o.brightness,initial:{pathLength:0,opacity:0},animate:{pathLength:[0,1,.8],opacity:[0,o.brightness,o.brightness*.7]},transition:{duration:o.starType==="supernova"?2:2.5,repeat:1/0,delay:u*.1,ease:"easeInOut"}},u)})}),t&&o.starType==="supernova"&&p.jsx(I.circle,{cx:"12",cy:"12",r:"6",stroke:o.color,strokeWidth:"0.5",fill:"none",opacity:"0.4",animate:{scale:[1,1.2,1],opacity:[.4,.1,.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),t&&o.starType==="bright"&&p.jsx(p.Fragment,{children:[0,1,2,3].map(l=>{const u=l*90*(Math.PI/180),d=12+Math.cos(u)*4,h=12+Math.sin(u)*4,a=12+Math.cos(u)*6,c=12+Math.sin(u)*6;return p.jsx(I.line,{x1:d,y1:h,x2:a,y2:c,stroke:o.color,strokeWidth:"1",strokeLinecap:"round",opacity:"0.6",animate:{pathLength:[0,1,0],opacity:[0,.6,0]},transition:{duration:2.5,repeat:1/0,delay:l*.15+1,ease:"easeInOut"}},`pulse-${l}`)})})]})})},hk=({isOpen:e,onClose:t,insight:n,onAskFollowUp:r})=>{if(!e)return null;const s=(l=>{switch(l){case"high":return{icon:RS,color:"text-yellow-400",bgColor:"bg-yellow-400/10",borderColor:"border-yellow-400/30",title:"深度洞察",description:"这段对话触及了深层的自我认知"};case"medium":return{icon:zS,color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/30",title:"中度觉察",description:"这段对话带来了有价值的自我觉察"};case"low":return{icon:vu,color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/30",title:"初步觉知",description:"这段对话开启了自我探索的可能"};default:return{icon:fp,color:"text-gray-400",bgColor:"bg-gray-400/10",borderColor:"border-gray-400/30",title:"一般对话",description:"这是一段常规的对话交流"}}})(n.insightLevel),o=s.icon;return p.jsx(St,{children:e&&p.jsxs(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),p.jsxs(I.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:`
              relative w-full max-w-md bg-gray-900/95 backdrop-blur-xl 
              rounded-2xl border ${s.borderColor} 
              shadow-2xl overflow-hidden
            `,children:[p.jsx("div",{className:`${s.bgColor} px-6 py-4 border-b ${s.borderColor}`,children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`
                    p-2 rounded-full ${s.bgColor} 
                    border ${s.borderColor}
                  `,children:p.jsx(o,{className:`w-5 h-5 ${s.color}`})}),p.jsxs("div",{children:[p.jsx("h3",{className:`font-semibold ${s.color} stellar-title`,children:s.title}),p.jsx("p",{className:"text-sm text-gray-400 stellar-body",children:s.description})]})]}),p.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-gray-700/50 transition-colors",children:p.jsx(mn,{className:"w-5 h-5 text-gray-400"})})]})}),p.jsxs("div",{className:"p-6 space-y-5",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2 stellar-body",children:"觉察类型"}),p.jsx("div",{className:`
                  inline-flex items-center px-3 py-1 rounded-full text-xs
                  ${s.bgColor} ${s.borderColor} border
                  ${s.color}
                `,children:n.insightType})]}),n.keyInsights.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2 stellar-body",children:"关键洞察"}),p.jsx("ul",{className:"space-y-1",children:n.keyInsights.map((l,u)=>p.jsxs("li",{className:"text-sm text-gray-200 flex items-start stellar-body",children:[p.jsx("span",{className:`inline-block w-1 h-1 rounded-full ${s.color.replace("text-","bg-")} mt-2 mr-2 flex-shrink-0`}),l]},u))})]}),n.emotionalPattern&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2 stellar-body",children:"识别模式"}),p.jsx("p",{className:"text-sm text-gray-200 stellar-body",children:n.emotionalPattern})]}),n.suggestedReflection&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2 stellar-body",children:"深入思考"}),p.jsx("p",{className:"text-sm text-gray-200 italic stellar-body",children:n.suggestedReflection})]}),n.followUpQuestions.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3 stellar-body",children:"继续探索"}),p.jsx("div",{className:"space-y-2",children:n.followUpQuestions.map((l,u)=>p.jsxs(I.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{r(l),t()},className:`
                          w-full text-left p-3 rounded-lg border
                          ${s.bgColor} ${s.borderColor}
                          hover:bg-opacity-20 transition-all duration-200
                          text-sm text-gray-200 stellar-body
                        `,children:[p.jsx(fp,{className:`w-4 h-4 ${s.color} inline mr-2`}),l]},u))})]})]}),p.jsx("div",{className:"px-6 py-3 border-t border-gray-700/50 bg-gray-800/30",children:p.jsx("p",{className:"text-xs text-gray-400 text-center stellar-body",children:"点击问题可以继续深入探索"})})]})]})})},mk=({message:e,userQuestion:t,onAskFollowUp:n})=>{var b,P;const[r,i]=T.useState(!1),[s,o]=T.useState({isVisible:!1,x:0,y:0}),[l,u]=T.useState(null),d=T.useRef(null),{startAwarenessAnalysis:h,completeAwarenessAnalysis:a}=Hn();T.useEffect(()=>{!e.isStreaming&&e.text&&t&&!e.awarenessInsight&&!e.isAnalyzingAwareness&&(console.log("🧠 开始对完成的对话进行觉察分析..."),c())},[e.isStreaming,e.text,t,e.awarenessInsight,e.isAnalyzingAwareness]);const c=async()=>{if(!(!t||!e.text)){console.log("🔍 触发觉察分析:",{userQuestion:t,aiResponse:e.text}),h(e.id);try{const E=await xy(t,e.text);console.log("✅ 觉察分析结果:",E),a(e.id,E)}catch(E){console.error("❌ 觉察分析失败:",E),a(e.id,{hasInsight:!1,insightLevel:"low",insightType:"一般对话",keyInsights:[],emotionalPattern:"无特殊模式",suggestedReflection:"可以继续探索其他话题",followUpQuestions:[]})}}},f=()=>{navigator.clipboard.writeText(e.text),console.log("Message copied to clipboard")},g=()=>{console.log("Regenerate message")},v=()=>{console.log("Message liked")},_=()=>{console.log("Message disliked")},m=()=>{console.log("Download message")},y=E=>{E.preventDefault();const O="touches"in E?E.touches[0].clientX:E.clientX,B="touches"in E?E.touches[0].clientY:E.clientY;o({isVisible:!0,x:O,y:B}),console.log("显示AI消息上下文菜单",{x:O,y:B})},x=E=>{const O=setTimeout(()=>{y(E)},500);u(O)},w=()=>{l&&(clearTimeout(l),u(null))},k=E=>{E.preventDefault(),y(E)},C=()=>{o({isVisible:!1,x:0,y:0})},A=()=>{navigator.clipboard.writeText(e.text),console.log("通过上下文菜单复制消息")},S=E=>E?E.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{2,}/g,`

`).split(`
`).map(O=>O.trim()).join(`
`).replace(/^\n+|\n+$/g,""):"";return p.jsx("div",{className:"flex justify-start mb-4",children:p.jsxs("div",{className:"max-w-[80%]",children:[p.jsx("div",{className:"py-2 text-white stellar-body",children:e.isStreaming&&!e.text?p.jsx(fk,{size:20,className:"py-1"}):p.jsxs("div",{ref:d,className:"whitespace-pre-wrap break-words chat-message-content",onTouchStart:x,onTouchEnd:w,onTouchCancel:w,onContextMenu:k,children:[S(e.text),e.isStreaming&&e.text&&p.jsx("span",{className:"inline-block w-2 h-4 bg-white ml-1 animate-pulse"})]})}),!e.isStreaming&&p.jsxs("div",{className:"flex items-center gap-2 mt-2 ml-2",children:[p.jsx(pk,{level:((b=e.awarenessInsight)==null?void 0:b.insightLevel)||"low",isActive:((P=e.awarenessInsight)==null?void 0:P.hasInsight)||!1,isAnalyzing:e.isAnalyzingAwareness||!1,size:18,onClick:()=>{e.awarenessInsight&&i(!0)}}),p.jsx("button",{onClick:f,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded dialog-transparent-button",title:"复制",children:p.jsx(Sy,{className:"w-4 h-4"})}),p.jsx("button",{onClick:g,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded dialog-transparent-button",title:"重新生成",children:p.jsx(HS,{className:"w-4 h-4"})}),p.jsx("button",{onClick:v,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded dialog-transparent-button",title:"赞",children:p.jsx(QS,{className:"w-4 h-4"})}),p.jsx("button",{onClick:_,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded dialog-transparent-button",title:"踩",children:p.jsx(qS,{className:"w-4 h-4"})}),p.jsx("button",{onClick:m,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded dialog-transparent-button",title:"下载",children:p.jsx(yu,{className:"w-4 h-4"})})]}),e.awarenessInsight&&p.jsx(hk,{isOpen:r,onClose:()=>i(!1),insight:e.awarenessInsight,onAskFollowUp:E=>{n&&n(E)}}),!e.isStreaming&&p.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-2",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),p.jsx(Cy,{isVisible:s.isVisible,position:{x:s.x,y:s.y},messageText:e.text,onClose:C,onCopy:A})]})})},gk=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,yk=({onAskFollowUp:e})=>{const{messages:t,isLoading:n}=Hn(),r=T.useRef(null);T.useRef(null);const i=()=>{if(r.current){const l=r.current.closest(".overflow-y-auto");l?l.scrollTop=l.scrollHeight:r.current.scrollIntoView({behavior:"smooth"})}};T.useEffect(()=>{const l=setTimeout(()=>{i()},100);return()=>clearTimeout(l)},[t,n]);const s=()=>gk()?"calc(90px + env(safe-area-inset-top, 0px))":"calc(120px + env(safe-area-inset-top, 0px))",o=l=>{for(let u=l-1;u>=0;u--)if(t[u].isUser)return t[u].text};return p.jsxs("div",{className:"p-4 space-y-0",style:{paddingTop:s(),paddingBottom:"100px"},children:[t.map((l,u)=>l.isUser?p.jsx(dk,{message:l},l.id):p.jsx(mk,{message:l,userQuestion:o(u),onAskFollowUp:e},l.id)),p.jsx("div",{ref:r})]})},vk=({isOpen:e,onClose:t,onReopen:n,followUpQuestion:r,onFollowUpProcessed:i,initialInput:s,inputBottomSpace:o=70})=>{const[l,u]=T.useState(!1),[d,h]=T.useState(0),[a,c]=T.useState(0),[f,g]=T.useState(window.innerHeight),v=T.useRef(null),_=T.useRef(!1),{addUserMessage:m,addStreamingAIMessage:y,updateStreamingMessage:x,finalizeStreamingMessage:w,setLoading:k,isLoading:C,messages:A,conversationAwareness:S,conversationTitle:b,generateConversationTitle:P}=Hn();T.useEffect(()=>{const j=()=>{window.visualViewport?g(window.visualViewport.height):g(window.innerHeight)};if(window.visualViewport)return window.visualViewport.addEventListener("resize",j),()=>{var L;(L=window.visualViewport)==null||L.removeEventListener("resize",j)}},[]);const E=()=>o-5-65;T.useEffect(()=>{s&&s.trim()&&!_.current&&(console.log("🔄 ChatOverlay接收到初始输入:",s),_.current=!0,setTimeout(()=>{M(s)},300))},[s]),T.useEffect(()=>{e||(_.current=!1,h(0))},[e]),T.useEffect(()=>{r&&r.trim()&&(console.log("🔄 ChatOverlay接收到后续问题:",r),setTimeout(()=>{M(r),i&&i()},200))},[r,i]);const O=j=>{var X;if(!e)return;u(!0),c(j.touches[0].clientY);const L=(X=v.current)==null?void 0:X.querySelector(".overflow-y-auto"),D=!L||L.scrollTop<=1;console.log("🖱️ 开始拖拽，对话是否在顶部:",D)},B=j=>{var le;if(!l||!e)return;const D=j.touches[0].clientY-a;if(D>0&&D<=20){console.log(`📱 检测到微小下拉: ${D}px，在整个浮窗范围内允许收起`),h(Math.min(D,window.innerHeight*.8));return}const X=(le=v.current)==null?void 0:le.querySelector(".overflow-y-auto"),te=!X||X.scrollTop<=1;if(D>20){if(j.target.closest(".drag-handle")){console.log("📱 在头部拖拽区域，允许拖拽"),h(Math.min(D,window.innerHeight*.8));return}if(te){console.log("📱 对话在顶部，允许拖拽浮窗"),h(Math.min(D,window.innerHeight*.8));return}console.log("📱 对话还可滚动，不处理浮窗拖拽")}},R=()=>{l&&(u(!1),console.log(`📱 手指抬起，当前dragY: ${d}px`),d>5?(console.log("🔽 拖拽距离足够，关闭浮窗"),t()):(console.log("↩️ 拖拽距离不够，回弹"),h(0)))},F=j=>{e&&(u(!0),c(j.clientY))},K=j=>{var le;if(!l||!e)return;const D=j.clientY-a;if(D>0&&D<=20){console.log(`📱 检测到微小下拉: ${D}px，在整个浮窗范围内允许收起`),h(Math.min(D,window.innerHeight*.8));return}const X=(le=v.current)==null?void 0:le.querySelector(".overflow-y-auto"),te=!X||X.scrollTop<=1;if(D>20){if(j.target.closest(".drag-handle")){h(Math.min(D,window.innerHeight*.8));return}if(te){h(Math.min(D,window.innerHeight*.8));return}}},z=()=>{l&&(u(!1),console.log(`📱 鼠标抬起，当前dragY: ${d}px`),d>5?(console.log("🔽 拖拽距离足够，关闭浮窗"),t()):(console.log("↩️ 拖拽距离不够，回弹"),h(0)))};T.useEffect(()=>{if(l)return document.addEventListener("mousemove",K),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",z)}},[l,a,d]);const M=async(j,L=0)=>{if(!j.trim()||C)return;const D=j.trim(),X=3;L===0&&(m(D),Z("starClick")),k(!0);try{console.log(`🤖 开始生成AI回复... (尝试 ${L+1}/${X+1})`);const te=y("");let le="";const H=it=>{le+=it,x(te,le)},G=A.map(it=>({role:it.isUser?"user":"assistant",content:it.text}));console.log("📚 Conversation history:",G.length,"messages");const oe=await Mo(D,void 0,H,G);le!==oe&&x(te,oe),w(te),k(!1),Z("starReveal"),console.log("✅ AI回复生成成功:",oe),setTimeout(()=>{P()},1e3)}catch(te){if(console.error(`❌ AI回复生成失败 (尝试 ${L+1}/${X+1}):`,te),L<X)console.log("🔄 将在2秒后重试..."),setTimeout(()=>{M(j,L+1)},2e3);else{console.error("❌ 重试次数用完，AI回复失败"),k(!1);const le=A[A.length-1];le&&!le.isUser&&!le.text.trim()&&console.log("🗑️ 移除空的AI消息")}}},$=j=>{console.log("📱 ChatOverlay层接收到后续提问:",j),M(j)};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`fixed inset-0 bg-black transition-opacity duration-300 ${e?"bg-opacity-40 pointer-events-auto z-45":"bg-opacity-0 pointer-events-none z-10"}`,onClick:e?t:void 0}),p.jsxs(I.div,{ref:v,className:`fixed shadow-2xl z-45 bg-gray-900 ${e?"":"cursor-pointer"} ${e?"rounded-t-2xl":"rounded-full"}`,initial:!1,animate:{top:e?Math.max(80,80+d):window.innerHeight-E()-65,left:e?0:"50%",right:e?0:"auto",width:e?"100vw":"min(28rem, calc(100vw - 2rem))",height:e?`${f-Math.max(80,80+d)}px`:65,x:e?0:"-50%",y:d*.15,opacity:Math.max(.9,1-d/500)},transition:{type:"spring",damping:25,stiffness:300,duration:.3},style:{pointerEvents:"auto"},onTouchStart:e?O:void 0,onTouchMove:e?B:void 0,onTouchEnd:e?R:void 0,onMouseDown:e?F:void 0,children:[!e&&p.jsx("div",{className:"relative w-full h-full cursor-pointer",onClick:j=>{j.stopPropagation(),console.log("🔄 点击收缩的浮窗，重新展开"),n&&n()},children:p.jsxs("div",{className:"absolute left-0 right-0 flex items-center justify-between px-4",style:{top:"6px"},children:[p.jsx("div",{className:"flex-1 text-left",children:p.jsx("button",{onClick:j=>{j.stopPropagation(),t()},className:"px-3 py-1 rounded-full dialog-transparent-button transition-colors duration-200 text-blue-400 text-sm font-medium stellar-body",children:"完成"})}),p.jsx("div",{className:"flex-1 flex justify-center",children:p.jsx("span",{className:"text-gray-400 text-sm font-medium stellar-body",children:"当前对话"})}),p.jsx("div",{className:"flex-1 flex justify-end",children:p.jsx("button",{onClick:j=>{j.stopPropagation(),t()},className:"p-2 rounded-full dialog-transparent-button transition-colors duration-200",children:p.jsx(mn,{className:"w-4 h-4",strokeWidth:2})})})]})}),e&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"drag-handle cursor-grab active:cursor-grabbing",children:[p.jsx("div",{className:"flex justify-center py-4",children:p.jsx("div",{className:"w-12 h-1.5 bg-gray-600 rounded-full"})}),p.jsx("div",{className:"px-4 pb-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[b&&p.jsx("h1",{className:"stellar-title text-white",children:b}),p.jsx("button",{onClick:t,className:`p-2 rounded-full dialog-transparent-button transition-colors duration-200 ${b?"":"ml-auto"}`,children:p.jsx(mn,{className:"w-5 h-5"})})]})})]}),p.jsxs("div",{className:"flex-1 flex flex-col",style:{height:"calc(100% - 140px)"},children:[p.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hidden",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:p.jsx(yk,{onAskFollowUp:$})}),p.jsx("div",{className:"h-20"})]})]})]})]})},Ta=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,xk=()=>{const{isAsking:e,setIsAsking:t,addStar:n,pendingStarPosition:r,isLoading:i}=Lr(),[s,o]=T.useState(""),[l,u]=T.useState(!1),[d,h]=T.useState(!1),[a,c]=T.useState(0),[f,g]=T.useState(!1),v=()=>{i||t(!1)},_=()=>{u(!l),console.log("Microphone clicked, recording:",!l)},m=()=>{h(!0),console.log("Star ray button clicked"),s.trim()&&C({preventDefault:()=>{}}),setTimeout(()=>{h(!1)},1e3)},y=A=>{o(A.target.value)},x=A=>{A.key==="Enter"&&C(A)};T.useEffect(()=>{if(!Ta()||!e)return;const A=()=>{const S=window.visualViewport;if(S){const b=window.innerHeight-S.height,P=b>0;c(b),g(P)}};if(window.visualViewport)return window.visualViewport.addEventListener("resize",A),()=>{var S;(S=window.visualViewport)==null||S.removeEventListener("resize",A)};{let S=window.innerHeight;const b=()=>{const P=window.innerHeight,E=Math.max(0,S-P),O=E>100;c(E),g(O)};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)}},[e]);const w=A=>{if(Ta()){const S=A.target;S.focus(),setTimeout(()=>{const b=S.value.length;S.setSelectionRange(b,b)},100)}},k=()=>Ta()&&f&&a>0?{transform:`translateY(-${a/2}px)`,transition:"transform 0.25s ease-out"}:{transform:"translateY(0)",transition:"transform 0.25s ease-out"},C=async A=>{if(A.preventDefault(),!(!s.trim()||i)){Z("starLight");try{t(!1),await n(s),o(""),setTimeout(()=>{Z("starReveal")},1e3)}catch(S){console.error("Error creating star:",S)}}};return p.jsxs(p.Fragment,{children:[xn.createPortal(p.jsx(St,{children:e&&p.jsxs(I.div,{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:999999},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(I.div,{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v}),p.jsxs(I.div,{className:"w-full max-w-md mx-4 z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:k(),children:[p.jsx("h2",{className:"stellar-title text-white mb-6 text-center",children:"Ask the Stars"}),p.jsx("form",{onSubmit:C,children:p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex items-center bg-gray-900 rounded-full h-12 shadow-lg border border-gray-800",children:[p.jsx("input",{type:"text",value:s,onChange:y,onKeyPress:x,onClick:w,placeholder:"What wisdom do you seek from the cosmos?",className:"flex-1 bg-transparent text-white placeholder-gray-400 px-4 py-2 focus:outline-none stellar-body",autoFocus:!0,disabled:i,inputMode:"text",autoComplete:"off",autoCapitalize:"sentences",spellCheck:"false"}),p.jsxs("div",{className:"flex items-center space-x-2 mr-3 oracle-input-buttons",children:[p.jsx("button",{type:"button",onClick:_,className:`p-2 rounded-full dialog-transparent-button transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 ${l?"recording text-white":"text-gray-300"}`,disabled:i,children:p.jsx(ky,{className:"w-4 h-4",strokeWidth:2})}),p.jsx(I.button,{type:"button",onClick:m,className:`p-2 rounded-full dialog-transparent-button transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 ${s.trim()?"text-cosmic-accent":"text-gray-300"}`,disabled:i,whileHover:i?{}:{scale:1.1},children:i?p.jsx(dt,{size:16,animated:!0,iconColor:"#ffffff"}):p.jsx(dt,{size:16,animated:d||!!s.trim(),iconColor:s.trim()?"#9333ea":"#ffffff"})})]})]}),l&&p.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:p.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-xs",children:[p.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),p.jsx("span",{children:"Recording..."})]})})]})}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{type:"button",className:"cosmic-button px-6 py-2 rounded-full text-white text-sm",onClick:v,disabled:i,children:"Cancel"})})]})]})}),document.body),p.jsx(St,{children:i&&r&&p.jsx(I.div,{className:"absolute z-20 pointer-events-none",style:{left:`${r.x}%`,top:`${r.y}%`,transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0},children:p.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:p.jsx(dt,{size:48,animated:!0,className:"text-cosmic-accent animate-pulse"})})})})]})},De=wn("ChatOverlay",{web:()=>Tr(()=>import("./ChatOverlayWeb-Dtct5trO.js"),[]).then(e=>new e.ChatOverlayWeb)}),wk=()=>{const[e,t]=T.useState(!1),[n,r]=T.useState([]),[i,s]=T.useState(!1),[o,l]=T.useState(""),[u,d]=T.useState(0),[h,a]=T.useState(window.innerHeight),{messages:c,addUserMessage:f,addStreamingAIMessage:g,updateStreamingMessage:v,finalizeStreamingMessage:_,setLoading:m,isLoading:y,conversationTitle:x,generateConversationTitle:w}=Hn();return T.useEffect(()=>{if(!q.isNativePlatform()){console.log("🌐 Web环境，使用React ChatOverlay");return}console.log("📱 原生环境，设置ChatOverlay监听器");const F=De.addListener("overlayStateChanged",j=>{console.log("📱 浮窗状态变化:",j),t(j.isOpen)}),K=De.addListener("followUpProcessed",()=>{console.log("📱 后续问题处理完成")}),z=De.addListener("conversationTitleChanged",j=>{console.log("📱 对话标题变化:",j.title),l(j.title)}),M=De.addListener("keyboardHeightChanged",j=>{console.log("📱 键盘高度变化:",j.height),d(j.height)}),$=De.addListener("viewportHeightChanged",j=>{console.log("📱 视口高度变化:",j.height),a(j.height)});return()=>{F.then(j=>j.remove()),K.then(j=>j.remove()),z.then(j=>j.remove()),M.then(j=>j.remove()),$.then(j=>j.remove())}},[]),{isOpen:e,messages:c,isLoading:y,showOverlay:async(F=!0)=>{if(q.isNativePlatform()){console.log("📱 尝试显示原生ChatOverlay",F);try{await De.show({isOpen:F}),console.log("✅ 原生ChatOverlay显示成功")}catch(K){console.error("❌ 原生ChatOverlay显示失败:",K)}}else console.log("🌐 显示React ChatOverlay"),t(!0)},hideOverlay:async()=>{q.isNativePlatform()?(console.log("📱 隐藏原生ChatOverlay"),await De.hide()):(console.log("🌐 隐藏React ChatOverlay"),t(!1))},sendMessage:async F=>{q.isNativePlatform()?(console.log("📱 通过原生插件发送消息:",F),await De.sendMessage({message:F})):console.log("🌐 通过React组件发送消息:",F)},conversationTitle:x||o,keyboardHeight:u,viewportHeight:h,setConversationTitle:async F=>{q.isNativePlatform()&&await De.setConversationTitle({title:F})},setKeyboardHeight:async F=>{q.isNativePlatform()&&await De.setKeyboardHeight({height:F})},setViewportHeight:async F=>{q.isNativePlatform()&&await De.setViewportHeight({height:F})},setInitialInput:async F=>{q.isNativePlatform()&&await De.setInitialInput({input:F})},setFollowUpQuestion:async F=>{q.isNativePlatform()&&await De.setFollowUpQuestion({question:F})},updateMessages:async F=>{q.isNativePlatform()&&await De.updateMessages({messages:F})},setLoading:async F=>{q.isNativePlatform()&&await De.setLoading({loading:F})},isNative:q.isNativePlatform()}};function _k(){const[e,t]=T.useState(!1),[n,r]=T.useState(!1),[i,s]=T.useState(!1),[o,l]=T.useState(!1),[u,d]=T.useState(!1),h=wk(),[a,c]=T.useState(!1),[f,g]=T.useState(""),[v,_]=T.useState(""),m=!1,y=q.isNativePlatform(),x=y?h.isOpen:a;console.log("🔍 环境检测:",{isNative:y,platform:q.getPlatform(),nativeOverlayOpen:h.isOpen});const{applyTemplate:w,currentInspirationCard:k,dismissInspirationCard:C}=Lr(),{messages:A,addUserMessage:S,addStreamingAIMessage:b,updateStreamingMessage:P,finalizeStreamingMessage:E,setLoading:O,generateConversationTitle:B}=Hn(),R=()=>{console.log("📱 后续问题处理完成，清空pending状态"),g("")},F=async H=>{if(console.log("🔍 App.tsx: 接收到发送请求",H,"原生模式:",y),y){console.log("📱 原生模式，使用ChatStore处理消息"),h.isOpen||(console.log("📱 原生浮窗未打开，先打开浮窗"),await h.showOverlay(!0),await new Promise(G=>setTimeout(G,300))),S(H),O(!0);try{const G=b("");let oe="";const it=W=>{oe+=W,P(G,oe)},Ye=A.map(W=>({role:W.isUser?"user":"assistant",content:W.text})),ze=await Mo(H,void 0,it,Ye);oe!==ze&&P(G,ze),E(G),setTimeout(()=>{B()},1e3)}catch(G){console.error("❌ AI回复失败:",G)}finally{O(!1),await h.setLoading(!1)}}else console.log("🌐 Web模式，使用React ChatOverlay"),a?g(H):(_(H),c(!0))},K=()=>{y?h.hideOverlay():(console.log("❌ 关闭Web对话浮层"),c(!1),_(""))};T.useEffect(()=>{(async()=>{q.isNativePlatform()?(await ux.setStyle({style:yl.Dark}),d(!0),setTimeout(async()=>{await dx.hide({fadeOutDuration:300})},500)):d(!0)})()},[]),T.useEffect(()=>{const H=setTimeout(()=>{gu()?console.log("✅ API配置正常"):(console.warn("⚠️ API配置无效或不完整，请配置API以使用完整功能"),console.info("💡 点击右上角设置图标进行API配置"))},2e3);return()=>clearTimeout(H)},[]),T.useEffect(()=>{y&&h.isOpen&&A.length>0&&(console.log("📱 同步消息列表到原生浮窗，消息数量:",A.length),h.updateMessages(A.map(H=>({id:H.id,text:H.text,isUser:H.isUser,timestamp:Date.now()}))))},[y,h.isOpen,A,h]),T.useEffect(()=>{console.log("🃏 灵感卡片状态变化:",k?"显示":"隐藏"),k&&console.log("📝 当前卡片问题:",k.question)},[k]),T.useEffect(()=>{const H=()=>{AS(),document.removeEventListener("touchstart",H),document.removeEventListener("click",H)};return document.addEventListener("touchstart",H),document.addEventListener("click",H),()=>{document.removeEventListener("touchstart",H),document.removeEventListener("click",H),bS()}},[]);const z=()=>{q.isNativePlatform()&&Ct("light"),t(!1)},M=()=>{console.log("⚙️ Settings button clicked - handleOpenConfig triggered!"),q.isNativePlatform()&&Ct("medium"),Z("starClick"),r(!0)},$=()=>{q.isNativePlatform()&&Ct("light"),r(!1)},j=()=>{console.log("🍔 Menu button clicked - handleOpenDrawerMenu triggered!"),q.isNativePlatform()&&Ct("light"),Z("starClick"),l(!0)},L=()=>{q.isNativePlatform()&&Ct("light"),l(!1)},D=()=>{console.log("✦ Logo button clicked - opening StarCollection!"),q.isNativePlatform()&&Ct("light"),Z("starLight"),t(!0)},X=()=>{q.isNativePlatform()&&Ct("light"),Z("starClick"),s(!0)},te=()=>{q.isNativePlatform()&&Ct("light"),s(!1)},le=H=>{q.isNativePlatform()&&Ct("success"),w(H),Z("starReveal")};return p.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-black text-gray-100",children:[p.jsxs("div",{className:"min-h-screen cosmic-bg overflow-hidden relative transition-all duration-500 ease-out",style:{transformStyle:"preserve-3d",perspective:"1000px",transform:x?"scale(0.92) translateY(-15px) rotateX(4deg)":"scale(1) translateY(0px) rotateX(0deg)",filter:x?"brightness(0.6)":"brightness(1)"},children:[p.jsx(ak,{onOpenDrawerMenu:j,onLogoClick:D}),u&&p.jsx(jS,{}),k&&p.jsx(NS,{card:k,onDismiss:C}),u&&p.jsx(ZS,{}),p.jsx(rk,{isOpen:e,onClose:z}),p.jsx(ik,{isOpen:i,onClose:te,onSelectTemplate:le}),p.jsx(sk,{isOpen:n,onClose:$}),p.jsx(ok,{isOpen:o,onClose:L,onOpenSettings:M,onOpenTemplateSelector:X}),p.jsx(xk,{}),p.jsx("div",{className:"fixed top-20 right-4 z-50",children:p.jsxs("div",{className:"space-y-2",children:[p.jsx("button",{onClick:async()=>{if(console.log("🧪 ChatOverlay测试按钮被点击"),console.log("🧪 forceWebMode:",m),console.log("🧪 isNative:",y),console.log("🧪 platform:",q.getPlatform()),y)try{await h.showOverlay(!0),console.log("🧪 原生调用成功")}catch(H){console.error("🧪 原生调用失败:",H)}else console.log("🧪 使用Web版本"),c(!0)},className:"bg-red-500 text-white px-3 py-2 rounded text-xs font-bold block w-full",children:"测试ChatOverlay"}),p.jsx("button",{onClick:async()=>{console.log("🧪 ObjC插件测试开始");try{const{Capacitor:H}=await Tr(async()=>{const{Capacitor:oe}=await Promise.resolve().then(()=>Rd);return{Capacitor:oe}},void 0),G=H.Plugins.SimpleTestPlugin;if(console.log("🧪 SimpleTestPlugin:",G),G&&G.test){const oe=await G.test();console.log("🧪 ObjC插件测试成功:",oe)}else console.error("🧪 SimpleTestPlugin未找到")}catch(H){console.error("🧪 ObjC插件测试失败:",H)}},className:"bg-yellow-500 text-white px-3 py-2 rounded text-xs font-bold block w-full",children:"测试ObjC插件"}),p.jsx("button",{onClick:async()=>{console.log("🧪 Swift插件测试开始");try{const{Capacitor:H}=await Tr(async()=>{const{Capacitor:oe}=await Promise.resolve().then(()=>Rd);return{Capacitor:oe}},void 0),G=H.Plugins.TestPlugin;if(console.log("🧪 TestPlugin:",G),G&&G.test){const oe=await G.test();console.log("🧪 Swift插件测试成功:",oe)}else console.error("🧪 TestPlugin未找到")}catch(H){console.error("🧪 Swift插件测试失败:",H)}},className:"bg-green-500 text-white px-3 py-2 rounded text-xs font-bold block w-full",children:"测试Swift插件"}),p.jsxs("div",{className:"text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded",children:["模式: ",y?"原生":"Web"]}),p.jsxs("div",{className:"text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded",children:["平台: ",q.getPlatform()]})]})})]}),Zv.createPortal(p.jsxs(p.Fragment,{children:[p.jsx(uk,{isOpen:!0,onToggle:()=>{},onSendMessage:F,showChatHistory:!1,isFloatingAttached:!x}),!y&&p.jsx(vk,{isOpen:a,onClose:K,onReopen:()=>c(!0),followUpQuestion:f,onFollowUpProcessed:R,initialInput:v,inputBottomSpace:a?34:70})]}),document.body)]})}class Sk extends T.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("App Error Boundary caught an error:",t,n)}render(){var t;return this.state.hasError?p.jsx("div",{className:"min-h-screen bg-black relative flex items-center justify-center",children:p.jsxs("div",{className:"text-white bg-red-500 p-4 rounded max-w-md",children:[p.jsx("h2",{className:"text-xl mb-2",children:"Application Error"}),p.jsx("p",{className:"mb-2",children:"Something went wrong:"}),p.jsx("pre",{className:"text-sm bg-black p-2 rounded overflow-auto",children:(t=this.state.error)==null?void 0:t.message}),p.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"mt-2 px-4 py-2 bg-blue-500 rounded text-white",children:"Try Again"})]})}):this.props.children}}Nm(document.getElementById("root")).render(p.jsx(T.StrictMode,{children:p.jsx(Sk,{children:p.jsx(_k,{})})}));export{ur as I,yp as N,Ic as W};
