# 银河参数对照表（当前项目主页）

文件位置：`src/components/InteractiveGalaxyBackground.tsx`

说明：以下为主页银河渲染中用到的核心参数、其代码变量/函数、默认值与作用位置，对应你熟悉的中文配置分组，便于与 `ref/galaxy_claude` 对比。默认值取自当前代码中的 `defaultParams`。

## 星系核心
- 核心密度: `coreDensity`（默认 `0.70`）
  - 作用：核心区域星点密度权重。
  - 使用：`generateLayers` 内核心区判断；密度计算分支。
- 核心半径: `coreRadius`（默认 `25`）
  - 作用：核心区域半径阈值。
  - 使用：`generateLayers` 内 `radius < coreRadius` 分支。
- 核心星点大小最小/最大: `coreSizeMin` / `coreSizeMax`（默认 `1.0` / `4.0`）
  - 作用：核心区域星点半径范围。

## 旋臂基础
- 旋臂数量: `armCount`（默认 `5`）
  - 使用：`getArmPositions` 计算臂角偏移。
- 旋臂密度: `armDensity`（默认 `0.70`）
  - 使用：`calculateArmDensityProfile` 与臂间密度叠加。
- 螺旋紧密度: `spiralB`（默认 `0.21`）
  - 使用：`getArmPositions` 角度计算；影响臂紧致程度与抖动方向。
- 螺旋基准: `spiralA`（默认 `8`）
  - 使用：`getArmPositions` 半径→角度映射的基准常量。

## 旋臂宽度（精细化）
- 内侧宽度: `armWidthInner`（默认 `55`）
- 外侧宽度: `armWidthOuter`（默认 `101`）
- 宽度增长: `armWidthGrowth`（默认 `2.8`）
  - 三者使用：`getArmWidth(radius, maxRadius)` 返回臂宽，用于 `getArmInfo` 的 `inArm` 判断与 `calculateArmDensityProfile` 的剖面。

## 旋臂密度剖面（核心）
- 臂间基础密度: `interArmDensity`（默认 `0.08`）
  - 使用：`calculateArmDensityProfile` 基线密度。
- 山坡平缓度: `armTransitionSoftness`（默认 `3.0`）
  - 使用：`calculateArmDensityProfile` 中高斯剖面分母（越大越平缓）。

## 自然淡化（新功能）
- 淡化起始: `fadeStartRadius`（默认 `0.2`）
- 淡化结束: `fadeEndRadius`（默认 `1.36`）
- 外围密度维持: `outerDensityMaintain`（默认 `0.15`）
  - 三者使用：`getFadeFactor` 与 `getRadialDecayFn` 控制半径向淡化与外围最低阈值。

## 背景星空
- 背景星星数量（密度）: `backgroundDensity`（默认 `0.0006`）
  - 使用：`generateLayers` 背景层（far）星点数量。
- 背景星星大小（倍数）: `backgroundStarSizeMultiplier`（默认 `1.0`）
  - 使用：`generateLayers` 背景星点尺寸乘子。

## 破碎飘带效果（新功能）
- 垂直抖动强度: `jitterStrength`（默认 `16`）
  - 使用：`generateLayers` 中臂法线方向高斯抖动强度。
- 密度噪声缩放: `densityNoiseScale`（默认 `0.049`）
  - 使用：`generateLayers` 中 `noise2D(x*scale,y*scale)` 团块感尺度。
- 密度噪声强度: `densityNoiseStrength`（默认 `0.9`）
  - 使用：密度调制系数 `modulation` 的影响幅度。


## 星星大小调节
- 旋臂星星大小: `armStarSizeMultiplier`（默认 `0.8`）
- 臂间星星大小: `interArmStarSizeMultiplier`（默认 `0.9`）
- 背景星星大小: `backgroundStarSizeMultiplier`（默认 `1.0`）
  - 使用：分别在核心/臂/臂间/背景星点绘制分支中作为最终半径乘子。

## 其他重要函数与派生量

## 视图缩放
- 整体缩放（银河占屏比例）: `galaxyScale`（默认 `0.68`）
  - 使用：在绘制 near/far 层前围绕屏幕中心执行 `ctx.scale(scale, scale)`，控制银河占屏比例。

- `getArmPositions(radius, centerX, centerY)`: 根据 `armCount/spiralA/spiralB` 计算臂中心线位置与角度。
- `getArmInfo(x,y,centerX,centerY,maxRadius)`: 计算到最近旋臂的距离、臂宽与是否在臂内。
- `calculateArmDensityProfile(armInfo)`: 计算在臂与臂间的密度与星点大小（依赖 `armDensity/interArmDensity/armTransitionSoftness`）。
- `getFadeFactor(radius,maxRadius)`: 依据 `fadeStartRadius/fadeEndRadius` 计算淡化值。
- `getRadialDecayFn`: 将径向指数衰减与淡化因子/外围维持值整合。
- `noise2D(x,y)`: 轻量伪噪声，用于密度团块感（受 `densityNoiseScale/Strength` 影响）。



## 臂宽增长模型（新增能力）
- `armWidthModel`: `'power'|'sigmoid'|'piecewise'`（默认 `power`）
  - `power`: 现有幂函数增长，`progress^armWidthGrowth`，实现简洁，可控性好。
  - `sigmoid`: S型增长，内侧缓慢、中段加速、外侧放缓，更贴近视觉感知（可配合 `armWidthSigmoidK` 调整陡峭度）。
  - `piecewise`: 分段线性，0–0.3缓慢、0.3–0.8加速、0.8–1.0放缓，直观易调。
- `armWidthSigmoidK`: S型陡峭度，默认 8，仅在 `armWidthModel='sigmoid'` 时生效。

### 使用建议
- 想要“越外越宽”的视觉对比更明显：
  - 选择 `sigmoid` 或 `piecewise`，并适当拉大 `armWidthOuter`，降低 `armWidthGrowth`。
  - 推荐起点（不改默认，只作调试）：
    - 真实系：`armWidthInner=30, armWidthOuter=100, armWidthGrowth=2.0, power`
    - 表现系：`armWidthInner=20, armWidthOuter=150, armWidthGrowth=1.5, sigmoid(K=10)`
    - 极端测试：`armWidthInner=15, armWidthOuter=200, armWidthGrowth=1.2, piecewise)`
## 当前默认参数（汇总）
```
coreDensity: 0.70
coreRadius: 25
coreSizeMin: 1.0
coreSizeMax: 3.5
armCount: 5
armDensity: 0.70
armBaseSizeMin: 0.7
armBaseSizeMax: 2.0
armHighlightSize: 5.0
armHighlightProb: 0.01
spiralA: 8
spiralB: 0.21
armWidthInner: 55
armWidthOuter: 101
armWidthGrowth: 2.8
armTransitionSoftness: 5.2
fadeStartRadius: 0.2
fadeEndRadius: 1.36
outerDensityMaintain: 0.10
interArmDensity: 0.150
interArmSizeMin: 0.6
interArmSizeMax: 1.2
radialDecay: 0.0015
backgroundDensity: 0.0006
backgroundSizeVariation: 2.0
jitterStrength: 16
densityNoiseScale: 0.049
densityNoiseStrength: 0.9
armStarSizeMultiplier: 0.8
interArmStarSizeMultiplier: 0.9
backgroundStarSizeMultiplier: 1.0
```

备注：
- 主页当前实现遵循“白色点星”原始风格，没有额外辉光/着色/云层叠加；仅保留缓慢旋转（可按需关闭）。
- 若需改回你最初指出的那套默认（coreDensity: 0.70/armCount: 5/…），只需在 `defaultParams` 中替换对应值即可，不影响其它逻辑。
